X-Received: by 10.107.47.90 with SMTP id j87mr12906082ioo.6.1496778740337;
        Tue, 06 Jun 2017 12:52:20 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.36.65.145 with SMTP id b17ls1021617itd.9.gmail; Tue, 06 Jun
 2017 12:52:19 -0700 (PDT)
X-Received: by 10.99.108.193 with SMTP id h184mr27549374pgc.166.1496778739184;
        Tue, 06 Jun 2017 12:52:19 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1496778739; cv=none;
        d=google.com; s=arc-20160816;
        b=zEg2IukudbDAvVBCnzvOrHqRJLNEU7HjnjFxiJaiKln+fzHCJfLbflrl1zma0o/QKr
         OvLckgRaGD1gWNMr6D0pQczLxWMBOnVq2eh7ogYfG31vBWLkHCA/dtg+Yrew2goGJgO0
         kKzTEIWXhWp+bYe0kzS3FPCJTu8LgsL58C5LFpn3NmSgo2tNTkYvGwNzZfHwGa1uRRc9
         L5SuK9a4Sd5sWVkXh8S4lHnGRUXgHtdvmfc5vQNexYOb9QrqKg3z/hm5DD1MEeMuh7B6
         3kN0Wk7jZJrOXo19ka2u6vZYXLHr1rITHIpD+ONGRsyZDHEGxtw12cam0m11wcb9yuHe
         a6Yg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=message-id:in-reply-to:to:references:date:subject:mime-version:from
         :dkim-signature:arc-authentication-results;
        bh=KZ99xOPu22diNhk16m++/XT6hZLKhIV/HezR2+HARO8=;
        b=hzvM87OkTxOfyPLoDhdKpkD+Ocnl4uN4sNdtGv3hbHFrvaooZW9tOtvSSXaPMZ+2Qi
         KB6mOrMkg4ga/+X4mzcraqVwP9QIhwsqi5YgW1FE4DIIIfQR1depUbno5vRBqd5mPQkf
         eTsqyhpCv1kfH7vPK+r/uU17HqMkG+CkhuXzqsC4sxSt0yaB79gxFammgVTpx78j2ThR
         bleC9HhlG2bvMQMxmerSYVtqHU5iyiIMA5PkfOWJMruQEHf7b1wEifYOIjucbN6Q5dfI
         gULAVG4glxfF7VFfLrWVJy6eONTbdBGhCWmWnPAb4zT6bClCBcYyEocJYp9zn7RkO0+6
         W+gw==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass head...@gmail.com;
       spf=pass (google.com: domain of richard...@gmail.com designates 209.85.216.193 as permitted sender) smtp.mailfrom=richard...@gmail.com
Return-Path: <richard...@gmail.com>
Received: from fe4.lbl.gov (fe4.lbl.gov. [128.3.41.71])
        by mx.google.com with ESMTP id j10si34397831pfc.111.2017.06.06.12.52.18
        for <singu...@lbl.gov>;
        Tue, 06 Jun 2017 12:52:19 -0700 (PDT)
Received-SPF: pass (google.com: domain of richard...@gmail.com designates 209.85.216.193 as permitted sender) client-ip=209.85.216.193;
Authentication-Results: mx.google.com;
       dkim=pass head...@gmail.com;
       spf=pass (google.com: domain of richard...@gmail.com designates 209.85.216.193 as permitted sender) smtp.mailfrom=richard...@gmail.com
X-Ironport-SBRS: 2.7
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A2G+AADTBjdZf8HYVdFbAxoBAQEBAgEBA?=
 =?us-ascii?q?QEIAQEBARUBAQEBAgEBAQEIAQEBAYJEPAKBDQOBCoNrCIoZkgWVf4ExARsbJQM?=
 =?us-ascii?q?hAQmBcIQJAoJlPxgBAQEBAQEBAQEBAQIQAQEJCwsIJjGCMwUCAwIeBARGIQYCA?=
 =?us-ascii?q?wEBAQEBAQEBAQEBIAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQk?=
 =?us-ascii?q?CDAMcBCEBARgBAQEBAgEaCQQZAQ0OEgwDAQsGBQsNFgEJAQYDAgIhAg4DAQUBC?=
 =?us-ascii?q?xEOBwQBGQECBIg3gTkBAw0IAwILoRo/jAeBbBgFARyDCgWDZgoZJw1Wg1wBAQE?=
 =?us-ascii?q?BAQUBAQEBAQEBARgCBgkBCIgvK4FpgQyCWE5GTxIBPQwaAQGCSTCCMQWJQAOGb?=
 =?us-ascii?q?YFdhHWGdzuHJoZXXIRbgluIJBCGcIs+hFuDADOBFR94DTMLMCEjWxIBBoJbgVk?=
 =?us-ascii?q?qDxyCAFoBAQEFhwcNFzCBaQEBAQ?=
X-IronPort-AV: E=Sophos;i="5.39,307,1493708400"; 
   d="scan'208,217";a="77128893"
Received: from mail-qt0-f193.google.com ([209.85.216.193])
  by fe4.lbl.gov with ESMTP; 06 Jun 2017 12:52:16 -0700
Received: by mail-qt0-f193.google.com with SMTP id o21so21964420qtb.1
        for <singu...@lbl.gov>; Tue, 06 Jun 2017 12:52:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=from:mime-version:subject:date:references:to:in-reply-to:message-id;
        bh=KZ99xOPu22diNhk16m++/XT6hZLKhIV/HezR2+HARO8=;
        b=p9en35FBF0JLgfpKjka78YCLAcbhi402J3rzrtwYERCjq6QNegXB922gwss2bKTGgo
         1VZLcD2XlVvv8Sx0XC2/oU+XkHA+624yVNayYgRDdz3mr6BKq3HlV1KURqGKYDYHQ3cm
         P84PmRTP5H1prX6oAZo9X2pvfhT/keelKLoW626rB0pdD2Evx1ozybJlc0mb2Z9JWjNn
         T5nLG6avC8aV3nHmYAEIflfkiWnhflU11itZXMG3yH9VOhxdchgVFZujjD7z3upsBo2q
         DDDPTcmALKXCs1RkGp8zO5tSmWEiG4yLX7pgJxXglNpRk2VrV4QrXgH0wBN4HUOs2GoB
         hbjA==
X-Gm-Message-State: AODbwcChHHoY0LDcGQss4gDwdt3iToG63SzHazkXtgpm62hQIKeGYjGU
	OgE4h+ZFlpaOS0jrUuE=
X-Received: by 10.55.53.67 with SMTP id c64mr31305920qka.82.1496778735405;
        Tue, 06 Jun 2017 12:52:15 -0700 (PDT)
Return-Path: <richard...@gmail.com>
Received: from [172.16.6.110] ([38.122.3.140])
        by smtp.gmail.com with ESMTPSA id u39sm13547466qtu.68.2017.06.06.12.52.13
        for <singu...@lbl.gov>
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Tue, 06 Jun 2017 12:52:14 -0700 (PDT)
From: Rick Wagner <richard...@gmail.com>
Content-Type: multipart/alternative;
 boundary="Apple-Mail=_952E5080-2C28-4DAC-B9DE-6E508FF4F674"
Mime-Version: 1.0 (Mac OS X Mail 10.3 \(3273\))
Subject: Re: [Singularity] using Singularity to add Ubuntu to a NPACI Rocks
 Cluster node
Date: Tue, 6 Jun 2017 15:52:12 -0400
References: <eb2e5586-6bbb-4764-a155-83aea545ded0@lbl.gov>
 <CAM=pu+JNZw5WSspqPJhxfvVVa+W4CrUatPOFyJd02uNXK7QGsw@mail.gmail.com>
 <705AFBC5-ABBF-45AB-9A0A-F094AC0A7E07@fordham.edu>
 <CAM=pu+KwqfXQwbxYwZbAifx-rQjFgCoh-4KNwMPLaw8BD1xidg@mail.gmail.com>
 <C734A832-7C37-424C-BDA8-F3003A088C9A@fordham.edu>
 <6F6BCBDE-B10D-40F5-8D23-AB3470CA7DAA@gmail.com>
 <672F6430-4C6C-4A66-919B-A9C4E7FE4ECB@fordham.edu>
 <F0A18C08-400E-4362-AD1B-B9DA736F72AB@gmail.com>
 <59F05D2F-47A7-49BC-9F37-D16F845C159D@fordham.edu>
 <CAA6Bz=f=191vj-Mx29bsDtmt+vwHFp9E7wE9xse34ak762JxDQ@mail.gmail.com>
 <9CF6424D-BCDB-40E8-830C-81CE2F1C5538@fordham.edu>
 <CAA6Bz=eFXAstGLM8pm+p_PiaMvo8LNb=TGNJn82K+mLuM2BAFg@mail.gmail.com>
 <BDFE338B-2C36-4DE2-B94E-6AAB75FF2615@fordham.edu>
 <CAA6Bz=dKY7hicKNuGdea9YyHrd+n_cPTLuSS2SW2vb3xZspmug@mail.gmail.com>
 <F920964C-A347-41C8-A231-12A9167A2546@fordham.edu>
 <CAM=pu+LZ3+pmkdrZG2Epa59FXTh55=_frfb_rJLGmoW-ugdYnw@mail.gmail.com>
 <CAM=pu+Lo+TnjqrcScC3ptiH4Yx-JULHZmXxv9DUS9vCSwHCqfw@mail.gmail.com>
 <E43855ED-30E1-4DBA-AFF4-509EC76ABE63@fordham.edu>
To: singularity@lbl.gov
In-Reply-To: <E43855ED-30E1-4DBA-AFF4-509EC76ABE63@fordham.edu>
Message-Id: <05C6516D-943A-46C0-BA63-DB9AC28FCDF6@gmail.com>
X-Mailer: Apple Mail (2.3273)

--Apple-Mail=_952E5080-2C28-4DAC-B9DE-6E508FF4F674
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

On each compute node create a singularity.sh and singularity.csh file in /e=
tc/profile.d/. You can put these on the front end and distribute them via 4=
11.

Example for adding some IB utilities to the PATH:

[ux455215@comet-ln2 profile.d]$ pwd
/etc/profile.d

[ux455215@comet-ln2 profile.d]$ cat ibutils.sh=20
if ! echo ${PATH} | grep -q /opt/ibutils/bin ; then
        PATH=3D${PATH}:/opt/ibutils/bin
fi

[ux455215@comet-ln2 profile.d]$ cat ibutils.csh=20
if ( "${path}" !~ */opt/ibutils/bin* ) then
        set path =3D ( $path /opt/ibutils/bin )
endif
[ux455215@comet-ln2 profile.d]$=20

=E2=80=94Rick

> On Jun 6, 2017, at 3:30 PM, Robert Kudyba <rku...@fordham.edu> wrote:
>=20
> It=E2=80=99s all coming together! Since we don=E2=80=99t really care abou=
t the Ubuntu image I made it chmod 777 to allow writeable to all. Also does=
 anyone know how to export the $PATH to all Rocks compute nodes to include =
/share/apps/singularity-install/bin/singularity to allow singularity to wor=
k without being in the bin/ directory? I see the init file in etc but that =
doesn=E2=80=99t seem to work before calling singularity.
>=20
>> On Jun 6, 2017, at 1:38 PM, vanessa s <vso...@gmail.com <mailto:vso...@g=
mail.com>> wrote:
>>=20
>> And if you want to shell inside (and run doesn't open a shell) you shoul=
d just use shell instead:
>>=20
>> sudo singularity shell --writable /share/apps/ubuntu.simg
>>=20
>> On Tue, Jun 6, 2017 at 10:37 AM, vanessa s <vso...@gmail.com <mailto:vso=
...@gmail.com>> wrote:
>> Almost! To use -w you need to run as root:
>>=20
>> sudo singularity run -w /share/apps/ubuntu.simg
>>=20
>> On Tue, Jun 6, 2017 at 9:04 AM, Robert Kudyba <rku...@fordham.edu <mailt=
o:rku...@fordham.edu>> wrote:
>> is this the correct usage of -w?
>>=20
>> ./singularity run -w /share/apps/ubuntu.simg=20
>> ERROR  : Could not open image /share/apps/ubuntu.simg: Permission denied
>> ABORT  : Retval =3D 255
>>=20
>>=20
>>=20
>>> On Jun 6, 2017, at 11:18 AM, R=C3=A9my Dernat <rem...@gmail.com <mailto=
:rem...@gmail.com>> wrote:
>>>=20
>>> I think you built your image on a machine with uid "426" which is not p=
resent on the cluster, so, that's normal. You just have to enter in the con=
tainer with '-w' flag in root, and edit permissions on your runscript to fi=
t your user on the cluster side.
>>>=20
>>> BTW, of course, normally, on Rocks, you had to build your image with:
>>> ```
>>> ./configure --prefix=3D/share/apps/singularity-install
>>> ```
>>> Instead of:
>>> ```
>>> ./configure --prefix=3D/export/apps/singularity-install
>>> ```
>>> Specially if some binaries contain the path of some files like singular=
ity.conf
>>> Sorry for this mistake.
>>>=20
>>> Best,
>>> R=C3=A9my
>>>=20
>>>=20
>>>=20
>>> 2017-06-06 16:55 GMT+02:00 Robert Kudyba <rku...@fordham.edu <mailto:rk=
u...@fordham.edu>>:
>>> I was able to delete everything except the var directory:=20
>>> rmdir session/
>>> rmdir: failed to remove `session/': Device or resource busy
>>> pwd
>>> /share/apps/var/singularity/mnt
>>>=20
>>> But deleting the source and recloning did get me further. On the head n=
ode I can run singularity commands. But again on the desired node we=E2=80=
=99d like to run this on we get this:
>>>=20
>>> ./singularity=20
>>> Error loading functions: /export/apps/singularity-install/libexec/singu=
larity/functions
>>>=20
>>> On the Rocks mailing list I as reminded to do this:
>>> "You need to reference singularity (or any app for that matter) as /sha=
re/apps and never /export/apps
>>>=20
>>> /export/apps only exists on the head node. "
>>>=20
>>> So the good news is once I redid everything to use /share/apps I was ab=
le to get the singularity command to work on the compute node.
>>>=20
>>> So once I tried a command like: ./singularity run /share/apps/ubuntu.si=
mg=20
>>> groups: cannot find name for group ID 426
>>>=20
>>> It looks like I=E2=80=99m in a shell:
>>> ls -l /singularity=20
>>> lrwxrwxrwx 1 root root 24 Jun  6 14:46 /singularity -> .singularity.d/r=
unscript
>>>=20
>>> But is that error/warning normal?
>>>=20
>>>=20
>>>> On Jun 6, 2017, at 10:01 AM, R=C3=A9my Dernat <rem...@gmail.com <mailt=
o:rem...@gmail.com>> wrote:
>>>>=20
>>>> Hi,
>>>>=20
>>>> Try to remove every previous install and the install src directory. Th=
en, logout/login and clone singularity again. Finally, build it from a clea=
n environment.
>>>> Let us know if it solves your issue.
>>>>=20
>>>> Otherwise, it could be a bug. Try to create a symbolic link to configu=
ration file where it is searching (/etc/singularity/singularity.conf).
>>>>=20
>>>> Best regards,
>>>> R=C3=A9my
>>>>=20
>>>> 2017-06-06 15:51 GMT+02:00 Robert Kudyba <rku...@fordham.edu <mailto:r=
ku...@fordham.edu>>:
>>>> OK I did that but still getting the bathing error about the conf file.=
 I did find a previous thread mentioning this https://groups.google.com/a/l=
bl.gov/forum/#!topic/singularity/mTPunMFQF4k <https://urldefense.proofpoint=
.com/v2/url?u=3Dhttps-3A__groups.google.com_a_lbl.gov_forum_-23-21topic_sin=
gularity_mTPunMFQF4k&d=3DDwMFaQ&c=3DaqMfXOEvEJQh2iQMCb7Wy8l0sPnURkcqADc2guU=
W8IM&r=3DX0jL9y0sL4r4iU_qVtR3lLNo4tOL1ry_m7-psV3GejY&m=3D6bH1ymxbi1sjYEf1b1=
I5mFgmrV6i74K8qBLXr92Gwts&s=3D8idh7dZXYflc0-GnBBay6ept9BXftZeazG5A09GHiNA&e=
=3D> but there=E2=80=99s no solution on how to point to an alternative loca=
tion, like a -c option. I updated the init file to add /export/apps/singula=
rity-install to the $PATH.
>>>>=20
>>>>=20
>>>> ./singularity --debug create /export/apps/ubuntu.simg
>>>> Enabling debugging
>>>> Ending argument loop
>>>> Singularity version: 2.3-master.gda9cd20
>>>> Exec'ing: /export/apps/singularity-install/libexec/singularity/cli/cre=
ate.exec
>>>> VERBOSE [U=3D0,P=3D17149]      message_init()                         =
   Set messagelevel to: 5
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_config_parse()             =
   Initialize configuration file: /etc/singularity/singularity.conf
>>>> ERROR   [U=3D0,P=3D17149]      singularity_config_parse()             =
   Specified configuration file /etc/singularity/singularity.conf does not =
appear to be a normal file.
>>>> ERROR   [U=3D0,P=3D17149]      singularity_config_parse()             =
   Could not open configuration file /etc/singularity/singularity.conf: No =
such file or directory
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_init()            =
   Initializing Singularity Registry
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'WRITABLE' =3D '1'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(WRITABLE, 1) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'LIBEXECDIR' =3D '/export/apps/singularity-ins=
tall/libexec'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(libexecdir, /export/apps/singularity-=
install/libexec) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'COMMAND' =3D 'create'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(COMMAND, create) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'MESSAGELEVEL' =3D '5'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(MESSAGELEVEL, 5) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'VERSION' =3D '2.3-master.gda9cd20'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(version, 2.3-master.gda9cd20) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'LOCALSTATEDIR' =3D '/export/apps/singularity-=
install/var'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(localstatedir, /export/apps/singulari=
ty-install/var) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'SYSCONFDIR' =3D '/export/apps/singularity-ins=
tall/etc'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(sysconfdir, /export/apps/singularity-=
install/etc) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'BINDIR' =3D '/export/apps/singularity-install=
/bin'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(bindir, /export/apps/singularity-inst=
all/bin) =3D 0
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()             =
   Adding value to registry: 'IMAGE' =3D '/export/apps/ubuntu.simg'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()             =
   Returning singularity_registry_set(IMAGE, /export/apps/ubuntu.simg) =3D =
0
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()             =
   Returning NULL on 'HOME'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()             =
   Returning NULL on 'TARGET_UID'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()             =
   Returning NULL on 'TARGET_GID'
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                =
   Initializing user info
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                =
   Set the calling user's username to: root
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                =
   Marking uinfo structure as ready
>>>> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                =
   Obtaining home directory
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_priv_init()                =
   Set home (via getpwuid()) to: /root
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                =
   Running SUID program workflow
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                =
   Checking program has appropriate permissions
>>>> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                =
   Checking configuration file is properly owned by root
>>>> ABORT   [U=3D0,P=3D17149]      singularity_suid_init()                =
   Running in privileged mode, root must own the Singularity configuration =
file: /etc/singularity/singularity.conf
>>>> ABORT   [U=3D0,P=3D17149]      singularity_suid_init()                =
   Retval =3D 255
>>>>=20
>>>>=20
>>>>> On Jun 6, 2017, at 2:53 AM, R=C3=A9my Dernat <rem...@gmail.com <mailt=
o:rem...@gmail.com>> wrote:
>>>>>=20
>>>>> Hi Robert,
>>>>>=20
>>>>> You just have to install singularity on a NFS export; Replace:
>>>>>=20
>>>>> ```
>>>>>  ./configure --prefix=3D/export/apps/singularity-install --sysconfdir=
=3D/etc
>>>>> ```
>>>>> With:
>>>>> ```
>>>>>  ./configure --prefix=3D/export/apps/singularity-install
>>>>> ```
>>>>>=20
>>>>> Then, it should works as expected.
>>>>>=20
>>>>> Do not forget that some singularity commands, like `bootstrap` in 2.3=
 or many more in previous release need sudo/root privileges.
>>>>>=20
>>>>> Best regards,
>>>>> R=C3=A9my
>>>>>=20
>>>>> 2017-06-05 23:09 GMT+02:00 Robert Kudyba <rku...@fordham.edu <mailto:=
rku...@fordham.edu>>:
>>>>>=20
>>>>>> On Jun 5, 2017, at 4:30 PM, Rick Wagner <richard...@gmail.com <mailt=
o:richard...@gmail.com>> wrote:
>>>>>>=20
>>>>>>=20
>>>>>>> On Jun 5, 2017, at 4:13 PM, Robert Kudyba <rku...@fordham.edu <mail=
to:rku...@fordham.edu>> wrote:
>>>>>>>=20
>>>>>>>=20
>>>>>>>> On Jun 5, 2017, at 4:08 PM, Rick Wagner <richard...@gmail.com <mai=
lto:richard...@gmail.com>> wrote:
>>>>>>>>=20
>>>>>>>> Robert,
>>>>>>>>=20
>>>>>>>> That=E2=80=99s an NFS export for the Rocks head node that may be m=
ounted nosuid
>>>>>>>=20
>>>>>>> Right in /etc/fstab for other applications we already have this:
>>>>>>>=20
>>>>>>> UUID=3Dxxxxx /export                 ext4    defaults        1 2
>>>>>>>=20
>>>>>>> So what else needs to be done?
>>>>>>=20
>>>>>> One option is to build an RPM using the spec file in the Singularity=
 repo and put that in contrib for your Rocks distro along with a package ta=
g in extend compute. That=E2=80=99s my preference because I don=E2=80=99t l=
ike serving applications over NFS, especially ones with setuid.
>>>>>>=20
>>>>>> WARNING: the following will allow any executable with a setuid bit i=
n that NFS file system to be run.
>>>>>>=20
>>>>>> You can try changing defaults to defaults,suid and remounting the fi=
le system on a compute node.
>>>>>=20
>>>>> Is this an =E2=80=9Cor=E2=80=9D suggestion? I don=E2=80=99t have a pr=
oblem with changing the /etc/fstab. I did that and ran:
>>>>>   rocks sync config
>>>>>   rocks sync users
>>>>>=20
>>>>> Also made sure to use the config option as /share/apps (not /export/a=
pps as that=E2=80=99s just for the head node)
>>>>>=20
>>>>> Still getting:
>>>>> /share/apps/bin
>>>>> ./singularity shell /share/apps/ubuntu.simg
>>>>> ERROR  : Session directory does not exist: /export/apps/var/singulari=
ty/mnt/session
>>>>> ABORT  : Retval =3D 255
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>>=20
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>=20
>>>>=20
>>>> --=20
>>>> You received this message because you are subscribed to the Google Gro=
ups "singularity" group.
>>>> To unsubscribe from this group and stop receiving emails from it, send=
 an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>=20
>>>>=20
>>>> --=20
>>>> You received this message because you are subscribed to the Google Gro=
ups "singularity" group.
>>>> To unsubscribe from this group and stop receiving emails from it, send=
 an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>=20
>>>=20
>>> --=20
>>> You received this message because you are subscribed to the Google Grou=
ps "singularity" group.
>>> To unsubscribe from this group and stop receiving emails from it, send =
an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>=20
>>>=20
>>> --=20
>>> You received this message because you are subscribed to the Google Grou=
ps "singularity" group.
>>> To unsubscribe from this group and stop receiving emails from it, send =
an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>=20
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>=20
>>=20
>>=20
>> --=20
>> Vanessa Villamia Sochat
>> Stanford University '16
>> (603) 321-0676 <tel:(603)%20321-0676>
>>=20
>>=20
>> --=20
>> Vanessa Villamia Sochat
>> Stanford University '16
>> (603) 321-0676
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.


--Apple-Mail=_952E5080-2C28-4DAC-B9DE-6E508FF4F674
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html charset=
=3Dutf-8"></head><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: s=
pace; -webkit-line-break: after-white-space;" class=3D""><div class=3D"">On=
 each compute node create a singularity.sh and singularity.csh file in /etc=
/profile.d/. You can put these on the front end and distribute them via 411=
.</div><div class=3D""><br class=3D""></div><div class=3D"">Example for add=
ing some IB utilities to the PATH:</div><div class=3D""><br class=3D""></di=
v><div class=3D"">[ux455215@comet-ln2 profile.d]$ pwd<br class=3D"">/etc/pr=
ofile.d<br class=3D""></div><div class=3D""><br class=3D""></div><div class=
=3D"">[ux455215@comet-ln2 profile.d]$ cat ibutils.sh&nbsp;<br class=3D"">if=
 ! echo ${PATH} | grep -q /opt/ibutils/bin ; then<br class=3D"">&nbsp; &nbs=
p; &nbsp; &nbsp;&nbsp;PATH=3D${PATH}:/opt/ibutils/bin<br class=3D"">fi</div=
><div class=3D""><br class=3D"">[ux455215@comet-ln2 profile.d]$ cat ibutils=
.csh&nbsp;<br class=3D"">if ( "${path}" !~ */opt/ibutils/bin* ) then<br cla=
ss=3D"">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;set path =3D ( $path /opt/ibutils/=
bin )<br class=3D"">endif<br class=3D"">[ux455215@comet-ln2 profile.d]$&nbs=
p;</div><div class=3D""><br class=3D""></div>=E2=80=94Rick<div class=3D""><=
br class=3D""><div><blockquote type=3D"cite" class=3D""><div class=3D"">On =
Jun 6, 2017, at 3:30 PM, Robert Kudyba &lt;<a href=3D"mailto:rku...@fordham=
.edu" class=3D"">rku...@fordham.edu</a>&gt; wrote:</div><br class=3D"Apple-=
interchange-newline"><div class=3D""><meta http-equiv=3D"Content-Type" cont=
ent=3D"text/html charset=3Dutf-8" class=3D""><div style=3D"word-wrap: break=
-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;" cl=
ass=3D""><div class=3D"">It=E2=80=99s all coming together! Since we don=E2=
=80=99t really care about the Ubuntu image I made it chmod 777 to allow wri=
teable to all. Also does anyone know how to export the $PATH to all Rocks c=
ompute nodes to include&nbsp;<span style=3D"font-family: Menlo; font-size: =
10px;" class=3D"">/share/apps/singularity-install/bin/singularity to allow =
singularity to work&nbsp;</span><font face=3D"Menlo" size=3D"1" class=3D"">=
without being in the bin/ directory? I see the init file in etc but that do=
esn=E2=80=99t seem to work before calling singularity.</font></div><br clas=
s=3D""><div class=3D""><blockquote type=3D"cite" class=3D""><div class=3D""=
>On Jun 6, 2017, at 1:38 PM, vanessa s &lt;<a href=3D"mailto:vso...@gmail.c=
om" class=3D"">vso...@gmail.com</a>&gt; wrote:</div><br class=3D"Apple-inte=
rchange-newline"><div class=3D""><div dir=3D"ltr" style=3D"font-family: Hel=
vetica; font-size: 12px; font-style: normal; font-variant-caps: normal; fon=
t-weight: normal; letter-spacing: normal; orphans: auto; text-align: start;=
 text-indent: 0px; text-transform: none; white-space: normal; widows: auto;=
 word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=3D"">And if you =
want to shell inside (and run doesn't open a shell) you should just use she=
ll instead:<div class=3D""><br class=3D""></div><div class=3D""><span style=
=3D"font-size: 12.8px;" class=3D"">sudo singularity shell --writable /share=
/apps/ubuntu.simg</span><br class=3D""></div></div><div class=3D"gmail_extr=
a" style=3D"font-family: Helvetica; font-size: 12px; font-style: normal; fo=
nt-variant-caps: normal; font-weight: normal; letter-spacing: normal; orpha=
ns: auto; text-align: start; text-indent: 0px; text-transform: none; white-=
space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: =
0px;"><br class=3D""><div class=3D"gmail_quote">On Tue, Jun 6, 2017 at 10:3=
7 AM, vanessa s<span class=3D"Apple-converted-space">&nbsp;</span><span dir=
=3D"ltr" class=3D"">&lt;<a href=3D"mailto:vso...@gmail.com" target=3D"_blan=
k" class=3D"">vso...@gmail.com</a>&gt;</span><span class=3D"Apple-converted=
-space">&nbsp;</span>wrote:<br class=3D""><blockquote class=3D"gmail_quote"=
 style=3D"margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-co=
lor: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex;"><div=
 dir=3D"ltr" class=3D"">Almost! To use -w you need to run as root:<div clas=
s=3D""><br class=3D""></div><div class=3D"">sudo singularity run -w /share/=
apps/ubuntu.simg</div></div><div class=3D"gmail_extra"><div class=3D""><div=
 class=3D"h5"><br class=3D""><div class=3D"gmail_quote">On Tue, Jun 6, 2017=
 at 9:04 AM, Robert Kudyba<span class=3D"Apple-converted-space">&nbsp;</spa=
n><span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:rku...@fordham.edu" ta=
rget=3D"_blank" class=3D"">rku...@fordham.edu</a>&gt;</span><span class=3D"=
Apple-converted-space">&nbsp;</span>wrote:<br class=3D""><blockquote class=
=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-width: 1px=
; border-left-color: rgb(204, 204, 204); border-left-style: solid; padding-=
left: 1ex;"><div style=3D"word-wrap: break-word;" class=3D"">is this the co=
rrect usage of -w?<div class=3D""><br class=3D""></div><div class=3D""><div=
 style=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: M=
enlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligature=
s;" class=3D"">./singularity run -w /share/apps/ubuntu.simg&nbsp;</span></d=
iv><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font-fa=
mily: Menlo; color: rgb(255, 59, 29);" class=3D""><span style=3D"font-varia=
nt-ligatures: no-common-ligatures;" class=3D"">ERROR&nbsp; : Could not open=
 image /share/apps/ubuntu.simg: Permission denied</span></div><div style=3D=
"margin: 0px; font-size: 10px; line-height: normal; font-family: Menlo; col=
or: rgb(195, 55, 32);" class=3D""><span style=3D"font-variant-ligatures: no=
-common-ligatures;" class=3D"">ABORT&nbsp; : Retval =3D 255</span></div><di=
v class=3D""><div class=3D"m_7931771655240770118h5"><div class=3D""><span s=
tyle=3D"font-variant-ligatures: no-common-ligatures;" class=3D""><br class=
=3D""></span></div><div class=3D""><span style=3D"font-variant-ligatures: n=
o-common-ligatures;" class=3D""><br class=3D""></span></div><div class=3D""=
><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D""><b=
r class=3D""></span></div><div class=3D""><blockquote type=3D"cite" class=
=3D""><div class=3D"">On Jun 6, 2017, at 11:18 AM, R=C3=A9my Dernat &lt;<a =
href=3D"mailto:rem...@gmail.com" target=3D"_blank" class=3D"">rem...@gmail.=
com</a>&gt; wrote:</div><br class=3D"m_7931771655240770118m_184084785016292=
8191Apple-interchange-newline"><div class=3D""><div dir=3D"ltr" class=3D"">=
I think you built your image on a machine with uid "426" which is not prese=
nt on the cluster, so, that's normal. You just have to enter in the contain=
er with '-w' flag in root, and edit permissions on your runscript to fit yo=
ur user on the cluster side.<div class=3D""><br class=3D""></div><div class=
=3D"">BTW, of course, normally, on Rocks, you had to build your image with:=
</div><div class=3D"">```</div><div class=3D""><span style=3D"font-family: =
Menlo; font-size: 10px; font-variant-ligatures: no-common-ligatures;" class=
=3D"">./configure --prefix=3D/share/apps/singular</span><span style=3D"font=
-family: Menlo; font-size: 10px; font-variant-ligatures: no-common-ligature=
s;" class=3D"">i<wbr class=3D"">ty-install</span><br class=3D""></div><div =
class=3D"">```</div><div class=3D"">Instead of:</div><div class=3D""><div c=
lass=3D"">```</div><div class=3D""><span style=3D"font-family: Menlo; font-=
size: 10px; font-variant-ligatures: no-common-ligatures;" class=3D"">./conf=
igure --prefix=3D/export/apps/singular</span><span style=3D"font-family: Me=
nlo; font-size: 10px; font-variant-ligatures: no-common-ligatures;" class=
=3D""><wbr class=3D"">ity-install</span><br class=3D""></div><div class=3D"=
">```</div></div><div class=3D"">Specially if some binaries contain the pat=
h of some files like singularity.conf</div><div class=3D"">Sorry for this m=
istake.<br class=3D""></div><div class=3D""><br class=3D""></div><div class=
=3D"">Best,</div><div class=3D"">R=C3=A9my</div><div class=3D""><br class=
=3D""></div><div class=3D""><br class=3D""></div></div><div class=3D"gmail_=
extra"><br class=3D""><div class=3D"gmail_quote">2017-06-06 16:55 GMT+02:00=
 Robert Kudyba<span class=3D"Apple-converted-space">&nbsp;</span><span dir=
=3D"ltr" class=3D"">&lt;<a href=3D"mailto:rku...@fordham.edu" target=3D"_bl=
ank" class=3D"">rku...@fordham.edu</a>&gt;</span>:<br class=3D""><blockquot=
e class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-wid=
th: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; p=
adding-left: 1ex;"><div style=3D"word-wrap: break-word;" class=3D""><div cl=
ass=3D"">I was able to delete everything except the var directory:&nbsp;</d=
iv><div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-height:=
 normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatu=
res: no-common-ligatures;" class=3D"">rmdir session/</span></div><div style=
=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: Menlo;"=
 class=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" cl=
ass=3D"">rmdir: failed to remove `session/': Device or resource busy</span>=
</div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font=
-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-commo=
n-ligatures;" class=3D"">pwd</span></div><div style=3D"margin: 0px; font-si=
ze: 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=
=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">/share/apps/va=
r/singularity/mn<wbr class=3D"">t</span></div></div><div class=3D""><span s=
tyle=3D"font-variant-ligatures: no-common-ligatures;" class=3D""><br class=
=3D""></span></div><div class=3D"">But deleting the source and recloning di=
d get me further. On the head node I can run singularity commands. But agai=
n on the desired node we=E2=80=99d like to run this on we get this:</div><d=
iv class=3D""><br class=3D""></div><div class=3D""><div style=3D"margin: 0p=
x; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D""><s=
pan style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">./sin=
gularity&nbsp;</span></div><div style=3D"margin: 0px; font-size: 10px; line=
-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-varian=
t-ligatures: no-common-ligatures;" class=3D"">Error loading functions: /exp=
ort/apps/singularity-insta<wbr class=3D"">ll/libexec/singularity/functio<wb=
r class=3D"">ns</span></div></div><div class=3D""><br class=3D""></div><div=
 class=3D"">On the Rocks mailing list I as reminded to do this:</div><div c=
lass=3D"">"You need to reference singularity (or any app for that matter) a=
s /share/apps and never /export/apps<br class=3D""><br class=3D"">/export/a=
pps only exists on the head node. "</div><div class=3D""><br class=3D""></d=
iv><div class=3D"">So the good news is once I redid everything to use /shar=
e/apps I was able to get the singularity command to work on the compute nod=
e.</div><div class=3D""><br class=3D""></div><div class=3D"">So once I trie=
d a command like:&nbsp;<span style=3D"font-family: Menlo; font-size: 10px;"=
 class=3D"">./singularity run /share/apps/ubuntu.simg</span><span style=3D"=
font-family: Menlo; font-size: 10px;" class=3D"">&nbsp;</span></div><div st=
yle=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: Menl=
o;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;"=
 class=3D"">groups: cannot find name for group ID 426</span></div><div clas=
s=3D""><br class=3D""></div><div class=3D"">It looks like I=E2=80=99m in a =
shell:</div><div class=3D""><div style=3D"margin: 0px; font-size: 10px; lin=
e-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-varia=
nt-ligatures: no-common-ligatures;" class=3D"">ls -l /singularity&nbsp;</sp=
an></div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; f=
ont-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-co=
mmon-ligatures;" class=3D"">lrwxrwxrwx 1 root root 24 Jun&nbsp; 6 14:46 /si=
ngularity -&gt; .singularity.d/runscript</span></div></div><div class=3D"">=
<br class=3D""></div><div class=3D"">But is that error/warning normal?</div=
><div class=3D""><div class=3D"m_7931771655240770118m_1840847850162928191h5=
"><div class=3D""><br class=3D""></div><br class=3D""><div class=3D""><bloc=
kquote type=3D"cite" class=3D""><div class=3D"">On Jun 6, 2017, at 10:01 AM=
, R=C3=A9my Dernat &lt;<a href=3D"mailto:rem...@gmail.com" target=3D"_blank=
" class=3D"">rem...@gmail.com</a>&gt; wrote:</div><br class=3D"m_7931771655=
240770118m_1840847850162928191m_-672932233201048330Apple-interchange-newlin=
e"><div class=3D""><div dir=3D"ltr" class=3D"">Hi,<div class=3D""><br class=
=3D""></div><div class=3D"">Try to remove every previous install and the in=
stall src directory. Then, logout/login and clone singularity again. Finall=
y, build it from a clean environment.</div><div class=3D"">Let us know if i=
t solves your issue.</div><div class=3D""><br class=3D""></div><div class=
=3D"">Otherwise, it could be a bug. Try to create a symbolic link to config=
uration file where it is searching (/etc/singularity/singularity.<wbr class=
=3D"">conf).</div><div class=3D""><br class=3D""></div><div class=3D"">Best=
 regards,</div><div class=3D"">R=C3=A9my</div></div><div class=3D"gmail_ext=
ra"><br class=3D""><div class=3D"gmail_quote">2017-06-06 15:51 GMT+02:00 Ro=
bert Kudyba<span class=3D"Apple-converted-space">&nbsp;</span><span dir=3D"=
ltr" class=3D"">&lt;<a href=3D"mailto:rku...@fordham.edu" target=3D"_blank"=
 class=3D"">rku...@fordham.edu</a>&gt;</span>:<br class=3D""><blockquote cl=
ass=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-width: =
1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; paddi=
ng-left: 1ex;"><div style=3D"word-wrap: break-word;" class=3D""><div class=
=3D"">OK I did that but still getting the bathing error about the conf file=
. I did find a previous thread mentioning this&nbsp;<a href=3D"https://urld=
efense.proofpoint.com/v2/url?u=3Dhttps-3A__groups.google.com_a_lbl.gov_foru=
m_-23-21topic_singularity_mTPunMFQF4k&amp;d=3DDwMFaQ&amp;c=3DaqMfXOEvEJQh2i=
QMCb7Wy8l0sPnURkcqADc2guUW8IM&amp;r=3DX0jL9y0sL4r4iU_qVtR3lLNo4tOL1ry_m7-ps=
V3GejY&amp;m=3D6bH1ymxbi1sjYEf1b1I5mFgmrV6i74K8qBLXr92Gwts&amp;s=3D8idh7dZX=
Yflc0-GnBBay6ept9BXftZeazG5A09GHiNA&amp;e=3D" target=3D"_blank" class=3D"">=
https://groups.google.com<wbr class=3D"">/a/lbl.gov/forum/#!topic/singu<wbr=
 class=3D"">larity/mTPunMFQF4k</a>&nbsp;but there=E2=80=99s no solution on =
how to point to an alternative location, like a -c option. I updated the in=
it file to add /export/apps/singularity-insta<wbr class=3D"">ll to the $PAT=
H.</div><div class=3D""><br class=3D""></div><div class=3D""><br class=3D""=
></div><div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-hei=
ght: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-li=
gatures: no-common-ligatures;" class=3D"">./singularity --debug create /exp=
ort/apps/ubuntu.simg</span></div><div style=3D"margin: 0px; font-size: 10px=
; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-=
variant-ligatures: no-common-ligatures;" class=3D"">Enabling debugging</spa=
n></div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; fo=
nt-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-com=
mon-ligatures;" class=3D"">Ending argument loop</span></div><div style=3D"m=
argin: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" clas=
s=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" class=
=3D"">Singularity version: 2.3-master.gda9cd20</span></div><div style=3D"ma=
rgin: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" class=
=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D=
"">Exec'ing: /export/apps/singularity-insta<wbr class=3D"">ll/libexec/singu=
larity/cli/cre<wbr class=3D"">ate.exec</span></div><div style=3D"margin: 0p=
x; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D""><s=
pan style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">VERBO=
SE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; message_init()&nbsp; &nbsp; &nbsp;=
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; Set messagelevel to: 5</span></div><div style=3D"margin: 0px; font-size:=
 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"=
font-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=
=3D17149]&nbsp; &nbsp; &nbsp; singularity_config_parse()&nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Initialize configuration file: /etc/si=
ngularity/singularity.c<wbr class=3D"">onf</span></div><div style=3D"margin=
: 0px; font-size: 10px; line-height: normal; font-family: Menlo; color: rgb=
(255, 59, 29);" class=3D""><span style=3D"font-variant-ligatures: no-common=
-ligatures;" class=3D"">ERROR &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; =
singularity_config_parse()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; Specified configuration file /etc/singularity/singularity.c<wbr clas=
s=3D"">onf does not appear to be a normal file.</span></div><div style=3D"m=
argin: 0px; font-size: 10px; line-height: normal; font-family: Menlo; color=
: rgb(255, 59, 29);" class=3D""><span style=3D"font-variant-ligatures: no-c=
ommon-ligatures;" class=3D"">ERROR &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &n=
bsp; singularity_config_parse()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; Could not open configuration file /etc/singularity/singularity.=
c<wbr class=3D"">onf: No such file or directory</span></div><div style=3D"m=
argin: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" clas=
s=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" class=
=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_in=
it() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Initializing Singular=
ity Registry</span></div><div style=3D"margin: 0px; font-size: 10px; line-h=
eight: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-=
ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp;=
 &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=
 &nbsp; &nbsp; &nbsp; Adding value to registry: 'WRITABLE' =3D '1'</span></=
div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font-f=
amily: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-=
ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; s=
ingularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; Returning singularity_registry_set(WRITA<wbr class=3D"">BLE, 1) =3D 0=
</span></div><div style=3D"margin: 0px; font-size: 10px; line-height: norma=
l; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: n=
o-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbs=
p; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; &nbsp; Adding value to registry: 'LIBEXECDIR' =3D '/export/apps/singular=
ity-inst<wbr class=3D"">all/libexec'</span></div><div style=3D"margin: 0px;=
 font-size: 10px; line-height: normal; font-family: Menlo;" class=3D""><spa=
n style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">DEBUG &=
nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_re=
gistry_set(libex<wbr class=3D"">ecdir, /export/apps/singularity-insta<wbr c=
lass=3D"">ll/libexec) =3D 0</span></div><div style=3D"margin: 0px; font-siz=
e: 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=
=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0=
,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nb=
sp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'COMMAND' =
=3D 'create'</span></div><div style=3D"margin: 0px; font-size: 10px; line-h=
eight: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-=
ligatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&=
nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(COMMA<wbr cla=
ss=3D"">ND, create) =3D 0</span></div><div style=3D"margin: 0px; font-size:=
 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"=
font-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=
=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'MESSAGELEVE=
L' =3D '5'</span></div><div style=3D"margin: 0px; font-size: 10px; line-hei=
ght: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-li=
gatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nb=
sp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nb=
sp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(MESSA<wbr class=
=3D"">GELEVEL, 5) =3D 0</span></div><div style=3D"margin: 0px; font-size: 1=
0px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"fo=
nt-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D1=
7149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'VERSION' =3D '2=
.3-master.gda9cd20'</span></div><div style=3D"margin: 0px; font-size: 10px;=
 line-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-v=
ariant-ligatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D=
17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(versi<=
wbr class=3D"">on, 2.3-master.gda9cd20) =3D 0</span></div><div style=3D"mar=
gin: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" class=
=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D=
"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()=
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to reg=
istry: 'LOCALSTATEDIR' =3D '/export/apps/singularity-inst<wbr class=3D"">al=
l/var'</span></div><div style=3D"margin: 0px; font-size: 10px; line-height:=
 normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatu=
res: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; =
&nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; Returning singularity_registry_set(local<wbr class=3D"=
">statedir, /export/apps/singularity-insta<wbr class=3D"">ll/var) =3D 0</sp=
an></div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; f=
ont-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-co=
mmon-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; s=
ingularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; Adding value to registry: 'SYSCONFDIR' =3D '/export/apps/singularity-=
inst<wbr class=3D"">all/etc'</span></div><div style=3D"margin: 0px; font-si=
ze: 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=
=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; [=
U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_=
set(sysco<wbr class=3D"">nfdir, /export/apps/singularity-insta<wbr class=3D=
"">ll/etc) =3D 0</span></div><div style=3D"margin: 0px; font-size: 10px; li=
ne-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-vari=
ant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&n=
bsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'BINDIR' =3D '/export/a=
pps/singularity-inst<wbr class=3D"">all/bin'</span></div><div style=3D"marg=
in: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" class=
=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D=
"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_=
set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning sing=
ularity_registry_set(bindi<wbr class=3D"">r, /export/apps/singularity-insta=
<wbr class=3D"">ll/bin) =3D 0</span></div><div style=3D"margin: 0px; font-s=
ize: 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=
=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0=
,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nb=
sp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'IMAGE' =
=3D '/export/apps/ubuntu.simg'</span></div><div style=3D"margin: 0px; font-=
size: 10px; line-height: normal; font-family: Menlo;" class=3D""><span styl=
e=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; =
[U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry=
_set(IMAGE<wbr class=3D"">, /export/apps/ubuntu.simg) =3D 0</span></div><di=
v style=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: =
Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligatur=
es;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singular=
ity_registry_get()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R=
eturning NULL on 'HOME'</span></div><div style=3D"margin: 0px; font-size: 1=
0px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"fo=
nt-variant-ligatures: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,=
P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_get()&nbsp; &nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning NULL on 'TARGET_UID'</span>=
</div><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font=
-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-commo=
n-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp;=
 singularity_registry_get()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=
 &nbsp; Returning NULL on 'TARGET_GID'</span></div><div style=3D"margin: 0p=
x; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D""><s=
pan style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">DEBUG=
 &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_priv_init() &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Initializing user=
 info</span></div><div style=3D"margin: 0px; font-size: 10px; line-height: =
normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatur=
es: no-common-ligatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &=
nbsp; &nbsp; singularity_priv_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nb=
sp; &nbsp; &nbsp; &nbsp; Set the calling user's username to: root</span></d=
iv><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font-fa=
mily: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-l=
igatures;" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; si=
ngularity_priv_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; &nbsp; Marking uinfo structure as ready</span></div><div style=3D"margin=
: 0px; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D"=
"><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">D=
EBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_priv_init() &=
nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Obtaining hom=
e directory</span></div><div style=3D"margin: 0px; font-size: 10px; line-he=
ight: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-l=
igatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; =
&nbsp; &nbsp; singularity_priv_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; &nbsp; &nbsp; Set home (via getpwuid()) to: /root</span></div><=
div style=3D"margin: 0px; font-size: 10px; line-height: normal; font-family=
: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligat=
ures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity=
_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=
 Running SUID program workflow</span></div><div style=3D"margin: 0px; font-=
size: 10px; line-height: normal; font-family: Menlo;" class=3D""><span styl=
e=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D=
0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_suid_init() &nbsp; &nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Checking program has appropria=
te permissions</span></div><div style=3D"margin: 0px; font-size: 10px; line=
-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-varian=
t-ligatures: no-common-ligatures;" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbs=
p; &nbsp; &nbsp; singularity_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=
 &nbsp; &nbsp; &nbsp; &nbsp; Checking configuration file is properly owned =
by root</span></div><div style=3D"margin: 0px; font-size: 10px; line-height=
: normal; font-family: Menlo; color: rgb(195, 55, 32);" class=3D""><span st=
yle=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">ABORT &nbsp=
; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_suid_init() &nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Running in privileged m=
ode, root must own the Singularity configuration file: /etc/singularity/sin=
gularity.c<wbr class=3D"">onf</span></div><div style=3D"margin: 0px; font-s=
ize: 10px; line-height: normal; font-family: Menlo; color: rgb(195, 55, 32)=
;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligatures;" =
class=3D"">ABORT &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_s=
uid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R=
etval =3D 255</span></div></div><div class=3D""><div class=3D"m_79317716552=
40770118m_1840847850162928191m_-672932233201048330h5"><div class=3D""><span=
 style=3D"font-variant-ligatures: no-common-ligatures;" class=3D""><br clas=
s=3D""></span></div><br class=3D""><div class=3D""><blockquote type=3D"cite=
" class=3D""><div class=3D"">On Jun 6, 2017, at 2:53 AM, R=C3=A9my Dernat &=
lt;<a href=3D"mailto:rem...@gmail.com" target=3D"_blank" class=3D"">rem...@=
gmail.com</a>&gt; wrote:</div><br class=3D"m_7931771655240770118m_184084785=
0162928191m_-672932233201048330m_9141356409832340507Apple-interchange-newli=
ne"><div class=3D""><div dir=3D"ltr" class=3D"">Hi Robert,<div class=3D""><=
br class=3D""></div><div class=3D"">You just have to install singularity on=
 a NFS export; Replace:</div><div class=3D""><br class=3D""></div><div clas=
s=3D"">```</div><div class=3D""><span style=3D"font-variant-ligatures: no-c=
ommon-ligatures; font-family: Menlo; font-size: 10px;" class=3D"">&nbsp;</s=
pan><span style=3D"font-variant-ligatures: no-common-ligatures; font-family=
: Menlo; font-size: 10px;" class=3D"">./configure --prefix=3D/export/apps/s=
ingular<wbr class=3D"">ity-install --sysconfdir=3D/etc</span><br class=3D""=
></div><div class=3D"">```</div><div class=3D"">With:</div><div class=3D"">=
```</div><div class=3D""><span style=3D"font-variant-ligatures: no-common-l=
igatures; font-family: Menlo; font-size: 10px;" class=3D"">&nbsp;</span><sp=
an style=3D"font-variant-ligatures: no-common-ligatures; font-family: Menlo=
; font-size: 10px;" class=3D"">./configure --prefix=3D/export/apps/singular=
<wbr class=3D"">ity-install</span><br class=3D""></div><div class=3D"">```<=
/div><div class=3D""><br class=3D""></div><div class=3D"">Then, it should w=
orks as expected.</div><div class=3D""><br class=3D""></div><div class=3D""=
>Do not forget that some singularity commands, like `bootstrap` in 2.3 or m=
any more in previous release need sudo/root privileges.</div><div class=3D"=
"><br class=3D""></div><div class=3D"">Best regards,<br class=3D"">R=C3=A9m=
y</div></div><div class=3D"gmail_extra"><br class=3D""><div class=3D"gmail_=
quote">2017-06-05 23:09 GMT+02:00 Robert Kudyba<span class=3D"Apple-convert=
ed-space">&nbsp;</span><span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:r=
ku...@fordham.edu" target=3D"_blank" class=3D"">rku...@fordham.edu</a>&gt;<=
/span>:<br class=3D""><blockquote class=3D"gmail_quote" style=3D"margin: 0p=
x 0px 0px 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 2=
04); border-left-style: solid; padding-left: 1ex;"><div style=3D"word-wrap:=
 break-word;" class=3D""><span class=3D""><br class=3D""><div class=3D""><b=
lockquote type=3D"cite" class=3D""><div class=3D"">On Jun 5, 2017, at 4:30 =
PM, Rick Wagner &lt;<a href=3D"mailto:richard...@gmail.com" target=3D"_blan=
k" class=3D"">richard...@gmail.com</a>&gt; wrote:</div><br class=3D"m_79317=
71655240770118m_1840847850162928191m_-672932233201048330m_91413564098323405=
07m_-5619588665609687384Apple-interchange-newline"><div class=3D""><div sty=
le=3D"word-wrap: break-word;" class=3D""><br class=3D""><div class=3D""><bl=
ockquote type=3D"cite" class=3D""><div class=3D"">On Jun 5, 2017, at 4:13 P=
M, Robert Kudyba &lt;<a href=3D"mailto:rku...@fordham.edu" target=3D"_blank=
" class=3D"">rku...@fordham.edu</a>&gt; wrote:</div><br class=3D"m_79317716=
55240770118m_1840847850162928191m_-672932233201048330m_9141356409832340507m=
_-5619588665609687384Apple-interchange-newline"><div class=3D""><div style=
=3D"word-wrap: break-word;" class=3D""><br class=3D""><div class=3D""><bloc=
kquote type=3D"cite" class=3D""><div class=3D"">On Jun 5, 2017, at 4:08 PM,=
 Rick Wagner &lt;<a href=3D"mailto:richard...@gmail.com" target=3D"_blank" =
class=3D"">richard...@gmail.com</a>&gt; wrote:</div><br class=3D"m_79317716=
55240770118m_1840847850162928191m_-672932233201048330m_9141356409832340507m=
_-5619588665609687384Apple-interchange-newline"><div class=3D""><div style=
=3D"word-wrap: break-word;" class=3D""><div class=3D"">Robert,</div><div cl=
ass=3D""><br class=3D""></div><div class=3D"">That=E2=80=99s an NFS export =
for the Rocks head node that may be mounted nosuid</div></div></div></block=
quote><br class=3D""></div><div class=3D"">Right in /etc/fstab for other ap=
plications we already have this:</div><div class=3D""><br class=3D""></div>=
<div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-height: no=
rmal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures=
: no-common-ligatures;" class=3D"">UUID=3Dxxxxx /export &nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ext4&nbsp; &nbsp; defaults&nbsp; &nbsp=
; &nbsp; &nbsp; 1 2</span></div><div class=3D""><span style=3D"font-variant=
-ligatures: no-common-ligatures;" class=3D""><br class=3D""></span></div></=
div>So what else needs to be done?</div></div></blockquote><div class=3D"">=
<br class=3D""></div><div class=3D"">One option is to build an RPM using th=
e spec file in the Singularity repo and put that in contrib for your Rocks =
distro along with a package tag in extend compute. That=E2=80=99s my prefer=
ence because I don=E2=80=99t like serving applications over NFS, especially=
 ones with setuid.</div><div class=3D""><br class=3D""></div><div class=3D"=
">WARNING: the following will allow any executable with a setuid bit in tha=
t NFS file system to be run.</div><div class=3D""><br class=3D""></div><div=
 class=3D"">You can try changing defaults to defaults,suid and remounting t=
he file system on a compute node.</div></div></div></div></blockquote><br c=
lass=3D""></div></span><div class=3D"">Is this an =E2=80=9Cor=E2=80=9D sugg=
estion? I don=E2=80=99t have a problem with changing the /etc/fstab. I did =
that and ran:</div><div class=3D""><div style=3D"margin: 0px; font-size: 10=
px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"fon=
t-variant-ligatures: no-common-ligatures;" class=3D"">&nbsp;&nbsp;rocks syn=
c config</span></div><div style=3D"margin: 0px; font-size: 10px; line-heigh=
t: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-liga=
tures: no-common-ligatures;" class=3D"">&nbsp;<span class=3D"Apple-converte=
d-space">&nbsp;</span>rocks sync users</span></div><div style=3D"margin: 0p=
x; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D""><b=
r class=3D""></div></div>Also made sure to use the config option as /share/=
apps (not /export/apps as that=E2=80=99s just for the head node)<div class=
=3D""><br class=3D""></div><div class=3D"">Still getting:</div><div class=
=3D""><div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-heig=
ht: normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-lig=
atures: no-common-ligatures;" class=3D"">/share/apps/bin</span></div></div>=
<div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-height: no=
rmal; font-family: Menlo;" class=3D""><div style=3D"margin: 0px; line-heigh=
t: normal;" class=3D""><span style=3D"font-variant-ligatures: no-common-lig=
atures;" class=3D"">./singularity shell /share/apps/ubuntu.simg</span></div=
><span class=3D""><div style=3D"margin: 0px; line-height: normal; color: rg=
b(255, 59, 29);" class=3D""><span style=3D"font-variant-ligatures: no-commo=
n-ligatures;" class=3D"">ERROR&nbsp; : Session directory does not exist: /e=
xport/apps/var/singularity/m<wbr class=3D"">nt/session</span></div><div sty=
le=3D"margin: 0px; line-height: normal; color: rgb(195, 55, 32);" class=3D"=
"><span style=3D"font-variant-ligatures: no-common-ligatures;" class=3D"">A=
BORT&nbsp; : Retval =3D 255</span></div></span></div></div></div></div><div=
 class=3D""><br class=3D"m_7931771655240770118m_1840847850162928191m_-67293=
2233201048330m_9141356409832340507webkit-block-placeholder"></div>--<span c=
lass=3D"Apple-converted-space">&nbsp;</span><br class=3D""><div class=3D"m_=
7931771655240770118m_1840847850162928191m_-672932233201048330m_914135640983=
2340507HOEnZb"><div class=3D"m_7931771655240770118m_1840847850162928191m_-6=
72932233201048330m_9141356409832340507h5">You received this message because=
 you are subscribed to the Google Groups "singularity" group.<br class=3D""=
>To unsubscribe from this group and stop receiving emails from it, send an =
email to<span class=3D"Apple-converted-space">&nbsp;</span><a href=3D"mailt=
o:singu...@lbl.gov" target=3D"_blank" class=3D"">singularity+unsubscribe@lb=
l.go<wbr class=3D"">v</a>.<br class=3D""></div></div></blockquote></div><br=
 class=3D""></div><div class=3D""><br class=3D"m_7931771655240770118m_18408=
47850162928191m_-672932233201048330m_9141356409832340507webkit-block-placeh=
older"></div>--<span class=3D"Apple-converted-space">&nbsp;</span><br class=
=3D"">You received this message because you are subscribed to the Google Gr=
oups "singularity" group.<br class=3D"">To unsubscribe from this group and =
stop receiving emails from it, send an email to<span class=3D"Apple-convert=
ed-space">&nbsp;</span><a href=3D"mailto:singu...@lbl.gov" target=3D"_blank=
" class=3D"">singularity+unsubscribe@lbl.go<wbr class=3D"">v</a>.<br class=
=3D""></div></blockquote></div><br class=3D""></div></div></div><div class=
=3D"m_7931771655240770118m_1840847850162928191m_-672932233201048330HOEnZb">=
<div class=3D"m_7931771655240770118m_1840847850162928191m_-6729322332010483=
30h5"><div class=3D""><br class=3D"m_7931771655240770118m_18408478501629281=
91m_-672932233201048330webkit-block-placeholder"></div>--<span class=3D"App=
le-converted-space">&nbsp;</span><br class=3D"">You received this message b=
ecause you are subscribed to the Google Groups "singularity" group.<br clas=
s=3D"">To unsubscribe from this group and stop receiving emails from it, se=
nd an email to<span class=3D"Apple-converted-space">&nbsp;</span><a href=3D=
"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">singularity+unsubscr=
ibe@lbl.go<wbr class=3D"">v</a>.<br class=3D""></div></div></blockquote></d=
iv><br class=3D""></div><div class=3D""><br class=3D"m_7931771655240770118m=
_1840847850162928191m_-672932233201048330webkit-block-placeholder"></div>--=
<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D"">You recei=
ved this message because you are subscribed to the Google Groups "singulari=
ty" group.<br class=3D"">To unsubscribe from this group and stop receiving =
emails from it, send an email to<span class=3D"Apple-converted-space">&nbsp=
;</span><a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.go<wbr class=3D"">v</a>.<br class=3D""></div></bl=
ockquote></div><br class=3D""></div></div></div><div class=3D"m_79317716552=
40770118m_1840847850162928191HOEnZb"><div class=3D"m_7931771655240770118m_1=
840847850162928191h5"><div class=3D""><br class=3D"m_7931771655240770118m_1=
840847850162928191webkit-block-placeholder"></div>--<span class=3D"Apple-co=
nverted-space">&nbsp;</span><br class=3D"">You received this message becaus=
e you are subscribed to the Google Groups "singularity" group.<br class=3D"=
">To unsubscribe from this group and stop receiving emails from it, send an=
 email to<span class=3D"Apple-converted-space">&nbsp;</span><a href=3D"mail=
to:singu...@lbl.gov" target=3D"_blank" class=3D"">singularity+unsubscribe@l=
bl.go<wbr class=3D"">v</a>.<br class=3D""></div></div></blockquote></div><b=
r class=3D""></div><div class=3D""><br class=3D"m_7931771655240770118m_1840=
847850162928191webkit-block-placeholder"></div>--<span class=3D"Apple-conve=
rted-space">&nbsp;</span><br class=3D"">You received this message because y=
ou are subscribed to the Google Groups "singularity" group.<br class=3D"">T=
o unsubscribe from this group and stop receiving emails from it, send an em=
ail to<span class=3D"Apple-converted-space">&nbsp;</span><a href=3D"mailto:=
singu...@lbl.gov" target=3D"_blank" class=3D"">singularity+unsubscribe@lbl.=
go<wbr class=3D"">v</a>.<br class=3D""></div></blockquote></div><br class=
=3D""></div></div></div></div><div class=3D"m_7931771655240770118HOEnZb"><d=
iv class=3D"m_7931771655240770118h5"><div class=3D""><br class=3D"webkit-bl=
ock-placeholder"></div>--<span class=3D"Apple-converted-space">&nbsp;</span=
><br class=3D"">You received this message because you are subscribed to the=
 Google Groups "singularity" group.<br class=3D"">To unsubscribe from this =
group and stop receiving emails from it, send an email to<span class=3D"App=
le-converted-space">&nbsp;</span><a href=3D"mailto:singu...@lbl.gov" target=
=3D"_blank" class=3D"">singularity+unsubscribe@lbl.go<wbr class=3D"">v</a>.=
<br class=3D""></div></div></blockquote></div><br class=3D""><br clear=3D"a=
ll" class=3D""><div class=3D""><br class=3D""></div></div></div><span class=
=3D"">--<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D""><=
div class=3D"m_7931771655240770118gmail_signature" data-smartmail=3D"gmail_=
signature">Vanessa Villamia Sochat<br class=3D"">Stanford University '16<br=
 class=3D""><div class=3D""><div class=3D""><div class=3D""><a href=3D"tel:=
(603)%20321-0676" value=3D"+16033210676" target=3D"_blank" class=3D"">(603)=
 321-0676</a></div></div></div></div></span></div></blockquote></div><br cl=
ass=3D""><br clear=3D"all" class=3D""><div class=3D""><br class=3D""></div>=
--<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D""><div cl=
ass=3D"gmail_signature" data-smartmail=3D"gmail_signature">Vanessa Villamia=
 Sochat<br class=3D"">Stanford University '16<br class=3D""><div class=3D""=
><div class=3D""><div class=3D"">(603) 321-0676</div></div></div></div></di=
v><div style=3D"font-family: Helvetica; font-size: 12px; font-style: normal=
; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; o=
rphans: auto; text-align: start; text-indent: 0px; text-transform: none; wh=
ite-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-wid=
th: 0px;" class=3D""><br class=3D"webkit-block-placeholder"></div><span sty=
le=3D"font-family: Helvetica; font-size: 12px; font-style: normal; font-var=
iant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: au=
to; text-align: start; text-indent: 0px; text-transform: none; white-space:=
 normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; f=
loat: none; display: inline !important;" class=3D"">--<span class=3D"Apple-=
converted-space">&nbsp;</span></span><br style=3D"font-family: Helvetica; f=
ont-size: 12px; font-style: normal; font-variant-caps: normal; font-weight:=
 normal; letter-spacing: normal; orphans: auto; text-align: start; text-ind=
ent: 0px; text-transform: none; white-space: normal; widows: auto; word-spa=
cing: 0px; -webkit-text-stroke-width: 0px;" class=3D""><span style=3D"font-=
family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: =
normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-al=
ign: start; text-indent: 0px; text-transform: none; white-space: normal; wi=
dows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none;=
 display: inline !important;" class=3D"">You received this message because =
you are subscribed to the Google Groups "singularity" group.</span><br styl=
e=3D"font-family: Helvetica; font-size: 12px; font-style: normal; font-vari=
ant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: aut=
o; text-align: start; text-indent: 0px; text-transform: none; white-space: =
normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" c=
lass=3D""><span style=3D"font-family: Helvetica; font-size: 12px; font-styl=
e: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: =
normal; orphans: auto; text-align: start; text-indent: 0px; text-transform:=
 none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-s=
troke-width: 0px; float: none; display: inline !important;" class=3D"">To u=
nsubscribe from this group and stop receiving emails from it, send an email=
 to<span class=3D"Apple-converted-space">&nbsp;</span></span><a href=3D"mai=
lto:singu...@lbl.gov" style=3D"font-family: Helvetica; font-size: 12px; fon=
t-style: normal; font-variant-caps: normal; font-weight: normal; letter-spa=
cing: normal; orphans: auto; text-align: start; text-indent: 0px; text-tran=
sform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-=
text-stroke-width: 0px;" class=3D"">singu...@lbl.gov</a><span style=3D"font=
-family: Helvetica; font-size: 12px; font-style: normal; font-variant-caps:=
 normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-a=
lign: start; text-indent: 0px; text-transform: none; white-space: normal; w=
idows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none=
; display: inline !important;" class=3D"">.</span></div></blockquote></div>=
<br class=3D""></div><div class=3D""><br class=3D"webkit-block-placeholder"=
></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" class=3D"">singu...@lbl.gov</a>=
.<br class=3D"">
</div></blockquote></div><br class=3D""></div></body></html>
--Apple-Mail=_952E5080-2C28-4DAC-B9DE-6E508FF4F674--
