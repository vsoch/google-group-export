X-Received: by 10.107.173.87 with SMTP id w84mr12244207ioe.84.1496760948554;
        Tue, 06 Jun 2017 07:55:48 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.36.0.208 with SMTP id 199ls413698ita.6.gmail; Tue, 06 Jun 2017
 07:55:47 -0700 (PDT)
X-Received: by 10.98.92.67 with SMTP id q64mr26383285pfb.117.1496760947128;
        Tue, 06 Jun 2017 07:55:47 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1496760947; cv=none;
        d=google.com; s=arc-20160816;
        b=SmMZUezzGPqRuYwmnPrRuiUS8OK54ZeC2Wytr7suIYvc2Aq00MledIuMFL0BqVVMwf
         bhN/0EEjEMWAPLxof6rGMThqbI4BomVRvTRebJjg03tRHM5pSFv0tkDjmxnPrJkMTPlx
         XbNOLwdLrD/R6+D/okw8s5U9u3PzpmlUfmux5e52gCTSuWBsCygymQi2C1Lm+ERryLmd
         x2TI4P8ELVyRsepC3tffXh9SK2PI+UhlG9+ivZY6pt2CVhZ0KE2Q01hDqJTZQZgEIFTj
         k8sJ8cYkLSE8CNyaLg4wumHwdJboA+qQoBcKLQ+dxzCLqWD7wyiRsH5Wi9491xQyNIfR
         xH8g==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=in-reply-to:to:references:date:subject:mime-version:message-id:from
         :dkim-signature:arc-authentication-results;
        bh=cJaqf6/CQscD3AomSTFyMdo58qUoOeHPhtNmx+tDW9k=;
        b=UHXtj4rLY6TZSXyc/Ajm26fXNrobWRgG/sOgTFyvIHgbX/c2GZwofctCrHeLHBCX+C
         +6VjyL0nzAYkrfm78YiB59jIwjNh0QnTBZna6GvEVRtoIA+ZdY2fONiWjVsPxAVqavc6
         HCeQ8JLG9+k0J4WHrdi53lzZttu9mVTo/8P0+i17YGNbBLZm/5XrQirdUOUcDMxeUVCI
         8vSed4O5wXFJnEWitJhKwiABl6uWi8GS9n+z6EMdCQ0DL7liyoGpfd1jzubuXuV45Sw+
         7ZMRqEK6McFLKu0FZ164MgWzCn0tnoJSsbGGldu9L8bckBdcPJKh+zVeuBOfKoKne9FW
         /HBQ==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass head...@fordham-edu.20150623.gappssmtp.com;
       spf=pass (google.com: domain of rku...@fordham.edu designates 209.85.216.196 as permitted sender) smtp.mailfrom=rku...@fordham.edu
Return-Path: <rku...@fordham.edu>
Received: from fe4.lbl.gov (fe4.lbl.gov. [128.3.41.71])
        by mx.google.com with ESMTP id u133si19532599pgc.87.2017.06.06.07.55.46
        for <singu...@lbl.gov>;
        Tue, 06 Jun 2017 07:55:46 -0700 (PDT)
Received-SPF: pass (google.com: domain of rku...@fordham.edu designates 209.85.216.196 as permitted sender) client-ip=209.85.216.196;
Authentication-Results: mx.google.com;
       dkim=pass head...@fordham-edu.20150623.gappssmtp.com;
       spf=pass (google.com: domain of rku...@fordham.edu designates 209.85.216.196 as permitted sender) smtp.mailfrom=rku...@fordham.edu
X-Ironport-SBRS: 2.7
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A2GaAAB0wTZZf8TYVdFeGgEBAQECAQEBA?=
 =?us-ascii?q?QgBAQEBFgEBAQMBAQEJAQEBgkQ8AoENgQ2DawicHYgqjVWBMQEbQAMBIAEJgXC?=
 =?us-ascii?q?ECQKCY0EWAQEBAQEBAQEBAQECEAEBCQsLCCYxgjMFAgMCHgQERiEGAgMBAQEBA?=
 =?us-ascii?q?QEBAQEBASABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEJAgwDICE?=
 =?us-ascii?q?BARgBAQEBAgEjBBkBAQwgDAQLCxgWAQkBBgMCAiEQAwEFAQsRDgcEARkBAgSIN?=
 =?us-ascii?q?4E6Aw0HAQULoDk/ix1qgWw6gwkBAQWELg1EAQeDbAEBAQEGAQEBAQEBAQEYAwU?=
 =?us-ascii?q?JAQiGT4FgK4FpgQyCWE5GTxIBSRsBgkkwgjGJSIZtgV2LbDuHJoZXXI9aEIZwi?=
 =?us-ascii?q?z6EW4MAM4EVJg5jDTMLMCEIHRNGEgGCYYFZKg8cggBaAQEBBYcHDRcwgWkBAQE?=
X-IronPort-AV: E=Sophos;i="5.39,306,1493708400"; 
   d="scan'208,217";a="77073871"
Received: from mail-qt0-f196.google.com ([209.85.216.196])
  by fe4.lbl.gov with ESMTP; 06 Jun 2017 07:55:44 -0700
Received: by mail-qt0-f196.google.com with SMTP id x58so16520918qtc.2
        for <singu...@lbl.gov>; Tue, 06 Jun 2017 07:55:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=fordham-edu.20150623.gappssmtp.com; s=20150623;
        h=from:message-id:mime-version:subject:date:references:to:in-reply-to;
        bh=cJaqf6/CQscD3AomSTFyMdo58qUoOeHPhtNmx+tDW9k=;
        b=Q3E8VDnPq9xzLODYzl/OQVWjIPbUxVzt+uqIM42CDN4LOFayzK22S/L3/cOSw0WvSF
         Q2SLAoCtQ58FayNNTsC+kN1n31NQL9eXGZFp1K+5RdrvcB+XASI5sg35BCrInADa6Yry
         De8pJj9dW6LU3IFYByecVMkawWU0K7CED97+0feEPlYED6iekse3YYT2AuGphaEyESAk
         9eoBI85Rg1FB1s1rYqitnkC4OHR0BYP8ozh3OMygNQ8LhkQmbj3zpE+2YVwSVqEVZMQz
         3Trxlu4yIkpsWzFJAWf1uQ6sWCA/ItZy9uv+i91nqKpLYrYBRgRCOlygM/VJcA8ZIRqR
         XOwA==
X-Gm-Message-State: AODbwcBINxhdUth/KQcJxeTBFiQBPV3jrOYiu8kqCcEwEZa/GeKquxA0
	/8GdL6MRvpMybIIZhFPicg==
X-Received: by 10.200.54.152 with SMTP id a24mr7113296qtc.66.1496760944037;
        Tue, 06 Jun 2017 07:55:44 -0700 (PDT)
Return-Path: <rku...@fordham.edu>
Received: from [10.10.1.22] (dax.cis.fordham.edu. [150.108.68.33])
        by smtp.gmail.com with ESMTPSA id q34sm23831195qte.44.2017.06.06.07.55.43
        for <singu...@lbl.gov>
        (version=TLS1 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
        Tue, 06 Jun 2017 07:55:43 -0700 (PDT)
From: Robert Kudyba <rku...@fordham.edu>
Content-Type: multipart/alternative; boundary="Apple-Mail=_53666068-3270-4AEB-BEF7-6E5F1B1322E1"
Message-Id: <BDFE338B-2C36-4DE2-B94E-6AAB75FF2615@fordham.edu>
Mime-Version: 1.0 (Mac OS X Mail 9.3 \(3124\))
Subject: Re: [Singularity] using Singularity to add Ubuntu to a NPACI Rocks Cluster node
Date: Tue, 6 Jun 2017 10:55:42 -0400
References: <eb2e5586-6bbb-4764-a155-83aea545ded0@lbl.gov> <CAM=pu+JNZw5WSspqPJhxfvVVa+W4CrUatPOFyJd02uNXK7QGsw@mail.gmail.com> <705AFBC5-ABBF-45AB-9A0A-F094AC0A7E07@fordham.edu> <CAM=pu+KwqfXQwbxYwZbAifx-rQjFgCoh-4KNwMPLaw8BD1xidg@mail.gmail.com> <C734A832-7C37-424C-BDA8-F3003A088C9A@fordham.edu> <6F6BCBDE-B10D-40F5-8D23-AB3470CA7DAA@gmail.com> <672F6430-4C6C-4A66-919B-A9C4E7FE4ECB@fordham.edu> <F0A18C08-400E-4362-AD1B-B9DA736F72AB@gmail.com> <59F05D2F-47A7-49BC-9F37-D16F845C159D@fordham.edu> <CAA6Bz=f=191vj-Mx29bsDtmt+vwHFp9E7wE9xse34ak762JxDQ@mail.gmail.com> <9CF6424D-BCDB-40E8-830C-81CE2F1C5538@fordham.edu> <CAA6Bz=eFXAstGLM8pm+p_PiaMvo8LNb=TGNJn82K+mLuM2BAFg@mail.gmail.com>
To: singularity@lbl.gov
In-Reply-To: <CAA6Bz=eFXAstGLM8pm+p_PiaMvo8LNb=TGNJn82K+mLuM2BAFg@mail.gmail.com>
X-Mailer: Apple Mail (2.3124)

--Apple-Mail=_53666068-3270-4AEB-BEF7-6E5F1B1322E1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

I was able to delete everything except the var directory:=20
rmdir session/
rmdir: failed to remove `session/': Device or resource busy
pwd
/share/apps/var/singularity/mnt

But deleting the source and recloning did get me further. On the head node =
I can run singularity commands. But again on the desired node we=E2=80=99d =
like to run this on we get this:

./singularity=20
Error loading functions: /export/apps/singularity-install/libexec/singulari=
ty/functions

On the Rocks mailing list I as reminded to do this:
"You need to reference singularity (or any app for that matter) as /share/a=
pps and never /export/apps

/export/apps only exists on the head node. "

So the good news is once I redid everything to use /share/apps I was able t=
o get the singularity command to work on the compute node.

So once I tried a command like: ./singularity run /share/apps/ubuntu.simg=
=20
groups: cannot find name for group ID 426

It looks like I=E2=80=99m in a shell:
ls -l /singularity=20
lrwxrwxrwx 1 root root 24 Jun  6 14:46 /singularity -> .singularity.d/runsc=
ript

But is that error/warning normal?


> On Jun 6, 2017, at 10:01 AM, R=C3=A9my Dernat <rem...@gmail.com> wrote:
>=20
> Hi,
>=20
> Try to remove every previous install and the install src directory. Then,=
 logout/login and clone singularity again. Finally, build it from a clean e=
nvironment.
> Let us know if it solves your issue.
>=20
> Otherwise, it could be a bug. Try to create a symbolic link to configurat=
ion file where it is searching (/etc/singularity/singularity.conf).
>=20
> Best regards,
> R=C3=A9my
>=20
> 2017-06-06 15:51 GMT+02:00 Robert Kudyba <rku...@fordham.edu <mailto:rku.=
..@fordham.edu>>:
> OK I did that but still getting the bathing error about the conf file. I =
did find a previous thread mentioning this https://groups.google.com/a/lbl.=
gov/forum/#!topic/singularity/mTPunMFQF4k <https://urldefense.proofpoint.co=
m/v2/url?u=3Dhttps-3A__groups.google.com_a_lbl.gov_forum_-23-21topic_singul=
arity_mTPunMFQF4k&d=3DDwMFaQ&c=3DaqMfXOEvEJQh2iQMCb7Wy8l0sPnURkcqADc2guUW8I=
M&r=3DX0jL9y0sL4r4iU_qVtR3lLNo4tOL1ry_m7-psV3GejY&m=3D6bH1ymxbi1sjYEf1b1I5m=
FgmrV6i74K8qBLXr92Gwts&s=3D8idh7dZXYflc0-GnBBay6ept9BXftZeazG5A09GHiNA&e=3D=
> but there=E2=80=99s no solution on how to point to an alternative locatio=
n, like a -c option. I updated the init file to add /export/apps/singularit=
y-install to the $PATH.
>=20
>=20
> ./singularity --debug create /export/apps/ubuntu.simg
> Enabling debugging
> Ending argument loop
> Singularity version: 2.3-master.gda9cd20
> Exec'ing: /export/apps/singularity-install/libexec/singularity/cli/create=
.exec
> VERBOSE [U=3D0,P=3D17149]      message_init()                            =
Set messagelevel to: 5
> VERBOSE [U=3D0,P=3D17149]      singularity_config_parse()                =
Initialize configuration file: /etc/singularity/singularity.conf
> ERROR   [U=3D0,P=3D17149]      singularity_config_parse()                =
Specified configuration file /etc/singularity/singularity.conf does not app=
ear to be a normal file.
> ERROR   [U=3D0,P=3D17149]      singularity_config_parse()                =
Could not open configuration file /etc/singularity/singularity.conf: No suc=
h file or directory
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_init()               =
Initializing Singularity Registry
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'WRITABLE' =3D '1'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(WRITABLE, 1) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'LIBEXECDIR' =3D '/export/apps/singularity-instal=
l/libexec'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(libexecdir, /export/apps/singularity-ins=
tall/libexec) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'COMMAND' =3D 'create'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(COMMAND, create) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'MESSAGELEVEL' =3D '5'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(MESSAGELEVEL, 5) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'VERSION' =3D '2.3-master.gda9cd20'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(version, 2.3-master.gda9cd20) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'LOCALSTATEDIR' =3D '/export/apps/singularity-ins=
tall/var'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(localstatedir, /export/apps/singularity-=
install/var) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'SYSCONFDIR' =3D '/export/apps/singularity-instal=
l/etc'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(sysconfdir, /export/apps/singularity-ins=
tall/etc) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'BINDIR' =3D '/export/apps/singularity-install/bi=
n'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(bindir, /export/apps/singularity-install=
/bin) =3D 0
> VERBOSE [U=3D0,P=3D17149]      singularity_registry_set()                =
Adding value to registry: 'IMAGE' =3D '/export/apps/ubuntu.simg'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_set()                =
Returning singularity_registry_set(IMAGE, /export/apps/ubuntu.simg) =3D 0
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()                =
Returning NULL on 'HOME'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()                =
Returning NULL on 'TARGET_UID'
> DEBUG   [U=3D0,P=3D17149]      singularity_registry_get()                =
Returning NULL on 'TARGET_GID'
> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                   =
Initializing user info
> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                   =
Set the calling user's username to: root
> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                   =
Marking uinfo structure as ready
> DEBUG   [U=3D0,P=3D17149]      singularity_priv_init()                   =
Obtaining home directory
> VERBOSE [U=3D0,P=3D17149]      singularity_priv_init()                   =
Set home (via getpwuid()) to: /root
> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                   =
Running SUID program workflow
> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                   =
Checking program has appropriate permissions
> VERBOSE [U=3D0,P=3D17149]      singularity_suid_init()                   =
Checking configuration file is properly owned by root
> ABORT   [U=3D0,P=3D17149]      singularity_suid_init()                   =
Running in privileged mode, root must own the Singularity configuration fil=
e: /etc/singularity/singularity.conf
> ABORT   [U=3D0,P=3D17149]      singularity_suid_init()                   =
Retval =3D 255
>=20
>=20
>> On Jun 6, 2017, at 2:53 AM, R=C3=A9my Dernat <rem...@gmail.com <mailto:r=
em...@gmail.com>> wrote:
>>=20
>> Hi Robert,
>>=20
>> You just have to install singularity on a NFS export; Replace:
>>=20
>> ```
>>  ./configure --prefix=3D/export/apps/singularity-install --sysconfdir=3D=
/etc
>> ```
>> With:
>> ```
>>  ./configure --prefix=3D/export/apps/singularity-install
>> ```
>>=20
>> Then, it should works as expected.
>>=20
>> Do not forget that some singularity commands, like `bootstrap` in 2.3 or=
 many more in previous release need sudo/root privileges.
>>=20
>> Best regards,
>> R=C3=A9my
>>=20
>> 2017-06-05 23:09 GMT+02:00 Robert Kudyba <rku...@fordham.edu <mailto:rku=
...@fordham.edu>>:
>>=20
>>> On Jun 5, 2017, at 4:30 PM, Rick Wagner <richard...@gmail.com <mailto:r=
ichard...@gmail.com>> wrote:
>>>=20
>>>=20
>>>> On Jun 5, 2017, at 4:13 PM, Robert Kudyba <rku...@fordham.edu <mailto:=
rku...@fordham.edu>> wrote:
>>>>=20
>>>>=20
>>>>> On Jun 5, 2017, at 4:08 PM, Rick Wagner <richard...@gmail.com <mailto=
:richard...@gmail.com>> wrote:
>>>>>=20
>>>>> Robert,
>>>>>=20
>>>>> That=E2=80=99s an NFS export for the Rocks head node that may be moun=
ted nosuid
>>>>=20
>>>> Right in /etc/fstab for other applications we already have this:
>>>>=20
>>>> UUID=3Dxxxxx /export                 ext4    defaults        1 2
>>>>=20
>>>> So what else needs to be done?
>>>=20
>>> One option is to build an RPM using the spec file in the Singularity re=
po and put that in contrib for your Rocks distro along with a package tag i=
n extend compute. That=E2=80=99s my preference because I don=E2=80=99t like=
 serving applications over NFS, especially ones with setuid.
>>>=20
>>> WARNING: the following will allow any executable with a setuid bit in t=
hat NFS file system to be run.
>>>=20
>>> You can try changing defaults to defaults,suid and remounting the file =
system on a compute node.
>>=20
>> Is this an =E2=80=9Cor=E2=80=9D suggestion? I don=E2=80=99t have a probl=
em with changing the /etc/fstab. I did that and ran:
>>   rocks sync config
>>   rocks sync users
>>=20
>> Also made sure to use the config option as /share/apps (not /export/apps=
 as that=E2=80=99s just for the head node)
>>=20
>> Still getting:
>> /share/apps/bin
>> ./singularity shell /share/apps/ubuntu.simg
>> ERROR  : Session directory does not exist: /export/apps/var/singularity/=
mnt/session
>> ABORT  : Retval =3D 255
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>=20
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.


--Apple-Mail=_53666068-3270-4AEB-BEF7-6E5F1B1322E1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html charset=
=3Dutf-8"></head><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: s=
pace; -webkit-line-break: after-white-space;" class=3D""><div class=3D"">I =
was able to delete everything except the var directory:&nbsp;</div><div cla=
ss=3D""><div style=3D"margin: 0px; font-size: 10px; line-height: normal; fo=
nt-family: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-com=
mon-ligatures" class=3D"">rmdir session/</span></div><div style=3D"margin: =
0px; font-size: 10px; line-height: normal; font-family: Menlo;" class=3D"">=
<span style=3D"font-variant-ligatures: no-common-ligatures" class=3D"">rmdi=
r: failed to remove `session/': Device or resource busy</span></div><div st=
yle=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: Menl=
o;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligatures" =
class=3D"">pwd</span></div><div style=3D"margin: 0px; font-size: 10px; line=
-height: normal; font-family: Menlo;" class=3D""><span style=3D"font-varian=
t-ligatures: no-common-ligatures" class=3D"">/share/apps/var/singularity/mn=
t</span></div></div><div class=3D""><span style=3D"font-variant-ligatures: =
no-common-ligatures" class=3D""><br class=3D""></span></div><div class=3D""=
>But deleting the source and recloning did get me further. On the head node=
 I can run singularity commands. But again on the desired node we=E2=80=99d=
 like to run this on we get this:</div><div class=3D""><br class=3D""></div=
><div class=3D""><div style=3D"margin: 0px; font-size: 10px; line-height: n=
ormal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligature=
s: no-common-ligatures" class=3D"">./singularity&nbsp;</span></div><div sty=
le=3D"margin: 0px; font-size: 10px; line-height: normal; font-family: Menlo=
;" class=3D""><span style=3D"font-variant-ligatures: no-common-ligatures" c=
lass=3D"">Error loading functions: /export/apps/singularity-install/libexec=
/singularity/functions</span></div></div><div class=3D""><br class=3D""></d=
iv><div class=3D"">On the Rocks mailing list I as reminded to do this:</div=
><div class=3D"">"You need to reference singularity (or any app for that ma=
tter) as /share/apps and never /export/apps<br class=3D""><br class=3D"">/e=
xport/apps only exists on the head node. "</div><div class=3D""><br class=
=3D""></div><div class=3D"">So the good news is once I redid everything to =
use /share/apps I was able to get the singularity command to work on the co=
mpute node.</div><div class=3D""><br class=3D""></div><div class=3D"">So on=
ce I tried a command like:&nbsp;<span style=3D"font-family: Menlo; font-siz=
e: 10px;" class=3D"">./singularity run /share/apps/ubuntu.simg</span><span =
style=3D"font-family: Menlo; font-size: 10px;" class=3D"">&nbsp;</span></di=
v><div style=3D"margin: 0px; font-size: 10px; line-height: normal; font-fam=
ily: Menlo;" class=3D""><span style=3D"font-variant-ligatures: no-common-li=
gatures" class=3D"">groups: cannot find name for group ID 426</span></div><=
div class=3D""><br class=3D""></div><div class=3D"">It looks like I=E2=80=
=99m in a shell:</div><div class=3D""><div style=3D"margin: 0px; font-size:=
 10px; line-height: normal; font-family: Menlo;" class=3D""><span style=3D"=
font-variant-ligatures: no-common-ligatures" class=3D"">ls -l /singularity&=
nbsp;</span></div><div style=3D"margin: 0px; font-size: 10px; line-height: =
normal; font-family: Menlo;" class=3D""><span style=3D"font-variant-ligatur=
es: no-common-ligatures" class=3D"">lrwxrwxrwx 1 root root 24 Jun&nbsp; 6 1=
4:46 /singularity -&gt; .singularity.d/runscript</span></div></div><div cla=
ss=3D""><br class=3D""></div><div class=3D"">But is that error/warning norm=
al?</div><div class=3D""><br class=3D""></div><br class=3D""><div><blockquo=
te type=3D"cite" class=3D""><div class=3D"">On Jun 6, 2017, at 10:01 AM, R=
=C3=A9my Dernat &lt;<a href=3D"mailto:rem...@gmail.com" class=3D"">rem...@g=
mail.com</a>&gt; wrote:</div><br class=3D"Apple-interchange-newline"><div c=
lass=3D""><div dir=3D"ltr" class=3D"">Hi,<div class=3D""><br class=3D""></d=
iv><div class=3D"">Try to remove every previous install and the install src=
 directory. Then, logout/login and clone singularity again. Finally, build =
it from a clean environment.</div><div class=3D"">Let us know if it solves =
your issue.</div><div class=3D""><br class=3D""></div><div class=3D"">Other=
wise, it could be a bug. Try to create a symbolic link to configuration fil=
e where it is searching (/etc/singularity/singularity.conf).</div><div clas=
s=3D""><br class=3D""></div><div class=3D"">Best regards,</div><div class=
=3D"">R=C3=A9my</div></div><div class=3D"gmail_extra"><br class=3D""><div c=
lass=3D"gmail_quote">2017-06-06 15:51 GMT+02:00 Robert Kudyba <span dir=3D"=
ltr" class=3D"">&lt;<a href=3D"mailto:rku...@fordham.edu" target=3D"_blank"=
 class=3D"">rku...@fordham.edu</a>&gt;</span>:<br class=3D""><blockquote cl=
ass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;p=
adding-left:1ex"><div style=3D"word-wrap:break-word" class=3D""><div class=
=3D"">OK I did that but still getting the bathing error about the conf file=
. I did find a previous thread mentioning this&nbsp;<a href=3D"https://urld=
efense.proofpoint.com/v2/url?u=3Dhttps-3A__groups.google.com_a_lbl.gov_foru=
m_-23-21topic_singularity_mTPunMFQF4k&amp;d=3DDwMFaQ&amp;c=3DaqMfXOEvEJQh2i=
QMCb7Wy8l0sPnURkcqADc2guUW8IM&amp;r=3DX0jL9y0sL4r4iU_qVtR3lLNo4tOL1ry_m7-ps=
V3GejY&amp;m=3D6bH1ymxbi1sjYEf1b1I5mFgmrV6i74K8qBLXr92Gwts&amp;s=3D8idh7dZX=
Yflc0-GnBBay6ept9BXftZeazG5A09GHiNA&amp;e=3D" target=3D"_blank" class=3D"">=
https://groups.google.<wbr class=3D"">com/a/lbl.gov/forum/#!topic/<wbr clas=
s=3D"">singularity/mTPunMFQF4k</a>&nbsp;but there=E2=80=99s no solution on =
how to point to an alternative location, like a -c option. I updated the in=
it file to add /export/apps/singularity-<wbr class=3D"">install to the $PAT=
H.</div><div class=3D""><br class=3D""></div><div class=3D""><br class=3D""=
></div><div class=3D""><div style=3D"margin:0px;font-size:10px;line-height:=
normal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:=
no-common-ligatures" class=3D"">./singularity --debug create /export/apps/u=
buntu.simg</span></div><div style=3D"margin:0px;font-size:10px;line-height:=
normal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:=
no-common-ligatures" class=3D"">Enabling debugging</span></div><div style=
=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" class=
=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D""=
>Ending argument loop</span></div><div style=3D"margin:0px;font-size:10px;l=
ine-height:normal;font-family:Menlo" class=3D""><span style=3D"font-variant=
-ligatures:no-common-ligatures" class=3D"">Singularity version: 2.3-master.=
gda9cd20</span></div><div style=3D"margin:0px;font-size:10px;line-height:no=
rmal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no=
-common-ligatures" class=3D"">Exec'ing: /export/apps/singularity-<wbr class=
=3D"">install/libexec/singularity/<wbr class=3D"">cli/create.exec</span></d=
iv><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:M=
enlo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures"=
 class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; message_init()&nb=
sp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; Set messagelevel to: 5</span></div><div style=3D"margin=
:0px;font-size:10px;line-height:normal;font-family:Menlo" class=3D""><span =
style=3D"font-variant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=
=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_config_parse()&nbsp; &nbsp;=
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Initialize configuration file: /=
etc/singularity/singularity.<wbr class=3D"">conf</span></div><div style=3D"=
margin:0px;font-size:10px;line-height:normal;font-family:Menlo;color:rgb(25=
5,59,29)" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatu=
res" class=3D"">ERROR &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singular=
ity_config_parse()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; S=
pecified configuration file /etc/singularity/singularity.<wbr class=3D"">co=
nf does not appear to be a normal file.</span></div><div style=3D"margin:0p=
x;font-size:10px;line-height:normal;font-family:Menlo;color:rgb(255,59,29)"=
 class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" clas=
s=3D"">ERROR &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_confi=
g_parse()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Could not =
open configuration file /etc/singularity/singularity.<wbr class=3D"">conf: =
No such file or directory</span></div><div style=3D"margin:0px;font-size:10=
px;line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-var=
iant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nb=
sp; &nbsp; &nbsp; singularity_registry_init() &nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; Initializing Singularity Registry</span></div><div styl=
e=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" class=
=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D""=
>VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&n=
bsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to regis=
try: 'WRITABLE' =3D '1'</span></div><div style=3D"margin:0px;font-size:10px=
;line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-varia=
nt-ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]=
&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(<wbr class=
=3D"">WRITABLE, 1) =3D 0</span></div><div style=3D"margin:0px;font-size:10p=
x;line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-vari=
ant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbs=
p; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; Adding value to registry: 'LIBEXECDIR' =3D '/export=
/apps/singularity-<wbr class=3D"">install/libexec'</span></div><div style=
=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" class=
=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D""=
>DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_se=
t()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singul=
arity_registry_set(<wbr class=3D"">libexecdir, /export/apps/singularity-<wb=
r class=3D"">install/libexec) =3D 0</span></div><div style=3D"margin:0px;fo=
nt-size:10px;line-height:normal;font-family:Menlo" class=3D""><span style=
=3D"font-variant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=
=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding value to registry: 'COMMAND' =
=3D 'create'</span></div><div style=3D"margin:0px;font-size:10px;line-heigh=
t:normal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligature=
s:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbs=
p; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; &nbsp; &nbsp; Returning singularity_registry_set(<wbr class=3D"">COMMAND=
, create) =3D 0</span></div><div style=3D"margin:0px;font-size:10px;line-he=
ight:normal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligat=
ures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp;=
 &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=
 &nbsp; &nbsp; Adding value to registry: 'MESSAGELEVEL' =3D '5'</span></div=
><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:Men=
lo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" c=
lass=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_re=
gistry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returni=
ng singularity_registry_set(<wbr class=3D"">MESSAGELEVEL, 5) =3D 0</span></=
div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:=
Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures=
" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_regi=
stry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding va=
lue to registry: 'VERSION' =3D '2.3-master.gda9cd20'</span></div><div style=
=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" class=
=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D""=
>DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_se=
t()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singul=
arity_registry_set(<wbr class=3D"">version, 2.3-master.gda9cd20) =3D 0</spa=
n></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-fam=
ily:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligat=
ures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_=
registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Addin=
g value to registry: 'LOCALSTATEDIR' =3D '/export/apps/singularity-<wbr cla=
ss=3D"">install/var'</span></div><div style=3D"margin:0px;font-size:10px;li=
ne-height:normal;font-family:Menlo" class=3D""><span style=3D"font-variant-=
ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nb=
sp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nb=
sp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(<wbr class=3D""=
>localstatedir, /export/apps/singularity-<wbr class=3D"">install/var) =3D 0=
</span></div><div style=3D"margin:0px;font-size:10px;line-height:normal;fon=
t-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-=
ligatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singula=
rity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
Adding value to registry: 'SYSCONFDIR' =3D '/export/apps/singularity-<wbr c=
lass=3D"">install/etc'</span></div><div style=3D"margin:0px;font-size:10px;=
line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-varian=
t-ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&=
nbsp; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(<wbr class=3D=
"">sysconfdir, /export/apps/singularity-<wbr class=3D"">install/etc) =3D 0<=
/span></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font=
-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-l=
igatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singular=
ity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; A=
dding value to registry: 'BINDIR' =3D '/export/apps/singularity-<wbr class=
=3D"">install/bin'</span></div><div style=3D"margin:0px;font-size:10px;line=
-height:normal;font-family:Menlo" class=3D""><span style=3D"font-variant-li=
gatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp=
; &nbsp; &nbsp; singularity_registry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; Returning singularity_registry_set(<wbr class=3D"">b=
indir, /export/apps/singularity-<wbr class=3D"">install/bin) =3D 0</span></=
div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:=
Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures=
" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_regi=
stry_set()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Adding va=
lue to registry: 'IMAGE' =3D '/export/apps/ubuntu.simg'</span></div><div st=
yle=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" clas=
s=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D"=
">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_registry_s=
et()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning singu=
larity_registry_set(<wbr class=3D"">IMAGE, /export/apps/ubuntu.simg) =3D 0<=
/span></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font=
-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-l=
igatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; sin=
gularity_registry_get()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nb=
sp; Returning NULL on 'HOME'</span></div><div style=3D"margin:0px;font-size=
:10px;line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-=
variant-ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D1=
7149]&nbsp; &nbsp; &nbsp; singularity_registry_get()&nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; &nbsp; &nbsp; &nbsp; Returning NULL on 'TARGET_UID'</span></div=
><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:Men=
lo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" c=
lass=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_re=
gistry_get()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Returni=
ng NULL on 'TARGET_GID'</span></div><div style=3D"margin:0px;font-size:10px=
;line-height:normal;font-family:Menlo" class=3D""><span style=3D"font-varia=
nt-ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]=
&nbsp; &nbsp; &nbsp; singularity_priv_init() &nbsp; &nbsp; &nbsp; &nbsp; &n=
bsp; &nbsp; &nbsp; &nbsp; &nbsp; Initializing user info</span></div><div st=
yle=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" clas=
s=3D""><span style=3D"font-variant-ligatures:no-common-ligatures" class=3D"=
">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singularity_priv_init(=
) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Set the ca=
lling user's username to: root</span></div><div style=3D"margin:0px;font-si=
ze:10px;line-height:normal;font-family:Menlo" class=3D""><span style=3D"fon=
t-variant-ligatures:no-common-ligatures" class=3D"">DEBUG &nbsp; [U=3D0,P=
=3D17149]&nbsp; &nbsp; &nbsp; singularity_priv_init() &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Marking uinfo structure as ready<=
/span></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font=
-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-l=
igatures" class=3D"">DEBUG &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; sin=
gularity_priv_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp=
; &nbsp; Obtaining home directory</span></div><div style=3D"margin:0px;font=
-size:10px;line-height:normal;font-family:Menlo" class=3D""><span style=3D"=
font-variant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=3D1=
7149]&nbsp; &nbsp; &nbsp; singularity_priv_init() &nbsp; &nbsp; &nbsp; &nbs=
p; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Set home (via getpwuid()) to: /root</=
span></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-=
family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-li=
gatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; singulari=
ty_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbs=
p; Running SUID program workflow</span></div><div style=3D"margin:0px;font-=
size:10px;line-height:normal;font-family:Menlo" class=3D""><span style=3D"f=
ont-variant-ligatures:no-common-ligatures" class=3D"">VERBOSE [U=3D0,P=3D17=
149]&nbsp; &nbsp; &nbsp; singularity_suid_init() &nbsp; &nbsp; &nbsp; &nbsp=
; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Checking program has appropriate permi=
ssions</span></div><div style=3D"margin:0px;font-size:10px;line-height:norm=
al;font-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-c=
ommon-ligatures" class=3D"">VERBOSE [U=3D0,P=3D17149]&nbsp; &nbsp; &nbsp; s=
ingularity_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nb=
sp; &nbsp; Checking configuration file is properly owned by root</span></di=
v><div style=3D"margin:0px;font-size:10px;line-height:normal;font-family:Me=
nlo;color:rgb(195,55,32)" class=3D""><span style=3D"font-variant-ligatures:=
no-common-ligatures" class=3D"">ABORT &nbsp; [U=3D0,P=3D17149]&nbsp; &nbsp;=
 &nbsp; singularity_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; Running in privileged mode, root must own the Singulari=
ty configuration file: /etc/singularity/singularity.<wbr class=3D"">conf</s=
pan></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-f=
amily:Menlo;color:rgb(195,55,32)" class=3D""><span style=3D"font-variant-li=
gatures:no-common-ligatures" class=3D"">ABORT &nbsp; [U=3D0,P=3D17149]&nbsp=
; &nbsp; &nbsp; singularity_suid_init() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; =
&nbsp; &nbsp; &nbsp; &nbsp; Retval =3D 255</span></div></div><div class=3D"=
"><div class=3D"h5"><div class=3D""><span style=3D"font-variant-ligatures:n=
o-common-ligatures" class=3D""><br class=3D""></span></div><br class=3D""><=
div class=3D""><blockquote type=3D"cite" class=3D""><div class=3D"">On Jun =
6, 2017, at 2:53 AM, R=C3=A9my Dernat &lt;<a href=3D"mailto:rem...@gmail.co=
m" target=3D"_blank" class=3D"">rem...@gmail.com</a>&gt; wrote:</div><br cl=
ass=3D"m_9141356409832340507Apple-interchange-newline"><div class=3D""><div=
 dir=3D"ltr" class=3D"">Hi Robert,<div class=3D""><br class=3D""></div><div=
 class=3D"">You just have to install singularity on a NFS export; Replace:<=
/div><div class=3D""><br class=3D""></div><div class=3D"">```</div><div cla=
ss=3D""><span style=3D"font-variant-ligatures:no-common-ligatures;font-fami=
ly:Menlo;font-size:10px" class=3D"">&nbsp;</span><span style=3D"font-varian=
t-ligatures:no-common-ligatures;font-family:Menlo;font-size:10px" class=3D"=
">./configure --prefix=3D/export/apps/singular<wbr class=3D"">ity-install -=
-sysconfdir=3D/etc</span><br class=3D""></div><div class=3D"">```</div><div=
 class=3D"">With:</div><div class=3D"">```</div><div class=3D""><span style=
=3D"font-variant-ligatures:no-common-ligatures;font-family:Menlo;font-size:=
10px" class=3D"">&nbsp;</span><span style=3D"font-variant-ligatures:no-comm=
on-ligatures;font-family:Menlo;font-size:10px" class=3D"">./configure --pre=
fix=3D/export/apps/singular<wbr class=3D"">ity-install</span><br class=3D""=
></div><div class=3D"">```</div><div class=3D""><br class=3D""></div><div c=
lass=3D"">Then, it should works as expected.</div><div class=3D""><br class=
=3D""></div><div class=3D"">Do not forget that some singularity commands, l=
ike `bootstrap` in 2.3 or many more in previous release need sudo/root priv=
ileges.</div><div class=3D""><br class=3D""></div><div class=3D"">Best rega=
rds,<br class=3D"">R=C3=A9my</div></div><div class=3D"gmail_extra"><br clas=
s=3D""><div class=3D"gmail_quote">2017-06-05 23:09 GMT+02:00 Robert Kudyba =
<span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:rku...@fordham.edu" targ=
et=3D"_blank" class=3D"">rku...@fordham.edu</a>&gt;</span>:<br class=3D""><=
blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px=
 #ccc solid;padding-left:1ex"><div style=3D"word-wrap:break-word" class=3D"=
"><span class=3D""><br class=3D""><div class=3D""><blockquote type=3D"cite"=
 class=3D""><div class=3D"">On Jun 5, 2017, at 4:30 PM, Rick Wagner &lt;<a =
href=3D"mailto:richard...@gmail.com" target=3D"_blank" class=3D"">richard..=
.@gmail.com</a>&gt; wrote:</div><br class=3D"m_9141356409832340507m_-561958=
8665609687384Apple-interchange-newline"><div class=3D""><div style=3D"word-=
wrap:break-word" class=3D""><br class=3D""><div class=3D""><blockquote type=
=3D"cite" class=3D""><div class=3D"">On Jun 5, 2017, at 4:13 PM, Robert Kud=
yba &lt;<a href=3D"mailto:rku...@fordham.edu" target=3D"_blank" class=3D"">=
rku...@fordham.edu</a>&gt; wrote:</div><br class=3D"m_9141356409832340507m_=
-5619588665609687384Apple-interchange-newline"><div class=3D""><div style=
=3D"word-wrap:break-word" class=3D""><br class=3D""><div class=3D""><blockq=
uote type=3D"cite" class=3D""><div class=3D"">On Jun 5, 2017, at 4:08 PM, R=
ick Wagner &lt;<a href=3D"mailto:richard...@gmail.com" target=3D"_blank" cl=
ass=3D"">richard...@gmail.com</a>&gt; wrote:</div><br class=3D"m_9141356409=
832340507m_-5619588665609687384Apple-interchange-newline"><div class=3D""><=
div style=3D"word-wrap:break-word" class=3D""><div class=3D"">Robert,</div>=
<div class=3D""><br class=3D""></div><div class=3D"">That=E2=80=99s an NFS =
export for the Rocks head node that may be mounted nosuid</div></div></div>=
</blockquote><br class=3D""></div><div class=3D"">Right in /etc/fstab for o=
ther applications we already have this:</div><div class=3D""><br class=3D""=
></div><div class=3D""><div style=3D"margin:0px;font-size:10px;line-height:=
normal;font-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:=
no-common-ligatures" class=3D"">UUID=3Dxxxxx /export &nbsp; &nbsp; &nbsp; &=
nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ext4&nbsp; &nbsp; defaults&nbsp; &nbsp; &=
nbsp; &nbsp; 1 2</span></div><div class=3D""><span style=3D"font-variant-li=
gatures:no-common-ligatures" class=3D""><br class=3D""></span></div></div>S=
o what else needs to be done?</div></div></blockquote><div class=3D""><br c=
lass=3D""></div><div class=3D"">One option is to build an RPM using the spe=
c file in the Singularity repo and put that in contrib for your Rocks distr=
o along with a package tag in extend compute. That=E2=80=99s my preference =
because I don=E2=80=99t like serving applications over NFS, especially ones=
 with setuid.</div><div class=3D""><br class=3D""></div><div class=3D"">WAR=
NING: the following will allow any executable with a setuid bit in that NFS=
 file system to be run.</div><div class=3D""><br class=3D""></div><div clas=
s=3D"">You can try changing defaults to defaults,suid and remounting the fi=
le system on a compute node.</div></div></div></div></blockquote><br class=
=3D""></div></span><div class=3D"">Is this an =E2=80=9Cor=E2=80=9D suggesti=
on? I don=E2=80=99t have a problem with changing the /etc/fstab. I did that=
 and ran:</div><div class=3D""><div style=3D"margin:0px;font-size:10px;line=
-height:normal;font-family:Menlo" class=3D""><span style=3D"font-variant-li=
gatures:no-common-ligatures" class=3D"">&nbsp;&nbsp;rocks sync config</span=
></div><div style=3D"margin:0px;font-size:10px;line-height:normal;font-fami=
ly:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-ligatu=
res" class=3D"">&nbsp; rocks sync users</span></div><div style=3D"margin:0p=
x;font-size:10px;line-height:normal;font-family:Menlo" class=3D""><br class=
=3D""></div></div>Also made sure to use the config option as /share/apps (n=
ot /export/apps as that=E2=80=99s just for the head node)<div class=3D""><b=
r class=3D""></div><div class=3D"">Still getting:</div><div class=3D""><div=
 class=3D""><div style=3D"margin:0px;font-size:10px;line-height:normal;font=
-family:Menlo" class=3D""><span style=3D"font-variant-ligatures:no-common-l=
igatures" class=3D"">/share/apps/bin</span></div></div><div class=3D""><div=
 style=3D"margin:0px;font-size:10px;line-height:normal;font-family:Menlo" c=
lass=3D""><div style=3D"margin:0px;line-height:normal" class=3D""><span sty=
le=3D"font-variant-ligatures:no-common-ligatures" class=3D"">./singularity =
shell /share/apps/ubuntu.simg</span></div><span class=3D""><div style=3D"ma=
rgin:0px;line-height:normal;color:rgb(255,59,29)" class=3D""><span style=3D=
"font-variant-ligatures:no-common-ligatures" class=3D"">ERROR&nbsp; : Sessi=
on directory does not exist: /export/apps/var/singularity/m<wbr class=3D"">=
nt/session</span></div><div style=3D"margin:0px;line-height:normal;color:rg=
b(195,55,32)" class=3D""><span style=3D"font-variant-ligatures:no-common-li=
gatures" class=3D"">ABORT&nbsp; : Retval =3D 255</span></div></span></div><=
/div></div></div><div class=3D""><br class=3D"m_9141356409832340507webkit-b=
lock-placeholder"></div>

-- <br class=3D""><div class=3D"m_9141356409832340507HOEnZb"><div class=3D"=
m_9141356409832340507h5">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.go<wbr class=3D"">v</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"m_9141356409832340507webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></blockquote></div><br class=3D""></div></div></div><div class=3D"HOE=
nZb"><div class=3D"h5"><div class=3D""><br class=3D"webkit-block-placeholde=
r"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" class=3D"">singu...@lbl.gov</a>=
.<br class=3D"">
</div></blockquote></div><br class=3D""></body></html>
--Apple-Mail=_53666068-3270-4AEB-BEF7-6E5F1B1322E1--
