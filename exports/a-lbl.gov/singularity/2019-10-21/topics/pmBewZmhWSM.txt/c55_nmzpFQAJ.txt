Date: Wed, 23 Jan 2019 04:53:13 -0800 (PST)
From: Richard Powell <blacksbu...@gmail.com>
To: singularity <singu...@lbl.gov>
Message-Id: <fab12c85-1ab3-4795-bca9-015c2c827409@lbl.gov>
In-Reply-To: <20190122232507.GA54571@fnal.gov>
References: <3a4e9058-e327-45f3-b5c0-45aac060f2fe@lbl.gov>
 <5d0e4001-4fb9-4646-9c41-323ee5d25082@lbl.gov>
 <20190122232507.GA54571@fnal.gov>
Subject: Re: [Singularity] Re: Building v3.0.3 rpm from tar.gz on closed (no
 git) environment...
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_2793_863789276.1548247994148"

------=_Part_2793_863789276.1548247994148
Content-Type: multipart/alternative; 
	boundary="----=_Part_2794_554970573.1548247994149"

------=_Part_2794_554970573.1548247994149
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Perfect solution for me Dave.  I'm hopeful to steer our cluster to a modern 
setup at some point soon.  Thanks for this tip.

Richard

On Tuesday, January 22, 2019 at 6:25:18 PM UTC-5, Dave Dykstra wrote:
>
> Richard, 
>
> The build process was updated so that it could work on completely closed 
> environments, with no access to network at all, and so that it would 
> work on many different architectures.  The previous method of 
> downloading a golang installation for the x86_64 architecture was a 
> non-starter on the fedora build system for both of those reasons.  It 
> was a very non-standard way of doing things.  Requiring installing the 
> rpm from EPEL is actually a much easier way to go on build machines, and 
> the resultant singularity rpm has no requirement for a golang runtime 
> rpm, so I think this is just the way it's going to be from now on. 
>
> If you still really wanted to avoid installing the EPEL golang rpm, an 
> alternative would be to make your own essentially empty rpm that says it 
> Provides: golang, install that instead, and make sure that 'go' is in 
> your PATH.   I don't see what advantage that would be for you though, 
> because you'd still need to install an rpm. 
>
> Dave 
>
> On Tue, Jan 22, 2019 at 01:02:52PM -0800, Richard Powell wrote: 
> > Update on this topic.  One fix I found was to update the rpm's for 
> golang.   
> > Since I'm on a dev box, I'm ok with that, but I'd rather find a way to 
> > build the rpm using our golang installed on /nfs.  Let me know if that 
> is a 
> > possibility.  Thanks much. 
> > rpm -qa | grep golang 
> > golang-src-1.11.4-1.el6.noarch 
> > golang-bin-1.11.4-1.el6.x86_64 
> > golang-1.11.4-1.el6.x86_64 
> > 
> > 
> > 
> > go version 
> > go version go1.11.4 linux/amd64 
> > env | grep go 
> > GOPATH=/root/go 
> > rpmbuild -tb singularity-3.0.3.tar.gz 
> > Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.eQId5o 
> > + umask 022 
> > + cd /root/rpmbuild/BUILD 
> > + LANG=C 
> > + export LANG 
> > + unset DISPLAY 
> > + rm -rf singularity-3.0.3 
> > + mkdir singularity-3.0.3 
> > + exit 0 
> > Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.6ouPIr 
> > + umask 022 
> > + cd /root/rpmbuild/BUILD 
> > + LANG=C 
> > + export LANG 
> > + unset DISPLAY 
> > + cd singularity-3.0.3 
> > + mkdir -p gopath/src/github.com/sylabs/singularity 
> > + tar -C gopath/src/github.com/sylabs/ -xf 
> /root/singularity-3.0.3.tar.gz 
> > + export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > + GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > + export 
> > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > + 
> > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > + cd 
> > /root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/
> github.com/sylabs/singularity 
> > + ./mconfig -V 3.0.3-1.el6 --prefix=/usr --exec-prefix=/usr 
> > --bindir=/usr/bin --libexecdir=/usr/libexec --sysconfdir=/etc 
> > --sharedstatedir=/var/lib --localstatedir=/var --libdir=/usr/lib64 
> > => running base system checks ... 
> >  checking: host C compiler... cc 
> >  checking: host C++ compiler... c++ 
> >  checking: host `ar' path... ar 
> >  checking: host `ld' path... ld 
> >  checking: host `ranlib' path... ranlib 
> >  checking: host `objcopy' path... objcopy 
> >  checking: target C compiler... cc 
> >  checking: target C++ compiler... c++ 
> >  checking: target `ar' path... ar 
> >  checking: target `ld' path... ld 
> >  checking: target `ranlib' path... ranlib 
> >  checking: target `objcopy' path... objcopy 
> >  checking: host compiles static binaries... yes 
> >  checking: target compiles static binaries... yes 
> >  checking: host os type... unix 
> >  checking: host architecture... x86_64 
> >  checking: target architecture... x86_64 
> >  checking: host architecture word size... 64 
> >  checking: target architecture word size... 64 
> > => running project specific checks ... 
> >  checking: namespace: CLONE_NEWPID... yes 
> >  checking: namespace: CLONE_FS... yes 
> >  checking: namespace: CLONE_NEWNS... yes 
> >  checking: namespace: CLONE_NEWUSER... yes 
> >  checking: namespace: CLONE_NEWIPC... yes 
> >  checking: namespace: CLONE_NEWNET... yes 
> >  checking: namespace: CLONE_NEWUTS... yes 
> >  checking: namespace: CLONE_NEWCGROUP... no 
> >  checking: feature: NO_NEW_PRIVS... yes 
> >  checking: feature: MS_SLAVE... yes 
> >  checking: feature: MS_REC... yes 
> >  checking: feature: MS_PRIVATE... yes 
> >  checking: user capabilities... no 
> >  checking: header linux/securebits.h... no 
> >  checking: header linux/capability.h... yes 
> >  checking: function setns... no 
> >  checking: libssl+headers... yes 
> >  checking: libuuid+headers... yes 
> >  checking: libseccomp+headers... no 
> > INFO: userns and disable_suid are disabled. 
> (mlocal/checks/basechecks.chk) 
> > => generating fragments ... 
> >  found build modules: 
> >    +-> internal/pkg/runtime/c/lib/util/util.mconf 
> > => building Makefile ... 
> > => generating singularity.spec ... 
> > => project setup with : 
> >     - target arch: x86_64 
> >     - target compiler: cc 
> >     - target wordsize: 64-bit 
> >     - host arch: x86_64 
> >     - host wordsize: 64-bit 
> >     - host system: unix 
> >     - config profile: release 
> >     - verbose: no 
> > => builddir/Makefile ready, try: 
> >    $ cd builddir 
> >    $ make 
> > + cd builddir 
> > + make old_config= 
> >  CC internal/pkg/runtime/c/lib/util/capability.c 
> >  CC internal/pkg/runtime/c/lib/util/message.c 
> >  CC internal/pkg/runtime/c/lib/util/setns.c 
> >  AR internal/pkg/runtime/c/lib/util/libutil.a 
> >  CSCOPE 
> >  DEPENDS 
> >  AR lib/libruntime.a 
> >  GO singularity 
> >  GEN singularity.conf 
> >  GO clean -cache 
> >  GO cmd/starter/c/starter 
> >  CNI PLUGIN bandwidth 
> >  CNI PLUGIN bridge 
> >  CNI PLUGIN dhcp 
> >  CNI PLUGIN flannel 
> >  CNI PLUGIN host-device 
> >  CNI PLUGIN host-local 
> >  CNI PLUGIN ipvlan 
> >  CNI PLUGIN macvlan 
> >  CNI PLUGIN portmap 
> >  CNI PLUGIN ptp 
> >  CNI PLUGIN static 
> >  CNI PLUGIN tuning 
> >  CNI PLUGIN vlan 
> > + exit 0 
> > Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.mAEbP3 
> > + umask 022 
> > + cd /root/rpmbuild/BUILD 
> > + '[' /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 '!=' / ']' 
> > + rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > ++ dirname /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > + mkdir -p /root/rpmbuild/BUILDROOT 
> > + mkdir /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > + LANG=C 
> > + export LANG 
> > + unset DISPLAY 
> > + cd singularity-3.0.3 
> > + export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > + GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > + export 
> > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > + 
> > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > + cd 
> > /root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/
> github.com/sylabs/singularity/builddir 
> > + mkdir -p 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/share/man/man1 
> > + make DESTDIR=/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > install man 
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity 
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter 
>
> >  INSTALL SUID 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/var/singularity/mnt/session 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/singularity.conf 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/run-singularity 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/capability.json 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/ecl.toml 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/bash_completion.d/singularity 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bridge 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/dhcp 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/flannel 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-device 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-local 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ipvlan 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/macvlan 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ptp 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/static 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/tuning 
>
> >  INSTALL CNI PLUGIN 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/vlan 
>
> >  INSTALL CNI CONFIGURATION FILES 
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/seccomp-profiles/default.json 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/nvliblist.conf 
>
> >  INSTALL 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/cgroups/cgroups.toml 
>
> >  DONE 
> > INFO    [U=0,P=374372]     main()                        Creating 
> > Singularity man pages at 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/share/man/man1 
> > + chmod 644 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/exec 
>
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/run 
>
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/shell 
>
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/start 
>
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/test 
>
> > + /usr/lib/rpm/find-debuginfo.sh --strict-build-id /root/rpmbuild/BUILD/ 
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/macvlan 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-device 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bridge 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/dhcp 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/static 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/tuning 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ptp 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/flannel 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ipvlan 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-local 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/vlan 
>
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter 
>
> > /usr/lib/rpm/debugedit: 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: 
>
> > Unknown debugging section .debug_gdb_scripts 
> > /usr/lib/rpm/debugedit: 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: 
>
> > .debug_line CU does not fit into section 
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid 
>
> > /usr/lib/rpm/debugedit: 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid: 
>
> > Unknown debugging section .debug_gdb_scripts 
> > /usr/lib/rpm/debugedit: 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid: 
>
> > .debug_line CU does not fit into section 
> > *** WARNING: identical binaries are copied, not linked: 
> >         /usr/libexec/singularity/bin/starter-suid 
> >    and  /usr/libexec/singularity/bin/starter 
> > extracting debug info from 
> > 
> /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity 
> > cpio: /tmp/go-build: Cannot stat: No such file or directory 
> > 3533 blocks 
> > + /usr/lib/rpm/check-buildroot 
> > + /usr/lib/rpm/redhat/brp-compress 
> > + /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip 
> > + /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip 
> /usr/bin/objdump 
> > + /usr/lib/rpm/brp-python-bytecompile 
> > + /usr/lib/rpm/redhat/brp-python-hardlink 
> > + /usr/lib/rpm/redhat/brp-java-repack-jars 
> > Processing files: singularity-3.0.3-1.el6.x86_64 
> > warning: File listed twice: /etc/singularity/actions/exec 
> > warning: File listed twice: /etc/singularity/actions/run 
> > warning: File listed twice: /etc/singularity/actions/shell 
> > warning: File listed twice: /etc/singularity/actions/start 
> > warning: File listed twice: /etc/singularity/actions/test 
> > Provides: config(singularity) = 3.0.3-1.el6 singularity-runtime 
> > Requires(rpmlib): rpmlib(CompressedFileNames) <= 3.0.4-1 
> > rpmlib(FileDigests) <= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) <= 4.0-1 
> > Requires: /bin/sh libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit) 
> > libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit) 
> > libc.so.6(GLIBC_2.4)(64bit) libc.so.6(GLIBC_2.7)(64bit) 
> libdl.so.2()(64bit) 
> > libdl.so.2(GLIBC_2.2.5)(64bit) libpthread.so.0()(64bit) 
> > libpthread.so.0(GLIBC_2.2.5)(64bit) libpthread.so.0(GLIBC_2.3.2)(64bit) 
> > rtld(GNU_HASH) 
> > Obsoletes: singularity-runtime 
> > Processing files: singularity-debuginfo-3.0.3-1.el6.x86_64 
> > Checking for unpackaged file(s): /usr/lib/rpm/check-files 
> > /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > Wrote: /root/rpmbuild/RPMS/x86_64/singularity-3.0.3-1.el6.x86_64.rpm 
> > Wrote: 
> > /root/rpmbuild/RPMS/x86_64/singularity-debuginfo-3.0.3-1.el6.x86_64.rpm 
> > Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.K11Z8n 
> > + umask 022 
> > + cd /root/rpmbuild/BUILD 
> > + rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
> > + exit 0 
> > 
> > ls -lat rpmbuild/RPMS/x86_64/ 
> > total 43424 
> > -rw-r--r-- 1 root root 18417700 Jan 22 15:57 
> > singularity-debuginfo-3.0.3-1.el6.x86_64.rpm 
> > drwxr-xr-x 2 root root     4096 Jan 22 15:57 . 
> > -rw-r--r-- 1 root root 26037820 Jan 22 15:57 
> > singularity-3.0.3-1.el6.x86_64.rpm 
> > drwxr-xr-x 3 root root     4096 Jan 22 15:56 .. 
> > 
> > 
> > On Tuesday, January 22, 2019 at 3:19:59 PM UTC-5, Richard Powell wrote: 
> > > 
> > > Last month, and previous months, I was able to build the rpm for 
> > > Singularity with ease after having our security team open a hole in 
> the 
> > > proxy.  This process no longer works a singularity v3.0.3.  I miss 
> last 
> > > month's strategy now for building rpms!  Is there a path to success if 
> I'm 
> > > strapped with a centralized golang install and I simply need to build 
> rpms 
> > > without access to git?  Please advise on how to build rpm with only 
> access 
> > > to google.dl golang or old local golang. 
> > > 
> > > On our RHEL6, the following is all I needed to do and the script would 
> > > wget to google.dl for latest golang and all worked well. 
> > > rpmbuild -tb singularity-3.0.2.tar.gz 
> > > 
> > > Now, on same RHEL6 server, the script does not attempt to wget golang 
> and 
> > > instead (perhaps) looks for golang package install, which I didn't 
> > > initially have.  Our install of golang, however, is not installed via 
> rpm 
> > > and is on a centralized /nfs mount point to which a module environment 
> file 
> > > sets PATH and GOROOT and I set GOPATH on the terminal. 
> > > ---------------------------------first failed attempt using our 
> > > centralized golang---------------- 
> > > #1 module load go_1_11_1 
> > > #2 export GOPATH=${HOME}/go 
> > > #3 env | grep go 
> > > 
> > > 
> PATH=/nfs/system/golang/go/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > > _LMFILES_=/nfs/system/envir_modulefiles/go_1_11_1 
> > > LOADEDMODULES=go_1_11_1 
> > > GOROOT=/nfs/system/golang/go 
> > > GOPATH=/root/go 
> > > #4 rpmbuild -tb singularity-3.0.3.tar.gz 
> > > #5 failed result below: 
> > > rpmbuild -tb singularity-3.0.3.tar.gz 
> > > error: Failed build dependencies: 
> > >         golang is needed by singularity-3.0.3-1.el6.x86_64 
> > > --------------------end of first attempt--------------------------- 
> > > 
> > > -----------------second failed attempt with RHEL6 EPEL 
> > > golang--------------------------- 
> > > When above failed, I installed golang via rpm from epel, but it's old 
> and 
> > > gave the following issue: 
> > > rpm -qa | grep golang 
> > > golang-src-1.3.3-1.el6.noarch 
> > > golang-pkg-bin-linux-amd64-1.3.3-1.el6.x86_64 
> > > golang-1.3.3-1.el6.x86_64 
> > > golang-pkg-linux-amd64-1.3.3-1.el6.noarch 
> > > 
> > > Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.DNm3VF 
> > > + umask 022 
> > > + cd /root/rpmbuild/BUILD 
> > > + LANG=C 
> > > + export LANG 
> > > + unset DISPLAY 
> > > + rm -rf singularity-3.0.3 
> > > + mkdir singularity-3.0.3 
> > > + exit 0 
> > > Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.WJLNPo 
> > > + umask 022 
> > > + cd /root/rpmbuild/BUILD 
> > > + LANG=C 
> > > + export LANG 
> > > + unset DISPLAY 
> > > + cd singularity-3.0.3 
> > > + mkdir -p gopath/src/github.com/sylabs/singularity 
> > > + tar -C gopath/src/github.com/sylabs/ -xf 
> /root/singularity-3.0.3.tar.gz 
> > > + export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > > + GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath 
> > > + export 
> > > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > > + 
> > > 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin 
>
> > > + cd /root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/ 
> > > github.com/sylabs/singularity 
> > > + ./mconfig -V 3.0.3-1.el6 --prefix=/usr --exec-prefix=/usr 
> > > --bindir=/usr/bin --libexecdir=/usr/libexec --sysconfdir=/etc 
> > > --sharedstatedir=/var/lib --localstatedir=/var --libdir=/usr/lib64 
> > > => running base system checks ... 
> > >  checking: host C compiler... cc 
> > >  checking: host C++ compiler... c++ 
> > >  checking: host `ar' path... ar 
> > >  checking: host `ld' path... ld 
> > >  checking: host `ranlib' path... ranlib 
> > >  checking: host `objcopy' path... objcopy 
> > >  checking: target C compiler... cc 
> > >  checking: target C++ compiler... c++ 
> > >  checking: target `ar' path... ar 
> > >  checking: target `ld' path... ld 
> > >  checking: target `ranlib' path... ranlib 
> > >  checking: target `objcopy' path... objcopy 
> > >  checking: host compiles static binaries... yes 
> > >  checking: target compiles static binaries... yes 
> > >  checking: host os type... unix 
> > >  checking: host architecture... x86_64 
> > >  checking: target architecture... x86_64 
> > >  checking: host architecture word size... 64 
> > >  checking: target architecture word size... 64 
> > > => running project specific checks ... 
> > >  checking: namespace: CLONE_NEWPID... yes 
> > >  checking: namespace: CLONE_FS... yes 
> > >  checking: namespace: CLONE_NEWNS... yes 
> > >  checking: namespace: CLONE_NEWUSER... yes 
> > >  checking: namespace: CLONE_NEWIPC... yes 
> > >  checking: namespace: CLONE_NEWNET... yes 
> > >  checking: namespace: CLONE_NEWUTS... yes 
> > >  checking: namespace: CLONE_NEWCGROUP... no 
> > >  checking: feature: NO_NEW_PRIVS... yes 
> > >  checking: feature: MS_SLAVE... yes 
> > >  checking: feature: MS_REC... yes 
> > >  checking: feature: MS_PRIVATE... yes 
> > >  checking: user capabilities... no 
> > >  checking: header linux/securebits.h... no 
> > >  checking: header linux/capability.h... yes 
> > >  checking: function setns... no 
> > >  checking: libssl+headers... yes 
> > >  checking: libuuid+headers... yes 
> > >  checking: libseccomp+headers... no 
> > > INFO: userns and disable_suid are disabled. 
> (mlocal/checks/basechecks.chk) 
> > > => generating fragments ... 
> > >  found build modules: 
> > >    +-> internal/pkg/runtime/c/lib/util/util.mconf 
> > > => building Makefile ... 
> > > => generating singularity.spec ... 
> > > => project setup with : 
> > >     - target arch: x86_64 
> > >     - target compiler: cc 
> > >     - target wordsize: 64-bit 
> > >     - host arch: x86_64 
> > >     - host wordsize: 64-bit 
> > >     - host system: unix 
> > >     - config profile: release 
> > >     - verbose: no 
> > > => builddir/Makefile ready, try: 
> > >    $ cd builddir 
> > >    $ make 
> > > + cd builddir 
> > > + make old_config= 
> > >  CC internal/pkg/runtime/c/lib/util/capability.c 
> > >  CC internal/pkg/runtime/c/lib/util/message.c 
> > >  CC internal/pkg/runtime/c/lib/util/setns.c 
> > >  AR internal/pkg/runtime/c/lib/util/libutil.a 
> > >  CSCOPE 
> > >  DEPENDS 
> > >  AR lib/libruntime.a 
> > > go: unknown subcommand "generate" 
> > > Run 'go help' for usage. 
> > > make: *** [/root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/ 
> > > github.com/sylabs/singularity/internal/pkg/buildcfg/config.go] Error 
> 2 
> > > error: Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%build) 
> > > 
> > > 
> > > RPM build errors: 
> > >     Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%build) 
> > > 
> > > 
> > 
> > -- 
> > You received this message because you are subscribed to the Google 
> Groups "singularity" group. 
> > To unsubscribe from this group and stop receiving emails from it, send 
> an email to singu...@lbl.gov <javascript:>. 
>
>
------=_Part_2794_554970573.1548247994149
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>Perfect solution for me Dave.=C2=A0 I&#39;m hopeful t=
o steer our cluster to a modern setup at some point soon.=C2=A0 Thanks for =
this tip.</div><div><br></div><div>Richard<br></div><br>On Tuesday, January=
 22, 2019 at 6:25:18 PM UTC-5, Dave Dykstra wrote:<blockquote class=3D"gmai=
l_quote" style=3D"margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid;=
padding-left: 1ex;">Richard,
<br>
<br>The build process was updated so that it could work on completely close=
d
<br>environments, with no access to network at all, and so that it would
<br>work on many different architectures. =C2=A0The previous method of
<br>downloading a golang installation for the x86_64 architecture was a
<br>non-starter on the fedora build system for both of those reasons. =C2=
=A0It
<br>was a very non-standard way of doing things. =C2=A0Requiring installing=
 the
<br>rpm from EPEL is actually a much easier way to go on build machines, an=
d
<br>the resultant singularity rpm has no requirement for a golang runtime
<br>rpm, so I think this is just the way it&#39;s going to be from now on.
<br>
<br>If you still really wanted to avoid installing the EPEL golang rpm, an
<br>alternative would be to make your own essentially empty rpm that says i=
t
<br>Provides: golang, install that instead, and make sure that &#39;go&#39;=
 is in
<br>your PATH. =C2=A0 I don&#39;t see what advantage that would be for you =
though,
<br>because you&#39;d still need to install an rpm.
<br>
<br>Dave
<br>
<br>On Tue, Jan 22, 2019 at 01:02:52PM -0800, Richard Powell wrote:
<br>&gt; Update on this topic. =C2=A0One fix I found was to update the rpm&=
#39;s for golang. =C2=A0
<br>&gt; Since I&#39;m on a dev box, I&#39;m ok with that, but I&#39;d rath=
er find a way to=20
<br>&gt; build the rpm using our golang installed on /nfs. =C2=A0Let me kno=
w if that is a=20
<br>&gt; possibility. =C2=A0Thanks much.
<br>&gt; rpm -qa | grep golang
<br>&gt; golang-src-1.11.4-1.el6.noarch
<br>&gt; golang-bin-1.11.4-1.el6.x86_64
<br>&gt; golang-1.11.4-1.el6.x86_64
<br>&gt;=20
<br>&gt;=20
<br>&gt;=20
<br>&gt; go version
<br>&gt; go version go1.11.4 linux/amd64
<br>&gt; env | grep go
<br>&gt; GOPATH=3D/root/go
<br>&gt; rpmbuild -tb singularity-3.0.3.tar.gz
<br>&gt; Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.eQId5o
<br>&gt; + umask 022
<br>&gt; + cd /root/rpmbuild/BUILD
<br>&gt; + LANG=3DC
<br>&gt; + export LANG
<br>&gt; + unset DISPLAY
<br>&gt; + rm -rf singularity-3.0.3
<br>&gt; + mkdir singularity-3.0.3
<br>&gt; + exit 0
<br>&gt; Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.6ouPIr
<br>&gt; + umask 022
<br>&gt; + cd /root/rpmbuild/BUILD
<br>&gt; + LANG=3DC
<br>&gt; + export LANG
<br>&gt; + unset DISPLAY
<br>&gt; + cd singularity-3.0.3
<br>&gt; + mkdir -p gopath/src/<a href=3D"http://github.com/sylabs/singular=
ity" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;htt=
p://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\=
x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;r=
eturn true;" onclick=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhtt=
p%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x26usg\=
x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true;">github.com/sylabs/=
<wbr>singularity</a>
<br>&gt; + tar -C gopath/src/<a href=3D"http://github.com/sylabs/" target=
=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.goo=
gle.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2F\x26sa\x3dD\x26sntz\x3d=
1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhxRsfI5IQ&#39;;return true;" onclick=
=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com=
%2Fsylabs%2F\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhxR=
sfI5IQ&#39;;return true;">github.com/sylabs/</a> -xf /root/singularity-3.0.=
3.tar.gz
<br>&gt; + export GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopa=
th
<br>&gt; + GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath
<br>&gt; + export=20
<br>&gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wb=
r>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/i=
fort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/s=
bin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin
<br>&gt; +=20
<br>&gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wb=
r>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/i=
fort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/s=
bin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin
<br>&gt; + cd=20
<br>&gt; /root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/src/<a href=3D"=
http://github.com/sylabs/singularity" target=3D"_blank" rel=3D"nofollow" on=
mousedown=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fg=
ithub.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGh=
yKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true;" onclick=3D"this.href=3D&#39;h=
ttp://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularit=
y\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;=
;return true;">g<wbr>ithub.com/sylabs/singularity</a>
<br>&gt; + ./mconfig -V 3.0.3-1.el6 --prefix=3D/usr --exec-prefix=3D/usr=20
<br>&gt; --bindir=3D/usr/bin --libexecdir=3D/usr/libexec --sysconfdir=3D/et=
c=20
<br>&gt; --sharedstatedir=3D/var/lib --localstatedir=3D/var --libdir=3D/usr=
/lib64
<br>&gt; =3D&gt; running base system checks ...
<br>&gt; =C2=A0checking: host C compiler... cc
<br>&gt; =C2=A0checking: host C++ compiler... c++
<br>&gt; =C2=A0checking: host `ar&#39; path... ar
<br>&gt; =C2=A0checking: host `ld&#39; path... ld
<br>&gt; =C2=A0checking: host `ranlib&#39; path... ranlib
<br>&gt; =C2=A0checking: host `objcopy&#39; path... objcopy
<br>&gt; =C2=A0checking: target C compiler... cc
<br>&gt; =C2=A0checking: target C++ compiler... c++
<br>&gt; =C2=A0checking: target `ar&#39; path... ar
<br>&gt; =C2=A0checking: target `ld&#39; path... ld
<br>&gt; =C2=A0checking: target `ranlib&#39; path... ranlib
<br>&gt; =C2=A0checking: target `objcopy&#39; path... objcopy
<br>&gt; =C2=A0checking: host compiles static binaries... yes
<br>&gt; =C2=A0checking: target compiles static binaries... yes
<br>&gt; =C2=A0checking: host os type... unix
<br>&gt; =C2=A0checking: host architecture... x86_64
<br>&gt; =C2=A0checking: target architecture... x86_64
<br>&gt; =C2=A0checking: host architecture word size... 64
<br>&gt; =C2=A0checking: target architecture word size... 64
<br>&gt; =3D&gt; running project specific checks ...
<br>&gt; =C2=A0checking: namespace: CLONE_NEWPID... yes
<br>&gt; =C2=A0checking: namespace: CLONE_FS... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWNS... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWUSER... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWIPC... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWNET... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWUTS... yes
<br>&gt; =C2=A0checking: namespace: CLONE_NEWCGROUP... no
<br>&gt; =C2=A0checking: feature: NO_NEW_PRIVS... yes
<br>&gt; =C2=A0checking: feature: MS_SLAVE... yes
<br>&gt; =C2=A0checking: feature: MS_REC... yes
<br>&gt; =C2=A0checking: feature: MS_PRIVATE... yes
<br>&gt; =C2=A0checking: user capabilities... no
<br>&gt; =C2=A0checking: header linux/securebits.h... no
<br>&gt; =C2=A0checking: header linux/capability.h... yes
<br>&gt; =C2=A0checking: function setns... no
<br>&gt; =C2=A0checking: libssl+headers... yes
<br>&gt; =C2=A0checking: libuuid+headers... yes
<br>&gt; =C2=A0checking: libseccomp+headers... no
<br>&gt; INFO: userns and disable_suid are disabled. (mlocal/checks/baseche=
cks.chk)
<br>&gt; =3D&gt; generating fragments ...
<br>&gt; =C2=A0found build modules:
<br>&gt; =C2=A0 =C2=A0+-&gt; internal/pkg/runtime/c/lib/<wbr>util/util.mcon=
f
<br>&gt; =3D&gt; building Makefile ...
<br>&gt; =3D&gt; generating singularity.spec ...
<br>&gt; =3D&gt; project setup with :
<br>&gt; =C2=A0 =C2=A0 - target arch: x86_64
<br>&gt; =C2=A0 =C2=A0 - target compiler: cc
<br>&gt; =C2=A0 =C2=A0 - target wordsize: 64-bit
<br>&gt; =C2=A0 =C2=A0 - host arch: x86_64
<br>&gt; =C2=A0 =C2=A0 - host wordsize: 64-bit
<br>&gt; =C2=A0 =C2=A0 - host system: unix
<br>&gt; =C2=A0 =C2=A0 - config profile: release
<br>&gt; =C2=A0 =C2=A0 - verbose: no
<br>&gt; =3D&gt; builddir/Makefile ready, try:
<br>&gt; =C2=A0 =C2=A0$ cd builddir
<br>&gt; =C2=A0 =C2=A0$ make
<br>&gt; + cd builddir
<br>&gt; + make old_config=3D
<br>&gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/capability.c
<br>&gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/message.c
<br>&gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/setns.c
<br>&gt; =C2=A0AR internal/pkg/runtime/c/lib/<wbr>util/libutil.a
<br>&gt; =C2=A0CSCOPE
<br>&gt; =C2=A0DEPENDS
<br>&gt; =C2=A0AR lib/libruntime.a
<br>&gt; =C2=A0GO singularity
<br>&gt; =C2=A0GEN singularity.conf
<br>&gt; =C2=A0GO clean -cache
<br>&gt; =C2=A0GO cmd/starter/c/starter
<br>&gt; =C2=A0CNI PLUGIN bandwidth
<br>&gt; =C2=A0CNI PLUGIN bridge
<br>&gt; =C2=A0CNI PLUGIN dhcp
<br>&gt; =C2=A0CNI PLUGIN flannel
<br>&gt; =C2=A0CNI PLUGIN host-device
<br>&gt; =C2=A0CNI PLUGIN host-local
<br>&gt; =C2=A0CNI PLUGIN ipvlan
<br>&gt; =C2=A0CNI PLUGIN macvlan
<br>&gt; =C2=A0CNI PLUGIN portmap
<br>&gt; =C2=A0CNI PLUGIN ptp
<br>&gt; =C2=A0CNI PLUGIN static
<br>&gt; =C2=A0CNI PLUGIN tuning
<br>&gt; =C2=A0CNI PLUGIN vlan
<br>&gt; + exit 0
<br>&gt; Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.mAEbP3
<br>&gt; + umask 022
<br>&gt; + cd /root/rpmbuild/BUILD
<br>&gt; + &#39;[&#39; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el=
6.x86_64 &#39;!=3D&#39; / &#39;]&#39;
<br>&gt; + rm -rf /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86=
_64
<br>&gt; ++ dirname /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x=
86_64
<br>&gt; + mkdir -p /root/rpmbuild/BUILDROOT
<br>&gt; + mkdir /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_=
64
<br>&gt; + LANG=3DC
<br>&gt; + export LANG
<br>&gt; + unset DISPLAY
<br>&gt; + cd singularity-3.0.3
<br>&gt; + export GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopa=
th
<br>&gt; + GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath
<br>&gt; + export=20
<br>&gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wb=
r>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/i=
fort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/s=
bin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin
<br>&gt; +=20
<br>&gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wb=
r>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/i=
fort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/s=
bin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin
<br>&gt; + cd=20
<br>&gt; /root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/src/<a href=3D"=
http://github.com/sylabs/singularity/builddir" target=3D"_blank" rel=3D"nof=
ollow" onmousedown=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%=
3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity%2Fbuilddir\x26sa\x3dD\x26sntz\x3d=
1\x26usg\x3dAFQjCNEhNmSusSkgeH9LCSChbjvB1SoOPg&#39;;return true;" onclick=
=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com=
%2Fsylabs%2Fsingularity%2Fbuilddir\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCN=
EhNmSusSkgeH9LCSChbjvB1SoOPg&#39;;return true;">g<wbr>ithub.com/sylabs/sing=
ularity/<wbr>builddir</a>
<br>&gt; + mkdir -p=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/share/man/man1
<br>&gt; + make DESTDIR=3D/root/rpmbuild/<wbr>BUILDROOT/singularity-3.0.3-1=
.<wbr>el6.x86_64=20
<br>&gt; install man
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/bin/singularity
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter
<br>&gt; =C2=A0INSTALL SUID=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter-suid
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
var/singularity/mnt/session
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/<wbr>singularity.conf
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/bin/run-singularity
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/capability.<wbr>json
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/ecl.toml
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/bash_completion.d/<wbr>singularity
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/bandwidth
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/bridge
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/dhcp
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/flannel
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/host-device
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/host-local
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/ipvlan
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/macvlan
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/portmap
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/ptp
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/static
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/tuning
<br>&gt; =C2=A0INSTALL CNI PLUGIN=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/vlan
<br>&gt; =C2=A0INSTALL CNI CONFIGURATION FILES
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/seccomp-<wbr>profiles/default.json
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/nvliblist.<wbr>conf
<br>&gt; =C2=A0INSTALL=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/cgroups/<wbr>cgroups.toml
<br>&gt; =C2=A0DONE
<br>&gt; INFO =C2=A0 =C2=A0[U=3D0,P=3D374372] =C2=A0 =C2=A0 main() =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0Creating=20
<br>&gt; Singularity man pages at=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/share/man/man1
<br>&gt; + chmod 644=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions/<wbr>exec=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions/run=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions/<wbr>shell=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions/<wbr>start=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
etc/singularity/actions/<wbr>test
<br>&gt; + /usr/lib/rpm/find-debuginfo.sh --strict-build-id /root/rpmbuild/=
BUILD/
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/macvlan
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/portmap
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/host-device
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/bridge
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/dhcp
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/static
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/tuning
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/ptp
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/flannel
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/ipvlan
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/host-local
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/bandwidth
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>cni/vlan
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter
<br>&gt; /usr/lib/rpm/debugedit:=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter:=20
<br>&gt; Unknown debugging section .debug_gdb_scripts
<br>&gt; /usr/lib/rpm/debugedit:=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter:=20
<br>&gt; .debug_line CU does not fit into section
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter-suid
<br>&gt; /usr/lib/rpm/debugedit:=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter-suid:=20
<br>&gt; Unknown debugging section .debug_gdb_scripts
<br>&gt; /usr/lib/rpm/debugedit:=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/libexec/singularity/<wbr>bin/starter-suid:=20
<br>&gt; .debug_line CU does not fit into section
<br>&gt; *** WARNING: identical binaries are copied, not linked:
<br>&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 /usr/libexec/singularity/bin/<wbr>star=
ter-suid
<br>&gt; =C2=A0 =C2=A0and =C2=A0/usr/libexec/singularity/bin/<wbr>starter
<br>&gt; extracting debug info from=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_<wbr>64/=
usr/bin/singularity
<br>&gt; cpio: /tmp/go-build: Cannot stat: No such file or directory
<br>&gt; 3533 blocks
<br>&gt; + /usr/lib/rpm/check-buildroot
<br>&gt; + /usr/lib/rpm/redhat/brp-<wbr>compress
<br>&gt; + /usr/lib/rpm/redhat/brp-strip-<wbr>static-archive /usr/bin/strip
<br>&gt; + /usr/lib/rpm/redhat/brp-strip-<wbr>comment-note /usr/bin/strip /=
usr/bin/objdump
<br>&gt; + /usr/lib/rpm/brp-python-<wbr>bytecompile
<br>&gt; + /usr/lib/rpm/redhat/brp-<wbr>python-hardlink
<br>&gt; + /usr/lib/rpm/redhat/brp-java-<wbr>repack-jars
<br>&gt; Processing files: singularity-3.0.3-1.el6.x86_64
<br>&gt; warning: File listed twice: /etc/singularity/actions/exec
<br>&gt; warning: File listed twice: /etc/singularity/actions/run
<br>&gt; warning: File listed twice: /etc/singularity/actions/shell
<br>&gt; warning: File listed twice: /etc/singularity/actions/start
<br>&gt; warning: File listed twice: /etc/singularity/actions/test
<br>&gt; Provides: config(singularity) =3D 3.0.3-1.el6 singularity-runtime
<br>&gt; Requires(rpmlib): rpmlib(CompressedFileNames) &lt;=3D 3.0.4-1=20
<br>&gt; rpmlib(FileDigests) &lt;=3D 4.6.0-1 rpmlib(PayloadFilesHavePrefix)=
 &lt;=3D 4.0-1
<br>&gt; Requires: /bin/sh libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit)=
=20
<br>&gt; libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit)=20
<br>&gt; libc.so.6(GLIBC_2.4)(64bit) libc.so.6(GLIBC_2.7)(64bit) libdl.so.2=
()(64bit)=20
<br>&gt; libdl.so.2(GLIBC_2.2.5)(64bit) libpthread.so.0()(64bit)=20
<br>&gt; libpthread.so.0(GLIBC_2.2.5)(<wbr>64bit) libpthread.so.0(GLIBC_2.3=
.2)(<wbr>64bit)=20
<br>&gt; rtld(GNU_HASH)
<br>&gt; Obsoletes: singularity-runtime
<br>&gt; Processing files: singularity-debuginfo-3.0.3-1.<wbr>el6.x86_64
<br>&gt; Checking for unpackaged file(s): /usr/lib/rpm/check-files=20
<br>&gt; /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86_64
<br>&gt; Wrote: /root/rpmbuild/RPMS/x86_64/<wbr>singularity-3.0.3-1.el6.x86=
_<wbr>64.rpm
<br>&gt; Wrote:=20
<br>&gt; /root/rpmbuild/RPMS/x86_64/<wbr>singularity-debuginfo-3.0.3-1.<wbr=
>el6.x86_64.rpm
<br>&gt; Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.K11Z8n
<br>&gt; + umask 022
<br>&gt; + cd /root/rpmbuild/BUILD
<br>&gt; + rm -rf /root/rpmbuild/BUILDROOT/<wbr>singularity-3.0.3-1.el6.x86=
_64
<br>&gt; + exit 0
<br>&gt;=20
<br>&gt; ls -lat rpmbuild/RPMS/x86_64/
<br>&gt; total 43424
<br>&gt; -rw-r--r-- 1 root root 18417700 Jan 22 15:57=20
<br>&gt; singularity-debuginfo-3.0.3-1.<wbr>el6.x86_64.rpm
<br>&gt; drwxr-xr-x 2 root root =C2=A0 =C2=A0 4096 Jan 22 15:57 .
<br>&gt; -rw-r--r-- 1 root root 26037820 Jan 22 15:57=20
<br>&gt; singularity-3.0.3-1.el6.x86_<wbr>64.rpm
<br>&gt; drwxr-xr-x 3 root root =C2=A0 =C2=A0 4096 Jan 22 15:56 ..
<br>&gt;=20
<br>&gt;=20
<br>&gt; On Tuesday, January 22, 2019 at 3:19:59 PM UTC-5, Richard Powell w=
rote:
<br>&gt; &gt;
<br>&gt; &gt; Last month, and previous months, I was able to build the rpm =
for=20
<br>&gt; &gt; Singularity with ease after having our security team open a h=
ole in the=20
<br>&gt; &gt; proxy. =C2=A0This process no longer works a singularity v3.0.=
3. =C2=A0I miss last=20
<br>&gt; &gt; month&#39;s strategy now for building rpms! =C2=A0Is there a =
path to success if I&#39;m=20
<br>&gt; &gt; strapped with a centralized golang install and I simply need =
to build rpms=20
<br>&gt; &gt; without access to git? =C2=A0Please advise on how to build rp=
m with only access=20
<br>&gt; &gt; to google.dl golang or old local golang.
<br>&gt; &gt;
<br>&gt; &gt; On our RHEL6, the following is all I needed to do and the scr=
ipt would=20
<br>&gt; &gt; wget to google.dl for latest golang and all worked well.
<br>&gt; &gt; rpmbuild -tb singularity-3.0.2.tar.gz
<br>&gt; &gt;
<br>&gt; &gt; Now, on same RHEL6 server, the script does not attempt to wge=
t golang and=20
<br>&gt; &gt; instead (perhaps) looks for golang package install, which I d=
idn&#39;t=20
<br>&gt; &gt; initially have. =C2=A0Our install of golang, however, is not =
installed via rpm=20
<br>&gt; &gt; and is on a centralized /nfs mount point to which a module en=
vironment file=20
<br>&gt; &gt; sets PATH and GOROOT and I set GOPATH on the terminal.
<br>&gt; &gt; ------------------------------<wbr>---first failed attempt us=
ing our=20
<br>&gt; &gt; centralized golang----------------
<br>&gt; &gt; #1 module load go_1_11_1
<br>&gt; &gt; #2 export GOPATH=3D${HOME}/go
<br>&gt; &gt; #3 env | grep go
<br>&gt; &gt;
<br>&gt; &gt; PATH=3D/nfs/system/golang/go/<wbr>bin:/nfs/system/scripts/:/u=
sr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/ifort/bin/intel64:/<wbr>u=
sr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/sbin:/usr/bin:<wbr>/opt/p=
bs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin
<br>&gt; &gt; _LMFILES_=3D/nfs/system/envir_<wbr>modulefiles/go_1_11_1
<br>&gt; &gt; LOADEDMODULES=3Dgo_1_11_1
<br>&gt; &gt; GOROOT=3D/nfs/system/golang/go
<br>&gt; &gt; GOPATH=3D/root/go
<br>&gt; &gt; #4 rpmbuild -tb singularity-3.0.3.tar.gz
<br>&gt; &gt; #5 failed result below:
<br>&gt; &gt; rpmbuild -tb singularity-3.0.3.tar.gz
<br>&gt; &gt; error: Failed build dependencies:
<br>&gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 golang is needed by singularity-3=
.0.3-1.el6.x86_64
<br>&gt; &gt; --------------------end of first attempt---------------------=
--<wbr>----
<br>&gt; &gt;
<br>&gt; &gt; -----------------second failed attempt with RHEL6 EPEL=20
<br>&gt; &gt; golang------------------------<wbr>---
<br>&gt; &gt; When above failed, I installed golang via rpm from epel, but =
it&#39;s old and=20
<br>&gt; &gt; gave the following issue:
<br>&gt; &gt; rpm -qa | grep golang
<br>&gt; &gt; golang-src-1.3.3-1.el6.noarch
<br>&gt; &gt; golang-pkg-bin-linux-amd64-1.<wbr>3.3-1.el6.x86_64
<br>&gt; &gt; golang-1.3.3-1.el6.x86_64
<br>&gt; &gt; golang-pkg-linux-amd64-1.3.3-<wbr>1.el6.noarch
<br>&gt; &gt;
<br>&gt; &gt; Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.DNm3VF
<br>&gt; &gt; + umask 022
<br>&gt; &gt; + cd /root/rpmbuild/BUILD
<br>&gt; &gt; + LANG=3DC
<br>&gt; &gt; + export LANG
<br>&gt; &gt; + unset DISPLAY
<br>&gt; &gt; + rm -rf singularity-3.0.3
<br>&gt; &gt; + mkdir singularity-3.0.3
<br>&gt; &gt; + exit 0
<br>&gt; &gt; Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.WJLNPo
<br>&gt; &gt; + umask 022
<br>&gt; &gt; + cd /root/rpmbuild/BUILD
<br>&gt; &gt; + LANG=3DC
<br>&gt; &gt; + export LANG
<br>&gt; &gt; + unset DISPLAY
<br>&gt; &gt; + cd singularity-3.0.3
<br>&gt; &gt; + mkdir -p gopath/src/<a href=3D"http://github.com/sylabs/sin=
gularity" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#3=
9;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingula=
rity\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#=
39;;return true;" onclick=3D"this.href=3D&#39;http://www.google.com/url?q\x=
3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x2=
6usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true;">github.com/sy=
labs/<wbr>singularity</a>
<br>&gt; &gt; + tar -C gopath/src/<a href=3D"http://github.com/sylabs/" tar=
get=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.=
google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2F\x26sa\x3dD\x26sntz\=
x3d1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhxRsfI5IQ&#39;;return true;" onclic=
k=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.co=
m%2Fsylabs%2F\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhx=
RsfI5IQ&#39;;return true;">github.com/sylabs/</a> -xf /root/singularity-3.0=
.3.tar.gz
<br>&gt; &gt; + export GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3=
/gopath
<br>&gt; &gt; + GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath
<br>&gt; &gt; + export=20
<br>&gt; &gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin=
:/<wbr>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fort=
ran/ifort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/=
usr/sbin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/roo=
t/bin
<br>&gt; &gt; +=20
<br>&gt; &gt; PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin=
:/<wbr>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fort=
ran/ifort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/=
usr/sbin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/roo=
t/bin
<br>&gt; &gt; + cd /root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/src/
<br>&gt; &gt; <a href=3D"http://github.com/sylabs/singularity" target=3D"_b=
lank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.google.co=
m/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26snt=
z\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true;" oncl=
ick=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.=
com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvj=
K8ndWENMKusqOlTNYSMQ&#39;;return true;">github.com/sylabs/singularity</a>
<br>&gt; &gt; + ./mconfig -V 3.0.3-1.el6 --prefix=3D/usr --exec-prefix=3D/u=
sr=20
<br>&gt; &gt; --bindir=3D/usr/bin --libexecdir=3D/usr/libexec --sysconfdir=
=3D/etc=20
<br>&gt; &gt; --sharedstatedir=3D/var/lib --localstatedir=3D/var --libdir=
=3D/usr/lib64
<br>&gt; &gt; =3D&gt; running base system checks ...
<br>&gt; &gt; =C2=A0checking: host C compiler... cc
<br>&gt; &gt; =C2=A0checking: host C++ compiler... c++
<br>&gt; &gt; =C2=A0checking: host `ar&#39; path... ar
<br>&gt; &gt; =C2=A0checking: host `ld&#39; path... ld
<br>&gt; &gt; =C2=A0checking: host `ranlib&#39; path... ranlib
<br>&gt; &gt; =C2=A0checking: host `objcopy&#39; path... objcopy
<br>&gt; &gt; =C2=A0checking: target C compiler... cc
<br>&gt; &gt; =C2=A0checking: target C++ compiler... c++
<br>&gt; &gt; =C2=A0checking: target `ar&#39; path... ar
<br>&gt; &gt; =C2=A0checking: target `ld&#39; path... ld
<br>&gt; &gt; =C2=A0checking: target `ranlib&#39; path... ranlib
<br>&gt; &gt; =C2=A0checking: target `objcopy&#39; path... objcopy
<br>&gt; &gt; =C2=A0checking: host compiles static binaries... yes
<br>&gt; &gt; =C2=A0checking: target compiles static binaries... yes
<br>&gt; &gt; =C2=A0checking: host os type... unix
<br>&gt; &gt; =C2=A0checking: host architecture... x86_64
<br>&gt; &gt; =C2=A0checking: target architecture... x86_64
<br>&gt; &gt; =C2=A0checking: host architecture word size... 64
<br>&gt; &gt; =C2=A0checking: target architecture word size... 64
<br>&gt; &gt; =3D&gt; running project specific checks ...
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWPID... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_FS... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWNS... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWUSER... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWIPC... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWNET... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWUTS... yes
<br>&gt; &gt; =C2=A0checking: namespace: CLONE_NEWCGROUP... no
<br>&gt; &gt; =C2=A0checking: feature: NO_NEW_PRIVS... yes
<br>&gt; &gt; =C2=A0checking: feature: MS_SLAVE... yes
<br>&gt; &gt; =C2=A0checking: feature: MS_REC... yes
<br>&gt; &gt; =C2=A0checking: feature: MS_PRIVATE... yes
<br>&gt; &gt; =C2=A0checking: user capabilities... no
<br>&gt; &gt; =C2=A0checking: header linux/securebits.h... no
<br>&gt; &gt; =C2=A0checking: header linux/capability.h... yes
<br>&gt; &gt; =C2=A0checking: function setns... no
<br>&gt; &gt; =C2=A0checking: libssl+headers... yes
<br>&gt; &gt; =C2=A0checking: libuuid+headers... yes
<br>&gt; &gt; =C2=A0checking: libseccomp+headers... no
<br>&gt; &gt; INFO: userns and disable_suid are disabled. (mlocal/checks/ba=
sechecks.chk)
<br>&gt; &gt; =3D&gt; generating fragments ...
<br>&gt; &gt; =C2=A0found build modules:
<br>&gt; &gt; =C2=A0 =C2=A0+-&gt; internal/pkg/runtime/c/lib/<wbr>util/util=
.mconf
<br>&gt; &gt; =3D&gt; building Makefile ...
<br>&gt; &gt; =3D&gt; generating singularity.spec ...
<br>&gt; &gt; =3D&gt; project setup with :
<br>&gt; &gt; =C2=A0 =C2=A0 - target arch: x86_64
<br>&gt; &gt; =C2=A0 =C2=A0 - target compiler: cc
<br>&gt; &gt; =C2=A0 =C2=A0 - target wordsize: 64-bit
<br>&gt; &gt; =C2=A0 =C2=A0 - host arch: x86_64
<br>&gt; &gt; =C2=A0 =C2=A0 - host wordsize: 64-bit
<br>&gt; &gt; =C2=A0 =C2=A0 - host system: unix
<br>&gt; &gt; =C2=A0 =C2=A0 - config profile: release
<br>&gt; &gt; =C2=A0 =C2=A0 - verbose: no
<br>&gt; &gt; =3D&gt; builddir/Makefile ready, try:
<br>&gt; &gt; =C2=A0 =C2=A0$ cd builddir
<br>&gt; &gt; =C2=A0 =C2=A0$ make
<br>&gt; &gt; + cd builddir
<br>&gt; &gt; + make old_config=3D
<br>&gt; &gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/capability.c
<br>&gt; &gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/message.c
<br>&gt; &gt; =C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/setns.c
<br>&gt; &gt; =C2=A0AR internal/pkg/runtime/c/lib/<wbr>util/libutil.a
<br>&gt; &gt; =C2=A0CSCOPE
<br>&gt; &gt; =C2=A0DEPENDS
<br>&gt; &gt; =C2=A0AR lib/libruntime.a
<br>&gt; &gt; go: unknown subcommand &quot;generate&quot;
<br>&gt; &gt; Run &#39;go help&#39; for usage.
<br>&gt; &gt; make: *** [/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath=
/src/
<br>&gt; &gt; <a href=3D"http://github.com/sylabs/singularity/internal/pkg/=
buildcfg/config.go" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.=
href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs=
%2Fsingularity%2Finternal%2Fpkg%2Fbuildcfg%2Fconfig.go\x26sa\x3dD\x26sntz\x=
3d1\x26usg\x3dAFQjCNFDxCY14SUyORJSfXIA4YNcOkWHOA&#39;;return true;" onclick=
=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com=
%2Fsylabs%2Fsingularity%2Finternal%2Fpkg%2Fbuildcfg%2Fconfig.go\x26sa\x3dD\=
x26sntz\x3d1\x26usg\x3dAFQjCNFDxCY14SUyORJSfXIA4YNcOkWHOA&#39;;return true;=
">github.com/sylabs/singularity/<wbr>internal/pkg/buildcfg/config.<wbr>go</=
a>] Error 2
<br>&gt; &gt; error: Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%build)
<br>&gt; &gt;
<br>&gt; &gt;
<br>&gt; &gt; RPM build errors:
<br>&gt; &gt; =C2=A0 =C2=A0 Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%=
build)
<br>&gt; &gt;
<br>&gt; &gt;
<br>&gt;=20
<br>&gt; --=20
<br>&gt; You received this message because you are subscribed to the Google=
 Groups &quot;singularity&quot; group.
<br>&gt; To unsubscribe from this group and stop receiving emails from it, =
send an email to <a href=3D"javascript:" target=3D"_blank" gdf-obfuscated-m=
ailto=3D"QUnDG1a9FQAJ" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;jav=
ascript:&#39;;return true;" onclick=3D"this.href=3D&#39;javascript:&#39;;re=
turn true;">singularity...@lbl.<wbr>gov</a>.
<br>
<br></blockquote></div>
------=_Part_2794_554970573.1548247994149--

------=_Part_2793_863789276.1548247994148--
