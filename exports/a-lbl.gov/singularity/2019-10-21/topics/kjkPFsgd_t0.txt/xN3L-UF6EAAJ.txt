X-Received: by 2002:a17:90a:1b0d:: with SMTP id q13mr3892696pjq.102.1566993213149;
        Wed, 28 Aug 2019 04:53:33 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 2002:a17:902:7081:: with SMTP id z1ls802534plk.16.gmail; Wed, 28
 Aug 2019 04:53:30 -0700 (PDT)
X-Received: by 2002:a17:902:2be4:: with SMTP id l91mr3853351plb.140.1566993210549;
        Wed, 28 Aug 2019 04:53:30 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1566993210; cv=none;
        d=google.com; s=arc-20160816;
        b=pY0tJzsBGPm5/wknslKyt+lPwJ2PunGPTaZyWKUOjTuwWqChy5aF6jpMWNNGm9/iW3
         HJcoyxYmcmo8UCTpVjtouBkCoMeO/JKAMSTRx6XyePxUoDIHGgvVfg+6rbmdOc4FyLyf
         Twz54zD4BeBBJWE2vSL9vLsEY18kN71bzaM8vGqcEsxJz/Lsw+WYZHfxMWzAIp6FGfuC
         UGfUpWVRVmRxlvWxhCfVG6vu3ajyBXBrxMEmulBgpDfqafg92ideOqgIt7NwUDlNTxgR
         A8tkbpHhVW5jAFHk5HYKJeQmUz7jbjl+a12zYCG2XD3BzUaquWfQNpa5QUWdsjq3cdiT
         6P+w==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=in-reply-to:mime-version:user-agent:date:message-id:organization
         :from:references:to:subject:ironport-sdr;
        bh=5ESPjVtZtMlIDLUMs+xZ2aPU2Vkfbl+SPbSuXdf6jqA=;
        b=nQ7gx7Vl7X4N/BTt6pPXU3WPt8Iy7kIRLnophuXlNdvGspYrpI3FnK+wmaq6hpzILr
         OsgBRSmtST+ShDdxPdzA97sgKZy+3KHAKjlhht/XQKDoqO30xdXUkqJbmjmgQ97Vm/Jn
         YtgGkyGTGRTkHvejHfU35HqVrSkiYLMR2foghJ9JEArqFUuox3KT3ZkflstxIgEb/x5d
         K1n29LTX5mtMEduOcVC/CMIo2fvhvcwOBgm/f2LG3EivdS8eDDwiHmWmpmycIRoYkl5K
         tyEEnMrcMrIRHMN1twrlCPVwTxOBEYgRqR1y6oUYMei9AoFgALhdWQ1rSksdvv3eYd1w
         Ktsw==
ARC-Authentication-Results: i=1; mx.google.com;
       spf=pass (google.com: domain of jo...@fzu.cz designates 147.231.27.10 as permitted sender) smtp.mailfrom=jo...@fzu.cz
Return-Path: <jo...@fzu.cz>
Received: from fe3.lbl.gov (fe3.lbl.gov. [131.243.228.52])
        by mx.google.com with ESMTP id d5si1761284pla.93.2019.08.28.04.53.29
        for <singu...@lbl.gov>;
        Wed, 28 Aug 2019 04:53:29 -0700 (PDT)
Received-SPF: pass (google.com: domain of jo...@fzu.cz designates 147.231.27.10 as permitted sender) client-ip=147.231.27.10;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of jo...@fzu.cz designates 147.231.27.10 as permitted sender) smtp.mailfrom=jo...@fzu.cz
X-Ironport-SBRS: 2.5
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0FmAAC7aWZdfQob55NlHgEGBwaBUwkLA?=
 =?us-ascii?q?YFtgRdTMiqEGgeDSos5UAEBAQaBESWDaoYEhUSJZhSBEAMYNAQECQEBAQEBAQE?=
 =?us-ascii?q?BAQMFGAEFDgECAQOBAkeCcAICAoJPIzQJDgILAQEBAwEBAQIBBgMBAgIQAQELF?=
 =?us-ascii?q?AiFXgyCdARNagEBAQEBAQEBAQEBAQEBHAIMJz0BAQEBAxoJBCcfGgIJAhUDFgE?=
 =?us-ascii?q?JAQYDAgICFBsVEQ4FAgQBAQEBGQSCNksBJgGBTxQFCo9Pm29/Mx+DWT0BgRSDF?=
 =?us-ascii?q?RuBOQsFBQgBgSYBgVCEEIYHDxh4gQeBEScMgl8+gkgZAgIVA4EUAQ4DAgEHAS0?=
 =?us-ascii?q?VHAKCQYJYBIwuCwqBDIkXlCptCYIgghSBIoIngRCFOoNBBIReCBmCMm6KOIsBj?=
 =?us-ascii?q?yKGADmMUIQagVBwMHFNODuCbAmBQVQwARaDT4Jkh3E9ATIBAQ52AQGLQw0Xgiw?=
 =?us-ascii?q?BAQ?=
X-IPAS-Result: =?us-ascii?q?A0FmAAC7aWZdfQob55NlHgEGBwaBUwkLAYFtgRdTMiqEGge?=
 =?us-ascii?q?DSos5UAEBAQaBESWDaoYEhUSJZhSBEAMYNAQECQEBAQEBAQEBAQMFGAEFDgECA?=
 =?us-ascii?q?QOBAkeCcAICAoJPIzQJDgILAQEBAwEBAQIBBgMBAgIQAQELFAiFXgyCdARNagE?=
 =?us-ascii?q?BAQEBAQEBAQEBAQEBHAIMJz0BAQEBAxoJBCcfGgIJAhUDFgEJAQYDAgICFBsVE?=
 =?us-ascii?q?Q4FAgQBAQEBGQSCNksBJgGBTxQFCo9Pm29/Mx+DWT0BgRSDFRuBOQsFBQgBgSY?=
 =?us-ascii?q?BgVCEEIYHDxh4gQeBEScMgl8+gkgZAgIVA4EUAQ4DAgEHAS0VHAKCQYJYBIwuC?=
 =?us-ascii?q?wqBDIkXlCptCYIgghSBIoIngRCFOoNBBIReCBmCMm6KOIsBjyKGADmMUIQagVB?=
 =?us-ascii?q?wMHFNODuCbAmBQVQwARaDT4Jkh3E9ATIBAQ52AQGLQw0XgiwBAQ?=
X-IronPort-AV: E=Sophos;i="5.64,441,1559545200"; 
   d="p7s'?scan'208,217";a="166632658"
Received: from pluto.fzu.cz ([147.231.27.10])
  by fe3.lbl.gov with ESMTP; 28 Aug 2019 04:53:26 -0700
IronPort-SDR: aLnAkwQohWFdPYoDUaNF2asZKrKMxV1HGR12r9u4l+PH+ttdawy/6V+uO7CFVgK9d25cPucsBB
 shmhzZUa5Vi/5wr1J3V5mK+XGdh3KHySpKulcGUpwbNK/j5xV+o23dGPkGDNAYCwaY7u5NFlX8
 jXv5lvraEftnOm/c/ivWmLk0RzTwIVNl/ofd+VKMw9Uh86k6KsBcjczgU9z0IptuYo4KPpSjJU
 9tu1yrwgl44weFvUMrMB294rBcSCKLb7bFRFgbYD6pHLGlkXesirZLSMtVXTF6+ij+XCfEx5OA
 kaw=
X-IronPort-AV: E=Sophos;i="5.64,441,1559512800"; 
   d="p7s'?scan'208,217";a="869014"
Received: from freja-slov.fzu.cz ([147.231.27.231])
  by pluto-i.fzu.cz with ESMTP/TLS/ECDHE-RSA-AES128-GCM-SHA256; 28 Aug 2019 13:53:17 +0200
Received: from [10.26.210.62] (s1-062.fzu.cz [10.26.210.62])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by freja-slov.fzu.cz (Postfix) with ESMTPSA id 5433F1043471
	for <singu...@lbl.gov>; Wed, 28 Aug 2019 13:53:17 +0200 (CEST)
Subject: Re: [Singularity] Re: run ssh server in a Singularity container?
To: singularity@lbl.gov
References: <bece7fde-73f0-4b9b-852a-4bd9576cc968@lbl.gov>
 <d74ad067-3c38-40ca-97ab-adeb2a891e7f@lbl.gov>
 <6ab21e43-a743-0bea-fcb5-db42076fb8e0@googlemail.com>
 <ad970876-e884-4823-8a9e-2e049cd927c2@lbl.gov>
 <20190827210322.GA34617@fnal.gov>
 <a5f0ce96-7500-47fc-8d10-52db928278d4@lbl.gov>
From: Josef Dvoracek <jo...@fzu.cz>
Organization: =?UTF-8?B?Rnl6aWvDoWxuw60gw7pzdGF2IEFWIMSMUiwgdi4gdi4gaS4=?=
Message-ID: <76417239-117b-c1d5-cda1-a59711a71ffb@fzu.cz>
Date: Wed, 28 Aug 2019 13:53:17 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <a5f0ce96-7500-47fc-8d10-52db928278d4@lbl.gov>
Content-Type: multipart/signed; protocol="application/pkcs7-signature"; micalg=sha-256; boundary="------------ms030502030008080007000406"

--------------ms030502030008080007000406
Content-Type: multipart/alternative;
 boundary="------------B17580FA8D8B970D944AF12E"
Content-Language: en-US

--------------B17580FA8D8B970D944AF12E
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Transfer-Encoding: quoted-printable

this?

jose@koios2:~/projects/container-recipes/generic_containers$ cat=20
centos7_w_ssh.def
BootStrap: docker
From: centos:7

#singularity file -----------------------
%post
 =C2=A0=C2=A0=C2=A0 yum -y install yum-utils openssh-server

 =C2=A0=C2=A0=C2=A0 ssh-keygen -A

 =C2=A0=C2=A0=C2=A0 #my user:
 =C2=A0=C2=A0=C2=A0 echo "+:jose:ALL" > /etc/security/access.conf
 =C2=A0=C2=A0=C2=A0 # disable root tweaks. Works with openssh7, not with8
 =C2=A0=C2=A0=C2=A0 echo "UsePrivilegeSeparation no" > /etc/ssh/sshd_config

 =C2=A0=C2=A0=C2=A0 find /etc/ssh/ -type d -exec chmod 755 {} +
 =C2=A0=C2=A0=C2=A0 find /etc/ssh/ -type f -exec chmod 644 {} +

#singularity file -----------------------

run with:

singularity exec centos7_w_ssh.sif /usr/sbin/sshd -p 12121 -D -d -e

connect: (as there is automounted home, there is already authorized_keys=20
with my key..)


ssh localhost -p 12121
The authenticity of host '[localhost]:12121 ([::1]:12121)' can't be=20
established.
ECDSA key fingerprint is SHA256:K8gLCw1b9ZicrCXdhh/V68XvuI9bTeHjY3XL3dxuTvk=
.
ECDSA key fingerprint is=20
MD5:40:38:54:e0:95:c3:d1:e9:23:ab:b6:d9:d7:74:6d:36.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '[localhost]:12121' (ECDSA) to the list of=20
known hosts.
Attempt to write login records by non-root user (aborting)
Environment:
 =C2=A0 USER=3Djose
 =C2=A0 LOGNAME=3Djose
 =C2=A0 HOME=3D/home/users/jose
 =C2=A0 PATH=3D/usr/local/bin:/usr/bin
 =C2=A0 MAIL=3D/var/mail/jose
 =C2=A0 SHELL=3D/bin/sh
 =C2=A0 SSH_CLIENT=3D::1 57690 12121
 =C2=A0 SSH_CONNECTION=3D::1 57690 ::1 12121
 =C2=A0 SSH_TTY=3D/dev/pts/17
 =C2=A0 TERM=3Dscreen
-sh-4.2$ Connection to localhost closed by remote host.
Connection to localhost closed.


Josef Dvoracek
Institute of Physics @ Czech Academy of Sciences
cell: +420 608 563 558 | office: +420 266 052 669 | fzu phone nr. : 2669

On 28. 08. 19 10:31, Vang Le Quy wrote:
> Hi Dave
> Thanks for the suggestions. nscenter seems to be an interesting tool.=20
> However, I am not seeing how I can use it with pyCharm to debug python=20
> code running inside the container.
>
> I found some more information thanks to Oliver suggestion about=20
> enabling sshd debug messages. One of missing component for sshd is the=20
> log service:
>
> /usr/sbin/sshd -d
> debug1: sshd version OpenSSH_7.6, OpenSSL 1.0.2n=C2=A0 7 Dec 2017
> debug1: private host key #0: ssh-rsa=20
> SHA256:EDWRBlyyVHfWKk/cAp2CI1GcnN1OLvxrSu8ay4jxQmM
> debug1: private host key #1: ecdsa-sha2-nistp256=20
> SHA256:mMeGj7V1XxyJSkmAKGqNsBYLqVq3C19n0fRkPnEGVpeM
> debug1: private host key #2: ssh-ed25519=20
> SHA256:lN7is7WPx95JBWUjcvj9GSsc44/dZ/X4xVTGJ5YL28M
> debug1: rexec_argv[0]=3D'/usr/sbin/sshd'
> debug1: rexec_argv[1]=3D'-d'
> debug1: Set /proc/self/oom_score_adj from 0 to -1000
> debug1: Bind to port 22 on 0.0.0.0.
> Server listening on 0.0.0.0 port 22.
> debug1: Bind to port 22 on ::.
> Server listening on :: port 22.
> debug1: Server will not fork when running in debugging mode.
> debug1: rexec start in 5 out 5 newsock 5 pipe -1 sock 8
> debug1: inetd sockets after dupping: 3, 3
> Connection from 172.19.8.14 port 51288 on 10.23.0.22 port 22=20
> <=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D Login attempt
> debug1: Client protocol version 2.0; client software version=20
> OpenSSH_7.2p2 Ubuntu-4ubuntu2.8
> debug1: match: OpenSSH_7.2p2 Ubuntu-4ubuntu2.8 pat OpenSSH* compat=20
> 0x04000000
> debug1: Local version string SSH-2.0-OpenSSH_7.6p1 Ubuntu-4ubuntu0.3
> debug1: permanently_set_uid: 105/65534 [preauth]
> permanently_set_uid: was able to restore old [e]gid [preauth]
> debug1: do_cleanup [preauth]
> debug1: monitor_read_log: child log fd closed=20
> <=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3DLooking for log facility, and failed
> debug1: do_cleanup
> debug1: Killing privsep child 50
> debug1: audit_event: unhandled event 12
>
> So I went ahead and run:
>
> Singularity rootfs-409417780:/tmp> service rsyslog start
> =C2=A0* Starting enhanced syslogd rsyslogd mknod: /dev/xconsole: Permissi=
on=20
> denied
> chown: cannot access '/dev/xconsole': No such file or directory
>
> /dev seems to be shared from host:
> ls -lah /dev/ |head
> total 0
> drwxr-xr-x 21 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0 4.0K Jul 26 06:53 .
> drwxr-xr-x 23 root=C2=A0=C2=A0 root=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0 580 Aug 28 10:13 ..
> crw-------=C2=A0 1 nobody nogroup=C2=A0 10, 175 Jul=C2=A0 3 08:50 agpgart
> crw-------=C2=A0 1 nobody nogroup=C2=A0 10, 235 Jul=C2=A0 3 08:50 autofs
> drwxr-xr-x=C2=A0 2 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 400 Jul=
=C2=A0 3 08:50 block
> drwxr-xr-x=C2=A0 2 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 120 Jul=
=C2=A0 3 08:50 bsg
> crw-rw----=C2=A0 1 nobody nogroup=C2=A0 10, 234 Jul=C2=A0 3 08:50 btrfs-c=
ontrol
> lrwxrwxrwx=C2=A0 1 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0 3 Jul=C2=A0 3 08:50 cdrom -> sr0
> lrwxrwxrwx=C2=A0 1 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0 3 Jul=C2=A0 3 08:50 cdrw -> sr0
>
> That means I can't start syslog. Still no go :(
>
> On Tuesday, August 27, 2019 at 11:03:32 PM UTC+2, Dave Dykstra wrote:
>
>     Hi Vang,
>
>     Here's a completely different approach you might like. =C2=A0Instead =
of
>     using
>     ssh inside a container for debugging, from another process on the
>     host
>     you can use "nsenter" to join an existing namespace. =C2=A0For exampl=
e the
>     below script works when a container was started with singularity
>     -c -i -p
>     and an unprivileged user namespace (that is, with -u or no setuid).
>
>     Dave
>
>
>     #!/bin/bash
>     # This assumes singularity was run with -c -i -p using
>     # =C2=A0unprivileged namespaces.
>     # Written by Dave Dykstra, 27 November 2017
>
>     usage()
>     {
>     =C2=A0 =C2=A0 echo "Usage: singularity-attach <pid>" >&2
>     =C2=A0 =C2=A0 exit 1
>     }
>
>     if [ $# !=3D 1 ];then
>     =C2=A0 =C2=A0 usage
>     fi
>
>     if ! kill -0 "$1"; then
>     =C2=A0 =C2=A0 usage
>     fi
>
>     eval exec nsenter -t $1 -U --preserve-credentials -m -i -p -r -w
>     /usr/bin/env \
>     =C2=A0 -i $(xargs -0 bash -c 'printf "%q\n" "$@"' -- </proc/$1/enviro=
n)
>     /bin/bash
>
>
>
>     On Tue, Aug 27, 2019 at 06:08:57AM -0700, Vang Le Quy wrote:
>     > Hi Oliver
>     >
>     > >
>     > > this is exactly what our users do via interactive jobs (but with
>     > > HTCondor). Did you check if this works or can be made to work
>     with Slurm?
>     > > Maybe your admins can offer this?
>     > >
>     > It works with slurm only: Submit interactive job, ssh to the
>     compute node.
>     >
>     > I don't see how an ssh to localhost tests anything related to
>     firewall
>     > > setup?
>     > >
>     > Sorry for the ambiguity. FE and CN are test servers, and
>     therefore no
>     > firewall or extra security is setup. They are all default Ubuntu
>     setup.
>     > Furthermore the network guys at my place control port opening on
>     routers
>     > and switches. So ssh to localhost on FE is sufficient. For
>     direct evidence.
>     > This works for nginx service:
>     > user@FE:~ srun --pty bash -l
>     > user@CN:~ singularity instance start --net
>     > --network-args=3D"portmap=3D2222:80/tcp" --fakeroot nginx.img webte=
st
>     >
>     > I then could visit http://CN:2222
>     >
>     > Did you try to run sshd manually instead of using systemd as I
>     mentioned?
>     > >
>     > I tried after your suggestion. There are several error before
>     sshd really
>     > starts (e.g. missing /var/run/sshd directory, directory
>     permission, etc).
>     > And I still can't connect.
>     >
>     > My conclusion so far is that ssh server requires more things to
>     start up
>     > properly inside singularity. But I don't know exactly what are
>     these things
>     > yet, keep looking ...
>     >
>     >
>     > On Tuesday, August 27, 2019 at 11:34:06 AM UTC+2, Oliver
>     Freyermuth wrote:
>     >
>     > > Hi Vang,
>     > >
>     > > Am 27.08.19 um 11:28 schrieb Vang Le Quy:
>     > > > Hi Thomas and Oliver.
>     > > >
>     > > > I need a full instance of Ubuntu with tensorflow, GPU
>     driver, etc to do
>     > > some machine learning inside the container. The ssh connection
>     will allow
>     > > remote debug functionality for python code with pyCharm. So a
>     light weight
>     > > busybox will not work.
>     > >
>     > > this is exactly what our users do via interactive jobs (but with
>     > > HTCondor). Did you check if this works or can be made to work
>     with Slurm?
>     > > Maybe your admins can offer this?
>     > >
>     > > > Regarding firewall, this reason can be excluded for now,
>     because I
>     > > logged on to the FE and do ssh to localhost.
>     > >
>     > > I don't see how an ssh to localhost tests anything related to
>     firewall
>     > > setup?
>     > >
>     > > > More importantly, the ssh service itself inside the instance
>     is not
>     > > running (see terminal output at the end of my first email). So
>     I must get
>     > > the ssh server up and running inside the instance first.
>     > >
>     > > Did you try to run sshd manually instead of using systemd as I
>     mentioned?
>     > >
>     > > Cheers,
>     > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 Oliver
>     > >
>     > > >
>     > > > Cheers
>     > > > Vang
>     > > >
>     > > > On Tuesday, August 27, 2019 at 9:44:01 AM UTC+2, Vang Le Quy
>     wrote:
>     > > >
>     > > > =C2=A0 =C2=A0 *
>     > > > =C2=A0 =C2=A0 *
>     > > > =C2=A0 =C2=A0 *This is my setup:*
>     > > >
>     > > > =C2=A0 =C2=A0 Laptop (LT) -> slurm front-end(FE) containing
>     Singularity executable
>     > > -> Compute node (CN) with GPUs, and also contains Singularity
>     executable.
>     > > >
>     > > > =C2=A0 =C2=A0 FE and CN share a partition so users can have sha=
red home
>     > > directories between FE and CN.
>     > > >
>     > > > =C2=A0 =C2=A0 Singularity version: 3.3.0
>     > > >
>     > > > =C2=A0 =C2=A0 *Intermediate goal:*
>     > > >
>     > > > =C2=A0 =C2=A0 Start a singularity container/instance on FE, and=
 SSH
>     server service
>     > > therein. Then do SSH from LT into that container.
>     > > >
>     > > > =C2=A0 =C2=A0 *Final Goal:*
>     > > >
>     > > > =C2=A0 =C2=A0 Submit a slurm job from FE which in turn start a
>     Singularity
>     > > container/instance on CN. SSH from LT to that Container on CN
>     via FE
>     > > because users can't logon to CN directly.
>     > > >
>     > > >
>     > > > =C2=A0 =C2=A0 *My try so far:*
>     > > >
>     > > > =C2=A0 =C2=A0 This is my DEF file:
>     > > >
>     > > > =C2=A0 =C2=A0 #############
>     > > > =C2=A0 =C2=A0 Bootstrap: docker
>     > > > =C2=A0 =C2=A0 From: nvidia/tensorflow:19.05-py3
>     > > > =C2=A0 =C2=A0 Registry: nvcr.io <http://nvcr.io> <http://nvcr.i=
o >
>     > > > =C2=A0 =C2=A0 IncludeCmd: yes
>     > > >
>     > > > =C2=A0 =C2=A0 %environment
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0export LANG=3Den_US.UTF-8
>     > > >
>     > > > =C2=A0 =C2=A0 %post
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get update && apt-get ins=
tall -y
>     --no-install-recommends
>     > > apt-utils
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0LANG=3Den_US.UTF-8
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0# Language/locale settings
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0echo $LANG UTF-8 > /etc/local=
e.gen
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get install -y locales &&=
 update-locale --reset
>     LANG=3D$LANG
>     > > >
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get install -y --no-insta=
ll-recommends wget
>     lsb-release
>     > > parallel vim openssh-server
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0systemctl enable ssh
>     > > >
>     > > > =C2=A0 =C2=A0 %startscript
>     > > > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0systemctl start ssh
>     > > > =C2=A0 =C2=A0 ###############
>     > > >
>     > > > =C2=A0 =C2=A0 Build:
>     > > > =C2=A0 =C2=A0 singularity build --fakeroot tensorflow_19.05-py3=
.sif
>     > > Singularity.def
>     > > >
>     > > > =C2=A0 =C2=A0 Run:
>     > > > =C2=A0 =C2=A0 mkdir overlay
>     > > > =C2=A0 =C2=A0 singularity instance start -B /run:/run
>     =C2=A0--writable-tmpfs --overlay
>     > > $PWD/overlay =C2=A0--fakeroot --net
>     --network-args=3D"portmap=3D2222:22/tcp"
>     > > ./tensorflow_19.05-py3.sif sshins
>     > > >
>     > > > =C2=A0 =C2=A0 INFO: =C2=A0 =C2=A0Convert SIF file to sandbox...
>     > > > =C2=A0 =C2=A0 WARNING: Ignoring --writable-tmpfs as it requires
>     overlay support
>     > > > =C2=A0 =C2=A0 Could not watch jobs: Operation not permitted
>     > > >
>     > > > =C2=A0 =C2=A0 INFO: =C2=A0 =C2=A0instance started successfully
>     > > >
>     > > > =C2=A0 =C2=A0 Test ssh server status:
>     > > >
>     > > > =C2=A0 =C2=A0 singularity shell instance://sshins
>     > > > =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp/> whoami
>     > > > =C2=A0 =C2=A0 root
>     > > > =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp> service ssh st=
atus
>     > > > =C2=A0 =C2=A0 Failed to retrieve unit: Access denied
>     > > > =C2=A0 =C2=A0 Failed to get properties: Access denied
>     > > > =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp> ps -ef
>     > > > =C2=A0 =C2=A0 UID =C2=A0 =C2=A0 =C2=A0 =C2=A0 PID =C2=A0 PPID =
=C2=A0C STIME TTY =C2=A0TIME CMD
>     > > > =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A01 =C2=A0 =
=C2=A0 =C2=A00 =C2=A00 07:33 ? =C2=A000:00:00 sinit
>     > > > =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0 25 =C2=A0 =C2=A0=
 =C2=A00 =C2=A00 07:34 pts/27 00:00:00
>     /bin/bash --norc
>     > > > =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0253 =C2=A0 =C2=A0=
 25 =C2=A00 07:35 pts/27 00:00:00 ps -ef
>     > > >
>     > > >
>     > > > =C2=A0 =C2=A0 On FE:
>     > > > =C2=A0 =C2=A0 ssh -p 2222 feuser@localhost
>     > > > =C2=A0 =C2=A0 ssh: connect to host localhost port 2222: Connect=
ion
>     refused
>     > > >
>     > > > =C2=A0 =C2=A0 This is a dead end to me at the moment. Any info =
and
>     suggestions are
>     > > welcome.
>     > > >
>     > > > =C2=A0 =C2=A0 Kind regards
>     > > > =C2=A0 =C2=A0 Vang
>     > > >
>     > > > --
>     > > > You received this message because you are subscribed to the
>     Google
>     > > Groups "singularity" group.
>     > > > To unsubscribe from this group and stop receiving emails
>     from it, send
>     > > an email to si...@lbl.gov <javascript:> <mailto:
>     > > si...@lbl.gov <javascript:> <javascript:>>.
>     > > > To view this discussion on the web visit
>     > >
>     https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c38=
-40ca-97ab-adeb2a891e7f%40lbl.gov
>     <https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c3=
8-40ca-97ab-adeb2a891e7f%40lbl.gov>
>
>     > > <
>     > >
>     https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c38=
-40ca-97ab-adeb2a891e7f%40lbl.gov?utm_medium=3Demail&utm_source=3Dfooter
>     <https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c3=
8-40ca-97ab-adeb2a891e7f%40lbl.gov?utm_medium=3Demail&utm_source=3Dfooter>
>     >.
>     > >
>     > >
>     > >
>     >
>     > --
>     > You received this message because you are subscribed to the
>     Google Groups "singularity" group.
>     > To unsubscribe from this group and stop receiving emails from
>     it, send an email to si...@lbl.gov <javascript:>.
>     > To view this discussion on the web visit
>     https://groups.google.com/a/lbl.gov/d/msgid/singularity/ad970876-e884=
-4823-8a9e-2e049cd927c2%40lbl.gov
>     <https://groups.google.com/a/lbl.gov/d/msgid/singularity/ad970876-e88=
4-4823-8a9e-2e049cd927c2%40lbl.gov>
>     .
>
> --=20
> You received this message because you are subscribed to the Google=20
> Groups "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send=20
> an email to singu...@lbl.gov=20
> <mailto:singu...@lbl.gov>.
> To view this discussion on the web visit=20
> https://groups.google.com/a/lbl.gov/d/msgid/singularity/a5f0ce96-7500-47f=
c-8d10-52db928278d4%40lbl.gov=20
> <https://groups.google.com/a/lbl.gov/d/msgid/singularity/a5f0ce96-7500-47=
fc-8d10-52db928278d4%40lbl.gov?utm_medium=3Demail&utm_source=3Dfooter>.

--------------B17580FA8D8B970D944AF12E
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<html>
  <head>
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3DUTF-8=
">
  </head>
  <body text=3D"#000000" bgcolor=3D"#FFFFFF">
    <p>this?</p>
    <p>jose@koios2:~/projects/container-recipes/generic_containers$ cat
      centos7_w_ssh.def <br>
      BootStrap: docker<br>
      From: centos:7<br>
    </p>
    <p>#singularity file -----------------------<br>
      %post<br>
      =C2=A0=C2=A0=C2=A0 yum -y install yum-utils openssh-server<br>
      <br>
      =C2=A0=C2=A0=C2=A0 ssh-keygen -A<br>
      <br>
      =C2=A0=C2=A0=C2=A0 #my user:<br>
      =C2=A0=C2=A0=C2=A0 echo "+:jose:ALL" &gt; /etc/security/access.conf<b=
r>
      =C2=A0=C2=A0=C2=A0 # disable root tweaks. Works with openssh7, not wi=
th8<br>
      =C2=A0=C2=A0=C2=A0 echo "UsePrivilegeSeparation no" &gt; /etc/ssh/ssh=
d_config<br>
      <br>
      =C2=A0=C2=A0=C2=A0 find /etc/ssh/ -type d -exec chmod 755 {} +<br>
      =C2=A0=C2=A0=C2=A0 find /etc/ssh/ -type f -exec chmod 644 {} +<br>
    </p>
    <p>#singularity file -----------------------</p>
    <p>run with:</p>
    <p>singularity exec centos7_w_ssh.sif /usr/sbin/sshd -p 12121 -D -d
      -e</p>
    <p>connect: (as there is automounted home, there is already
      authorized_keys with my key..)<br>
    </p>
    <p><br>
    </p>
    <p>ssh localhost -p 12121<br>
      The authenticity of host '[localhost]:12121 ([::1]:12121)' can't
      be established.<br>
      ECDSA key fingerprint is
      SHA256:K8gLCw1b9ZicrCXdhh/V68XvuI9bTeHjY3XL3dxuTvk.<br>
      ECDSA key fingerprint is
      MD5:40:38:54:e0:95:c3:d1:e9:23:ab:b6:d9:d7:74:6d:36.<br>
      Are you sure you want to continue connecting (yes/no)? yes<br>
      Warning: Permanently added '[localhost]:12121' (ECDSA) to the list
      of known hosts.<br>
      Attempt to write login records by non-root user (aborting)<br>
      Environment:<br>
      =C2=A0 USER=3Djose<br>
      =C2=A0 LOGNAME=3Djose<br>
      =C2=A0 HOME=3D/home/users/jose<br>
      =C2=A0 PATH=3D/usr/local/bin:/usr/bin<br>
      =C2=A0 MAIL=3D/var/mail/jose<br>
      =C2=A0 SHELL=3D/bin/sh<br>
      =C2=A0 SSH_CLIENT=3D::1 57690 12121<br>
      =C2=A0 SSH_CONNECTION=3D::1 57690 ::1 12121<br>
      =C2=A0 SSH_TTY=3D/dev/pts/17<br>
      =C2=A0 TERM=3Dscreen<br>
      -sh-4.2$ Connection to localhost closed by remote host.<br>
      Connection to localhost closed.<br>
    </p>
    <p><br>
    </p>
    <pre class=3D"moz-signature" cols=3D"72">Josef Dvoracek
Institute of Physics @ Czech Academy of Sciences
cell: +420 608 563 558 | office: +420 266 052 669 | fzu phone nr. : 2669</p=
re>
    <div class=3D"moz-cite-prefix">On 28. 08. 19 10:31, Vang Le Quy wrote:<=
br>
    </div>
    <blockquote type=3D"cite"
      cite=3D"mid:a5f0ce96-7500-47...@lbl.gov">
      <meta http-equiv=3D"content-type" content=3D"text/html; charset=3DUTF=
-8">
      <div dir=3D"ltr">
        <div>Hi Dave</div>
        <div>Thanks for the suggestions. nscenter seems to be an
          interesting tool. However, I am not seeing how I can use it
          with pyCharm to debug python code running inside the
          container. <br>
        </div>
        <div><br>
        </div>
        <div>I found some more information thanks to Oliver suggestion
          about enabling sshd debug messages. One of missing component
          for sshd is the log service:</div>
        <div><br>
        </div>
        <div><span style=3D"font-family: courier new, monospace;">/usr/sbin=
/sshd
            -d<br>
            debug1: sshd version OpenSSH_7.6, OpenSSL 1.0.2n=C2=A0 7 Dec 20=
17<br>
            debug1: private host key #0: ssh-rsa
            SHA256:EDWRBlyyVHfWKk/cAp2CI1GcnN1OLvxrSu8ay4jxQmM<br>
            debug1: private host key #1: ecdsa-sha2-nistp256
            SHA256:mMeGj7V1XxyJSkmAKGqNsBYLqVq3C19n0fRkPnEGVpeM<br>
            debug1: private host key #2: ssh-ed25519
            SHA256:lN7is7WPx95JBWUjcvj9GSsc44/dZ/X4xVTGJ5YL28M<br>
            debug1: rexec_argv[0]=3D'/usr/sbin/sshd'<br>
            debug1: rexec_argv[1]=3D'-d'<br>
            debug1: Set /proc/self/oom_score_adj from 0 to -1000<br>
            debug1: Bind to port 22 on 0.0.0.0.<br>
            Server listening on 0.0.0.0 port 22.<br>
            debug1: Bind to port 22 on ::.<br>
            Server listening on :: port 22.<br>
            debug1: Server will not fork when running in debugging mode.<br=
>
            debug1: rexec start in 5 out 5 newsock 5 pipe -1 sock 8<br>
            debug1: inetd sockets after dupping: 3, 3<br>
            Connection from 172.19.8.14 port 51288 on 10.23.0.22 port 22
            &lt;=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Login attempt<br>
            debug1: Client protocol version 2.0; client software version
            OpenSSH_7.2p2 Ubuntu-4ubuntu2.8<br>
            debug1: match: OpenSSH_7.2p2 Ubuntu-4ubuntu2.8 pat OpenSSH*
            compat 0x04000000<br>
            debug1: Local version string SSH-2.0-OpenSSH_7.6p1
            Ubuntu-4ubuntu0.3<br>
            debug1: permanently_set_uid: 105/65534 [preauth]<br>
            permanently_set_uid: was able to restore old [e]gid
            [preauth]<br>
            debug1: do_cleanup [preauth]<br>
            debug1: monitor_read_log: child log fd closed
            &lt;=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3DLooking for log facility, and
            failed<br>
            debug1: do_cleanup<br>
            debug1: Killing privsep child 50<br>
            debug1: audit_event: unhandled event 12</span></div>
        <div><br>
        </div>
        <div>So I went ahead and run:</div>
        <div><br>
        </div>
        <div><span style=3D"font-family: courier new, monospace;">Singulari=
ty
            rootfs-409417780:/tmp&gt; service rsyslog start<br>
            =C2=A0* Starting enhanced syslogd
rsyslogd=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0
            mknod: /dev/xconsole: Permission denied<br>
            chown: cannot access '/dev/xconsole': No such file or
            directory<br>
          </span></div>
        <div><br>
        </div>
        <div>/dev seems to be shared from host:</div>
        <div><span style=3D"font-family: courier new, monospace;">ls -lah
            /dev/ |head<br>
            total 0<br>
            drwxr-xr-x 21 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0 4.0K Jul 2=
6 06:53 .<br>
            drwxr-xr-x 23 root=C2=A0=C2=A0 root=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0 580 Aug 28 10:13 ..<br>
            crw-------=C2=A0 1 nobody nogroup=C2=A0 10, 175 Jul=C2=A0 3 08:=
50 agpgart<br>
            crw-------=C2=A0 1 nobody nogroup=C2=A0 10, 235 Jul=C2=A0 3 08:=
50 autofs<br>
            drwxr-xr-x=C2=A0 2 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
 400 Jul=C2=A0 3 08:50 block<br>
            drwxr-xr-x=C2=A0 2 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
 120 Jul=C2=A0 3 08:50 bsg<br>
            crw-rw----=C2=A0 1 nobody nogroup=C2=A0 10, 234 Jul=C2=A0 3 08:=
50
            btrfs-control<br>
            lrwxrwxrwx=C2=A0 1 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0 3 Jul=C2=A0 3 08:50 cdrom
            -&gt; sr0<br>
            lrwxrwxrwx=C2=A0 1 nobody nogroup=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0=C2=A0 3 Jul=C2=A0 3 08:50 cdrw
            -&gt; sr0</span></div>
        <div><br>
        </div>
        <div>That means I can't start syslog. Still no go :(</div>
        <div><br>
        </div>
        <div>On Tuesday, August 27, 2019 at 11:03:32 PM UTC+2, Dave
          Dykstra wrote:</div>
        <blockquote class=3D"gmail_quote" style=3D"margin: 0;margin-left:
          0.8ex;border-left: 1px #ccc solid;padding-left: 1ex;">Hi Vang,
          <br>
          <br>
          Here's a completely different approach you might like.
          =C2=A0Instead of using
          <br>
          ssh inside a container for debugging, from another process on
          the host
          <br>
          you can use "nsenter" to join an existing namespace. =C2=A0For
          example the
          <br>
          below script works when a container was started with
          singularity -c -i -p
          <br>
          and an unprivileged user namespace (that is, with -u or no
          setuid).
          <br>
          <br>
          Dave
          <br>
          <br>
          <br>
          #!/bin/bash
          <br>
          # This assumes singularity was run with -c -i -p using
          <br>
          # =C2=A0unprivileged namespaces.
          <br>
          # Written by Dave Dykstra, 27 November 2017
          <br>
          <br>
          usage()
          <br>
          {
          <br>
          =C2=A0 =C2=A0 echo "Usage: singularity-attach &lt;pid&gt;" &gt;&a=
mp;2
          <br>
          =C2=A0 =C2=A0 exit 1
          <br>
          }
          <br>
          <br>
          if [ $# !=3D 1 ];then
          <br>
          =C2=A0 =C2=A0 usage
          <br>
          fi
          <br>
          <br>
          if ! kill -0 "$1"; then
          <br>
          =C2=A0 =C2=A0 usage
          <br>
          fi
          <br>
          <br>
          eval exec nsenter -t $1 -U --preserve-credentials -m -i -p -r
          -w /usr/bin/env \
          <br>
          =C2=A0 -i $(xargs -0 bash -c 'printf "%q\n" "$@"' --
          &lt;/proc/$1/environ) /bin/bash
          <br>
          <br>
          <br>
          <br>
          On Tue, Aug 27, 2019 at 06:08:57AM -0700, Vang Le Quy wrote:
          <br>
          &gt; Hi Oliver
          <br>
          &gt; <br>
          &gt; &gt;
          <br>
          &gt; &gt; this is exactly what our users do via interactive
          jobs (but with <br>
          &gt; &gt; HTCondor). Did you check if this works or can be
          made to work with Slurm? <br>
          &gt; &gt; Maybe your admins can offer this? <br>
          &gt; &gt;
          <br>
          &gt; It works with slurm only: Submit interactive job, ssh to
          the compute node. <br>
          &gt; <br>
          &gt; I don't see how an ssh to localhost tests anything
          related to firewall <br>
          &gt; &gt; setup? <br>
          &gt; &gt;
          <br>
          &gt; Sorry for the ambiguity. FE and CN are test servers, and
          therefore no <br>
          &gt; firewall or extra security is setup. They are all default
          Ubuntu setup. <br>
          &gt; Furthermore the network guys at my place control port
          opening on routers <br>
          &gt; and switches. So ssh to localhost on FE is sufficient.
          For direct evidence. <br>
          &gt; This works for nginx service:
          <br>
          &gt; user@FE:~ srun --pty bash -l
          <br>
          &gt; user@CN:~ singularity instance start --net <br>
          &gt; --network-args=3D"portmap=3D2222:<wbr>80/tcp" --fakeroot
          nginx.img webtest
          <br>
          &gt; <br>
          &gt; I then could visit <a href=3D"http://CN:2222"
            target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2FCN%=
3A2222\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNE-nABQoQQcxd019M5AAWkxeikK2A=
';return
            true;"
onclick=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2FCN%3A22=
22\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNE-nABQoQQcxd019M5AAWkxeikK2A';re=
turn
            true;" moz-do-not-send=3D"true">http://CN:2222</a> =C2=A0
          <br>
          &gt; <br>
          &gt; Did you try to run sshd manually instead of using systemd
          as I mentioned? <br>
          &gt; &gt;
          <br>
          &gt; I tried after your suggestion. There are several error
          before sshd really <br>
          &gt; starts (e.g. missing /var/run/sshd directory, directory
          permission, etc). <br>
          &gt; And I still can't connect.
          <br>
          &gt; <br>
          &gt; My conclusion so far is that ssh server requires more
          things to start up <br>
          &gt; properly inside singularity. But I don't know exactly
          what are these things <br>
          &gt; yet, keep looking ...
          <br>
          &gt; <br>
          &gt; <br>
          &gt; On Tuesday, August 27, 2019 at 11:34:06 AM UTC+2, Oliver
          Freyermuth wrote:
          <br>
          &gt; <br>
          &gt; &gt; Hi Vang, <br>
          &gt; &gt;
          <br>
          &gt; &gt; Am 27.08.19 um 11:28 schrieb Vang Le Quy: <br>
          &gt; &gt; &gt; Hi Thomas and Oliver. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; I need a full instance of Ubuntu with
          tensorflow, GPU driver, etc to do <br>
          &gt; &gt; some machine learning inside the container. The ssh
          connection will allow <br>
          &gt; &gt; remote debug functionality for python code with
          pyCharm. So a light weight <br>
          &gt; &gt; busybox will not work. <br>
          &gt; &gt;
          <br>
          &gt; &gt; this is exactly what our users do via interactive
          jobs (but with <br>
          &gt; &gt; HTCondor). Did you check if this works or can be
          made to work with Slurm? <br>
          &gt; &gt; Maybe your admins can offer this? <br>
          &gt; &gt;
          <br>
          &gt; &gt; &gt; Regarding firewall, this reason can be excluded
          for now, because I <br>
          &gt; &gt; logged on to the FE and do ssh to localhost. <br>
          &gt; &gt;
          <br>
          &gt; &gt; I don't see how an ssh to localhost tests anything
          related to firewall <br>
          &gt; &gt; setup? <br>
          &gt; &gt;
          <br>
          &gt; &gt; &gt; More importantly, the ssh service itself inside
          the instance is not <br>
          &gt; &gt; running (see terminal output at the end of my first
          email). So I must get <br>
          &gt; &gt; the ssh server up and running inside the instance
          first. <br>
          &gt; &gt;
          <br>
          &gt; &gt; Did you try to run sshd manually instead of using
          systemd as I mentioned? <br>
          &gt; &gt;
          <br>
          &gt; &gt; Cheers, <br>
          &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 Oliver <br>
          &gt; &gt;
          <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; Cheers <br>
          &gt; &gt; &gt; Vang <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; On Tuesday, August 27, 2019 at 9:44:01 AM
          UTC+2, Vang Le Quy wrote: <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 * <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 * <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 *This is my setup:* <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Laptop (LT) -&gt; slurm front-end(FE=
)
          containing Singularity executable <br>
          &gt; &gt; -&gt; Compute node (CN) with GPUs, and also contains
          Singularity executable. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 FE and CN share a partition so users=
 can
          have shared home <br>
          &gt; &gt; directories between FE and CN. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Singularity version: 3.3.0 <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 *Intermediate goal:* <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Start a singularity container/instan=
ce on
          FE, and SSH server service <br>
          &gt; &gt; therein. Then do SSH from LT into that container. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 *Final Goal:* <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Submit a slurm job from FE which in =
turn
          start a Singularity <br>
          &gt; &gt; container/instance on CN. SSH from LT to that
          Container on CN via FE <br>
          &gt; &gt; because users can't logon to CN directly. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 *My try so far:* <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 This is my DEF file: <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 ############# <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Bootstrap: docker <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 From: nvidia/tensorflow:19.05-py3 <b=
r>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Registry: <a href=3D"http://nvcr.io"
            target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2Fnvc=
r.io\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGCkPpMqfSCPvFW5vNVrqBgbRrDog';=
return
            true;"
onclick=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2Fnvcr.io=
\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGCkPpMqfSCPvFW5vNVrqBgbRrDog';retu=
rn
            true;" moz-do-not-send=3D"true">nvcr.io</a> &lt;<a
            href=3D"http://nvcr.io" target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2Fnvc=
r.io\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGCkPpMqfSCPvFW5vNVrqBgbRrDog';=
return
            true;"
onclick=3D"this.href=3D'http://www.google.com/url?q\x3dhttp%3A%2F%2Fnvcr.io=
\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGCkPpMqfSCPvFW5vNVrqBgbRrDog';retu=
rn
            true;" moz-do-not-send=3D"true">http://nvcr.io</a> &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 IncludeCmd: yes <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 %environment <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0export LANG=3Den=
_US.UTF-8 <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 %post <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get update &=
amp;&amp; apt-get
          install -y --no-install-recommends <br>
          &gt; &gt; apt-utils <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0LANG=3Den_US.UTF=
-8 <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0# Language/local=
e settings <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0echo $LANG UTF-8=
 &gt; /etc/locale.gen
          <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get install =
-y locales &amp;&amp;
          update-locale --reset LANG=3D$LANG <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0apt-get install =
-y
          --no-install-recommends wget lsb-release <br>
          &gt; &gt; parallel vim openssh-server <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0systemctl enable=
 ssh <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 %startscript <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0systemctl start =
ssh <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 ############### <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Build: <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 singularity build --fakeroot
          tensorflow_19.05-py3.sif <br>
          &gt; &gt; Singularity.def <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Run: <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 mkdir overlay <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 singularity instance start -B /run:/=
run
          =C2=A0--writable-tmpfs --overlay <br>
          &gt; &gt; $PWD/overlay =C2=A0--fakeroot --net
          --network-args=3D"portmap=3D2222:<wbr>22/tcp" <br>
          &gt; &gt; ./tensorflow_19.05-py3.sif sshins <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 INFO: =C2=A0 =C2=A0Convert SIF file =
to sandbox... <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 WARNING: Ignoring --writable-tmpfs a=
s it
          requires overlay support <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Could not watch jobs: Operation not
          permitted <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 INFO: =C2=A0 =C2=A0instance started =
successfully <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Test ssh server status: <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 singularity shell instance://sshins =
<br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp/&g=
t;
          whoami <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 root <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp&gt=
;
          service ssh status <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Failed to retrieve unit: Access deni=
ed <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Failed to get properties: Access den=
ied <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Singularity rootfs-054517279:/tmp&gt=
; ps
          -ef <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 UID =C2=A0 =C2=A0 =C2=A0 =C2=A0 PID =
=C2=A0 PPID =C2=A0C STIME TTY =C2=A0 =C2=A0 =C2=A0 =C2=A0
          =C2=A0TIME CMD <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A01 =C2=A0 =C2=A0 =C2=A00 =C2=A00 07:33 ? =C2=A0 =C2=A0 =C2=A0
          =C2=A000:00:00 sinit <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0 25 =
=C2=A0 =C2=A0 =C2=A00 =C2=A00 07:34 pts/27 =C2=A0
          00:00:00 /bin/bash --norc <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 root =C2=A0 =C2=A0 =C2=A0 =C2=A0253 =
=C2=A0 =C2=A0 25 =C2=A00 07:35 pts/27 =C2=A0
          00:00:00 ps -ef <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 On FE: <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 ssh -p 2222 feuser@localhost <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 ssh: connect to host localhost port =
2222:
          Connection refused <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 This is a dead end to me at the mome=
nt. Any
          info and suggestions are <br>
          &gt; &gt; welcome. <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Kind regards <br>
          &gt; &gt; &gt; =C2=A0 =C2=A0 Vang <br>
          &gt; &gt; &gt; <br>
          &gt; &gt; &gt; -- <br>
          &gt; &gt; &gt; You received this message because you are
          subscribed to the Google <br>
          &gt; &gt; Groups "singularity" group. <br>
          &gt; &gt; &gt; To unsubscribe from this group and stop
          receiving emails from it, send <br>
          &gt; &gt; an email to <a moz-do-not-send=3D"true">si...@lbl.gov</=
a>
          &lt;javascript:&gt; &lt;mailto:
          <br>
          &gt; &gt; <a href=3D"javascript:" target=3D"_blank"
            gdf-obfuscated-mailto=3D"L8W4rbBJEAAJ" rel=3D"nofollow"
            onmousedown=3D"this.href=3D'javascript:';return true;"
            onclick=3D"this.href=3D'javascript:';return true;"
            moz-do-not-send=3D"true">singu...@lbl.<wbr>gov</a>
          &lt;javascript:&gt;&gt;. <br>
          &gt; &gt; &gt; To view this discussion on the web visit <br>
          &gt; &gt; <a
href=3D"https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c=
38-40ca-97ab-adeb2a891e7f%40lbl.gov"
            target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/sin=
gularity/d74ad067-3c38-40ca-97ab-adeb2a891e7f%40lbl.gov';return
            true;"
onclick=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/singula=
rity/d74ad067-3c38-40ca-97ab-adeb2a891e7f%40lbl.gov';return
            true;" moz-do-not-send=3D"true">https://groups.google.com/a/<wb=
r>lbl.gov/d/msgid/singularity/<wbr>d74ad067-3c38-40ca-97ab-<wbr>adeb2a891e7=
f%40lbl.gov</a>
          =C2=A0
          <br>
          &gt; &gt; &lt;
          <br>
          &gt; &gt; <a
href=3D"https://groups.google.com/a/lbl.gov/d/msgid/singularity/d74ad067-3c=
38-40ca-97ab-adeb2a891e7f%40lbl.gov?utm_medium=3Demail&amp;utm_source=3Dfoo=
ter"
            target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/sin=
gularity/d74ad067-3c38-40ca-97ab-adeb2a891e7f%40lbl.gov?utm_medium\x3demail=
\x26utm_source\x3dfooter';return
            true;"
onclick=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/singula=
rity/d74ad067-3c38-40ca-97ab-adeb2a891e7f%40lbl.gov?utm_medium\x3demail\x26=
utm_source\x3dfooter';return
            true;" moz-do-not-send=3D"true">https://groups.google.com/a/<wb=
r>lbl.gov/d/msgid/singularity/<wbr>d74ad067-3c38-40ca-97ab-<wbr>adeb2a891e7=
f%40lbl.gov?utm_<wbr>medium=3Demail&amp;utm_source=3Dfooter</a>
          &gt;. <br>
          &gt; &gt;
          <br>
          &gt; &gt;
          <br>
          &gt; &gt;
          <br>
          &gt; <br>
          &gt; -- <br>
          &gt; You received this message because you are subscribed to
          the Google Groups "singularity" group.
          <br>
          &gt; To unsubscribe from this group and stop receiving emails
          from it, send an email to <a href=3D"javascript:"
            target=3D"_blank" gdf-obfuscated-mailto=3D"L8W4rbBJEAAJ"
            rel=3D"nofollow" onmousedown=3D"this.href=3D'javascript:';retur=
n
            true;" onclick=3D"this.href=3D'javascript:';return true;"
            moz-do-not-send=3D"true">singu...@lbl.<wbr>gov</a>.
          <br>
          &gt; To view this discussion on the web visit <a
href=3D"https://groups.google.com/a/lbl.gov/d/msgid/singularity/ad970876-e8=
84-4823-8a9e-2e049cd927c2%40lbl.gov"
            target=3D"_blank" rel=3D"nofollow"
onmousedown=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/sin=
gularity/ad970876-e884-4823-8a9e-2e049cd927c2%40lbl.gov';return
            true;"
onclick=3D"this.href=3D'https://groups.google.com/a/lbl.gov/d/msgid/singula=
rity/ad970876-e884-4823-8a9e-2e049cd927c2%40lbl.gov';return
            true;" moz-do-not-send=3D"true">https://groups.google.com/a/<wb=
r>lbl.gov/d/msgid/singularity/<wbr>ad970876-e884-4823-8a9e-<wbr>2e049cd927c=
2%40lbl.gov</a>
          .
          <br>
          <br>
        </blockquote>
      </div>
      -- <br>
      You received this message because you are subscribed to the Google
      Groups "singularity" group.<br>
      To unsubscribe from this group and stop receiving emails from it,
      send an email to <a href=3D"mailto:singu...@lbl.gov"
        moz-do-not-send=3D"true">singu...@lbl.gov</a>.<br>
      To view this discussion on the web visit <a
href=3D"https://groups.google.com/a/lbl.gov/d/msgid/singularity/a5f0ce96-75=
00-47fc-8d10-52db928278d4%40lbl.gov?utm_medium=3Demail&amp;utm_source=3Dfoo=
ter"
        moz-do-not-send=3D"true">https://groups.google.com/a/lbl.gov/d/msgi=
d/singularity/a5f0ce96-7500-47fc-8d10-52db928278d4%40lbl.gov</a>.<br>
    </blockquote>
  </body>
</html>

--------------B17580FA8D8B970D944AF12E--

--------------ms030502030008080007000406
Content-Type: application/pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"
Content-Description: S/MIME Cryptographic Signature

MIAGCSqGSIb3DQEHAqCAMIACAQExDzANBglghkgBZQMEAgEFADCABgkqhkiG9w0BBwEAAKCC
CngwggUJMIID8aADAgECAhACt8ndrdK9CetZxFyQDGB4MA0GCSqGSIb3DQEBCwUAMGUxCzAJ
BgNVBAYTAlVTMRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxGTAXBgNVBAsTEHd3dy5kaWdpY2Vy
dC5jb20xJDAiBgNVBAMTG0RpZ2lDZXJ0IEFzc3VyZWQgSUQgUm9vdCBDQTAeFw0xNDExMTgx
MjAwMDBaFw0yNDExMTgxMjAwMDBaMHIxCzAJBgNVBAYTAk5MMRYwFAYDVQQIEw1Ob29yZC1I
b2xsYW5kMRIwEAYDVQQHEwlBbXN0ZXJkYW0xDzANBgNVBAoTBlRFUkVOQTEmMCQGA1UEAxMd
VEVSRU5BIGVTY2llbmNlIFBlcnNvbmFsIENBIDMwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
ggEKAoIBAQCwp9Jj5Aej1xPkS1GV3LvBdemFmkUR//nSzBodqsU3dv2BCRD30r4gt5oRsYty
qDGF2nnItxV1SkwVoDxFeRzOIHYNYvBRHaiGvCQjEXzPRTocOSVfWpmq/zAL/QOEqpJogeM+
0IBGiJcAENJshl7UcfjYbBnN5qStk74f52VWFf/aiF7MVJnsUr3oriQvXYOzs8N/NXyyQyim
atBbumJVCNszF1X+XHCGfPNvxlNFW9ktv7azK0baminfLcsh6ubCdINZc+Nof2lU387NCDgg
oh3KsYVcZTSuhh7qp6MjxE5VqOZod1hpXXzDOkjK+DAMC57iZXssncp24eaN08VlAgMBAAGj
ggGmMIIBojASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIBhjB5BggrBgEFBQcB
AQRtMGswJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBDBggrBgEFBQcw
AoY3aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0QXNzdXJlZElEUm9vdENB
LmNydDCBgQYDVR0fBHoweDA6oDigNoY0aHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lD
ZXJ0QXNzdXJlZElEUm9vdENBLmNybDA6oDigNoY0aHR0cDovL2NybDQuZGlnaWNlcnQuY29t
L0RpZ2lDZXJ0QXNzdXJlZElEUm9vdENBLmNybDA9BgNVHSAENjA0MDIGBFUdIAAwKjAoBggr
BgEFBQcCARYcaHR0cHM6Ly93d3cuZGlnaWNlcnQuY29tL0NQUzAdBgNVHQ4EFgQUjJ8RLubj
egSlHlWLRggEpu2XcKYwHwYDVR0jBBgwFoAUReuir/SSy4IxLVGLp6chnfNtyA8wDQYJKoZI
hvcNAQELBQADggEBAI5HEV91Oen8WHFCoJkeu2Av+b/kWTV2qH/YNI1Xsbou2hHKhh4IyNkF
OxA/TUiuK2qQnQ5hAS0TIrs9SJ1Ke+DjXd/cTBiw7lCYSW5hkzigFV+iSivninpItafWqYBS
WxITl1KHBS9YBskhEqO5GLliDMPiAgjqUBQ/H1qZMlZNQIuFu0UaFUQuZUpJFr4+0zpzPxsB
iWU2muAoGItwbaP55EYshM7+v/J+x6kIhAJt5Dng8fOmOvR9F6Vw2/E0EZ6oQ8g1fdhwM101
S1OI6J1tUil1r7ES/svNqVWVb7YkUEBcPo8ppfHnTI/uxsn2tslsWefsOGJxNYUUSMAb9Eow
ggVnMIIET6ADAgECAhAH9TGp5vPS0v3M25BFIaXAMA0GCSqGSIb3DQEBCwUAMHIxCzAJBgNV
BAYTAk5MMRYwFAYDVQQIEw1Ob29yZC1Ib2xsYW5kMRIwEAYDVQQHEwlBbXN0ZXJkYW0xDzAN
BgNVBAoTBlRFUkVOQTEmMCQGA1UEAxMdVEVSRU5BIGVTY2llbmNlIFBlcnNvbmFsIENBIDMw
HhcNMTgwOTI1MDAwMDAwWhcNMTkxMDI0MTIwMDAwWjCBlDETMBEGCgmSJomT8ixkARkWA29y
ZzEWMBQGCgmSJomT8ixkARkWBnRlcmVuYTETMBEGCgmSJomT8ixkARkWA3RjczELMAkGA1UE
BhMCQ1oxIzAhBgNVBAoTGkluc3RpdHV0ZSBvZiBQaHlzaWNzIEFTIENSMR4wHAYDVQQDExVK
b3NlZiBEdm9yYWNlayAwMjkwNjQwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDj
onB2ZBmWiv093hubLjo7D5u0rAsZQ3ZM0UTN0NWcKnEbiJo4BR/FUMaHGZSpjhSN7cEncbXo
PAOLQgskEBKA+qmQzAxztzN4AltJHp6h57tqxTH1YHi7Bg0Ek12ADI3cpzMc7Ip7DZCMXF2e
hobIr+QakX787/bz0wTdDZ6wuNMEW1ozTU58BRXsdkG+WT/bVvWhpyewqP0NJct+o43g8hNt
vcU4ZLi8m6L0k3flcWKP+coWs2YrsaBFBpwNhMR04hGm7wmyTOaf/xniv2O3sfXfzYTKv3ZD
0a210KfO7TzS6g00hzi/0a0aLG5wYMmWtrkeX6+ebLM4DpLKr8evAgMBAAGjggHUMIIB0DAf
BgNVHSMEGDAWgBSMnxEu5uN6BKUeVYtGCASm7ZdwpjAdBgNVHQ4EFgQUZw+52VqPITmO8Va3
x3GrKiJmVEMwDAYDVR0TAQH/BAIwADAWBgNVHREEDzANgQtqb3NlQGZ6dS5jejAOBgNVHQ8B
Af8EBAMCBLAwHQYDVR0lBBYwFAYIKwYBBQUHAwIGCCsGAQUFBwMEMDQGA1UdIAQtMCswDAYK
KoZIhvdMBQICATAMBgpghkgBhv1sBB8BMA0GCyqGSIb3TAUCAwMDMIGFBgNVHR8EfjB8MDyg
OqA4hjZodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vVEVSRU5BZVNjaWVuY2VQZXJzb25hbENB
My5jcmwwPKA6oDiGNmh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9URVJFTkFlU2NpZW5jZVBl
cnNvbmFsQ0EzLmNybDB7BggrBgEFBQcBAQRvMG0wJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3Nw
LmRpZ2ljZXJ0LmNvbTBFBggrBgEFBQcwAoY5aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29t
L1RFUkVOQWVTY2llbmNlUGVyc29uYWxDQTMuY3J0MA0GCSqGSIb3DQEBCwUAA4IBAQBXk0b1
wMTG7i6xfc6IiGQpNgeijMAKJsV6N6nm/+6GgO4WPKmEnQXR1EfbGsu14N9X2ccrXIG/HjXg
Q9NUaisQxjz9mDw0ELKm0IeWvvVV9UywEZIVETdo8k7FZNZluejwQQsz2w2WTuqSwz6QttDW
PgHyifEhHNORt6D+LuUbtTmXuy82Sj9KV6kwc8Fzab61Dy1g7swMFXuvzwL2T/RH5NRGGeqj
0BEcin8lQV7Kz8340UvmuGHGs6biMGlRWG/b7BaZIABfn6nEHGFOnd6j03I2idwbN4IiMAoq
/i+i0GnqL0wQ3UsTQSzozBCKYtwSAC24gzrLxqnYJic3oHw/MYIDwzCCA78CAQEwgYYwcjEL
MAkGA1UEBhMCTkwxFjAUBgNVBAgTDU5vb3JkLUhvbGxhbmQxEjAQBgNVBAcTCUFtc3RlcmRh
bTEPMA0GA1UEChMGVEVSRU5BMSYwJAYDVQQDEx1URVJFTkEgZVNjaWVuY2UgUGVyc29uYWwg
Q0EgMwIQB/Uxqebz0tL9zNuQRSGlwDANBglghkgBZQMEAgEFAKCCAg0wGAYJKoZIhvcNAQkD
MQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMTkwODI4MTE1MzE3WjAvBgkqhkiG9w0B
CQQxIgQgBi3dtwrH4Cd5DDIjqx/vkMI5jxBhOlhEqXNjLkU3WdgwbAYJKoZIhvcNAQkPMV8w
XTALBglghkgBZQMEASowCwYJYIZIAWUDBAECMAoGCCqGSIb3DQMHMA4GCCqGSIb3DQMCAgIA
gDANBggqhkiG9w0DAgIBQDAHBgUrDgMCBzANBggqhkiG9w0DAgIBKDCBlwYJKwYBBAGCNxAE
MYGJMIGGMHIxCzAJBgNVBAYTAk5MMRYwFAYDVQQIEw1Ob29yZC1Ib2xsYW5kMRIwEAYDVQQH
EwlBbXN0ZXJkYW0xDzANBgNVBAoTBlRFUkVOQTEmMCQGA1UEAxMdVEVSRU5BIGVTY2llbmNl
IFBlcnNvbmFsIENBIDMCEAf1Manm89LS/czbkEUhpcAwgZkGCyqGSIb3DQEJEAILMYGJoIGG
MHIxCzAJBgNVBAYTAk5MMRYwFAYDVQQIEw1Ob29yZC1Ib2xsYW5kMRIwEAYDVQQHEwlBbXN0
ZXJkYW0xDzANBgNVBAoTBlRFUkVOQTEmMCQGA1UEAxMdVEVSRU5BIGVTY2llbmNlIFBlcnNv
bmFsIENBIDMCEAf1Manm89LS/czbkEUhpcAwDQYJKoZIhvcNAQEBBQAEggEAO40FbxyC/d/j
oqp2/l6vSS+19PbZ8X04e2FerpCQ9sm+d71uVQ9moxGN3tdTOD100yeHQld87k6cR7R0zMTK
ajytf/kTYWpZxvDzh5OSz2KBy6/Q1+lYJNn17/vJkjTI4ciwx0jvt1YeoTpUg09npHFqnRF1
T647b5lzvmZQ8pqM0nUt6OQYHi4+4R+pYgRTogkk1HWPlxy9whQxftJ3ufwMJUoAH6OYIItJ
j10qBq3B0vTYDcgtsK0Y7yoVES+5TdpPZfOSbmwX5mMd+dJXAtZJKK1oWziiskoUX1ZShIxJ
9MskPTEyX2/0wVNf9oZyRaGzmIaDhFAsGJC1axJ6egAAAAAAAA==
--------------ms030502030008080007000406--
