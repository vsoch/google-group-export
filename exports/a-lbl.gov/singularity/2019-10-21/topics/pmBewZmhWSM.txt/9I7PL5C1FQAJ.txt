Date: Tue, 22 Jan 2019 13:02:52 -0800 (PST)
From: Richard Powell <blacksbu...@gmail.com>
To: singularity <singu...@lbl.gov>
Message-Id: <5d0e4001-4fb9-4646-9c41-323ee5d25082@lbl.gov>
In-Reply-To: <3a4e9058-e327-45f3-b5c0-45aac060f2fe@lbl.gov>
References: <3a4e9058-e327-45f3-b5c0-45aac060f2fe@lbl.gov>
Subject: Re: Building v3.0.3 rpm from tar.gz on closed (no git)
 environment...
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_1292_1645068467.1548190972336"

------=_Part_1292_1645068467.1548190972336
Content-Type: multipart/alternative; 
	boundary="----=_Part_1293_954210058.1548190972338"

------=_Part_1293_954210058.1548190972338
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Update on this topic.  One fix I found was to update the rpm's for golang.  
Since I'm on a dev box, I'm ok with that, but I'd rather find a way to 
build the rpm using our golang installed on /nfs.  Let me know if that is a 
possibility.  Thanks much.
rpm -qa | grep golang
golang-src-1.11.4-1.el6.noarch
golang-bin-1.11.4-1.el6.x86_64
golang-1.11.4-1.el6.x86_64



go version
go version go1.11.4 linux/amd64
env | grep go
GOPATH=/root/go
rpmbuild -tb singularity-3.0.3.tar.gz
Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.eQId5o
+ umask 022
+ cd /root/rpmbuild/BUILD
+ LANG=C
+ export LANG
+ unset DISPLAY
+ rm -rf singularity-3.0.3
+ mkdir singularity-3.0.3
+ exit 0
Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.6ouPIr
+ umask 022
+ cd /root/rpmbuild/BUILD
+ LANG=C
+ export LANG
+ unset DISPLAY
+ cd singularity-3.0.3
+ mkdir -p gopath/src/github.com/sylabs/singularity
+ tar -C gopath/src/github.com/sylabs/ -xf /root/singularity-3.0.3.tar.gz
+ export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
+ GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
+ export 
PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
+ 
PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
+ cd 
/root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/github.com/sylabs/singularity
+ ./mconfig -V 3.0.3-1.el6 --prefix=/usr --exec-prefix=/usr 
--bindir=/usr/bin --libexecdir=/usr/libexec --sysconfdir=/etc 
--sharedstatedir=/var/lib --localstatedir=/var --libdir=/usr/lib64
=> running base system checks ...
 checking: host C compiler... cc
 checking: host C++ compiler... c++
 checking: host `ar' path... ar
 checking: host `ld' path... ld
 checking: host `ranlib' path... ranlib
 checking: host `objcopy' path... objcopy
 checking: target C compiler... cc
 checking: target C++ compiler... c++
 checking: target `ar' path... ar
 checking: target `ld' path... ld
 checking: target `ranlib' path... ranlib
 checking: target `objcopy' path... objcopy
 checking: host compiles static binaries... yes
 checking: target compiles static binaries... yes
 checking: host os type... unix
 checking: host architecture... x86_64
 checking: target architecture... x86_64
 checking: host architecture word size... 64
 checking: target architecture word size... 64
=> running project specific checks ...
 checking: namespace: CLONE_NEWPID... yes
 checking: namespace: CLONE_FS... yes
 checking: namespace: CLONE_NEWNS... yes
 checking: namespace: CLONE_NEWUSER... yes
 checking: namespace: CLONE_NEWIPC... yes
 checking: namespace: CLONE_NEWNET... yes
 checking: namespace: CLONE_NEWUTS... yes
 checking: namespace: CLONE_NEWCGROUP... no
 checking: feature: NO_NEW_PRIVS... yes
 checking: feature: MS_SLAVE... yes
 checking: feature: MS_REC... yes
 checking: feature: MS_PRIVATE... yes
 checking: user capabilities... no
 checking: header linux/securebits.h... no
 checking: header linux/capability.h... yes
 checking: function setns... no
 checking: libssl+headers... yes
 checking: libuuid+headers... yes
 checking: libseccomp+headers... no
INFO: userns and disable_suid are disabled. (mlocal/checks/basechecks.chk)
=> generating fragments ...
 found build modules:
   +-> internal/pkg/runtime/c/lib/util/util.mconf
=> building Makefile ...
=> generating singularity.spec ...
=> project setup with :
    - target arch: x86_64
    - target compiler: cc
    - target wordsize: 64-bit
    - host arch: x86_64
    - host wordsize: 64-bit
    - host system: unix
    - config profile: release
    - verbose: no
=> builddir/Makefile ready, try:
   $ cd builddir
   $ make
+ cd builddir
+ make old_config=
 CC internal/pkg/runtime/c/lib/util/capability.c
 CC internal/pkg/runtime/c/lib/util/message.c
 CC internal/pkg/runtime/c/lib/util/setns.c
 AR internal/pkg/runtime/c/lib/util/libutil.a
 CSCOPE
 DEPENDS
 AR lib/libruntime.a
 GO singularity
 GEN singularity.conf
 GO clean -cache
 GO cmd/starter/c/starter
 CNI PLUGIN bandwidth
 CNI PLUGIN bridge
 CNI PLUGIN dhcp
 CNI PLUGIN flannel
 CNI PLUGIN host-device
 CNI PLUGIN host-local
 CNI PLUGIN ipvlan
 CNI PLUGIN macvlan
 CNI PLUGIN portmap
 CNI PLUGIN ptp
 CNI PLUGIN static
 CNI PLUGIN tuning
 CNI PLUGIN vlan
+ exit 0
Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.mAEbP3
+ umask 022
+ cd /root/rpmbuild/BUILD
+ '[' /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 '!=' / ']'
+ rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64
++ dirname /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64
+ mkdir -p /root/rpmbuild/BUILDROOT
+ mkdir /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64
+ LANG=C
+ export LANG
+ unset DISPLAY
+ cd singularity-3.0.3
+ export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
+ GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
+ export 
PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
+ 
PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
+ cd 
/root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/github.com/sylabs/singularity/builddir
+ mkdir -p 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/share/man/man1
+ make DESTDIR=/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64 
install man
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter
 INSTALL SUID 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/var/singularity/mnt/session
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/singularity.conf
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/run-singularity
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/capability.json
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/ecl.toml
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/bash_completion.d/singularity
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bridge
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/dhcp
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/flannel
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-device
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-local
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ipvlan
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/macvlan
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ptp
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/static
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/tuning
 INSTALL CNI PLUGIN 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/vlan
 INSTALL CNI CONFIGURATION FILES
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/seccomp-profiles/default.json
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/nvliblist.conf
 INSTALL 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/cgroups/cgroups.toml
 DONE
INFO    [U=0,P=374372]     main()                        Creating 
Singularity man pages at 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/share/man/man1
+ chmod 644 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/exec 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/run 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/shell 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/start 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/test
+ /usr/lib/rpm/find-debuginfo.sh --strict-build-id /root/rpmbuild/BUILD/
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/macvlan
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-device
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bridge
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/dhcp
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/static
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/tuning
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ptp
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/flannel
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/ipvlan
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-local
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/vlan
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter
/usr/lib/rpm/debugedit: 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: 
Unknown debugging section .debug_gdb_scripts
/usr/lib/rpm/debugedit: 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: 
.debug_line CU does not fit into section
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid
/usr/lib/rpm/debugedit: 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid: 
Unknown debugging section .debug_gdb_scripts
/usr/lib/rpm/debugedit: 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid: 
.debug_line CU does not fit into section
*** WARNING: identical binaries are copied, not linked:
        /usr/libexec/singularity/bin/starter-suid
   and  /usr/libexec/singularity/bin/starter
extracting debug info from 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity
cpio: /tmp/go-build: Cannot stat: No such file or directory
3533 blocks
+ /usr/lib/rpm/check-buildroot
+ /usr/lib/rpm/redhat/brp-compress
+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip
+ /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump
+ /usr/lib/rpm/brp-python-bytecompile
+ /usr/lib/rpm/redhat/brp-python-hardlink
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: singularity-3.0.3-1.el6.x86_64
warning: File listed twice: /etc/singularity/actions/exec
warning: File listed twice: /etc/singularity/actions/run
warning: File listed twice: /etc/singularity/actions/shell
warning: File listed twice: /etc/singularity/actions/start
warning: File listed twice: /etc/singularity/actions/test
Provides: config(singularity) = 3.0.3-1.el6 singularity-runtime
Requires(rpmlib): rpmlib(CompressedFileNames) <= 3.0.4-1 
rpmlib(FileDigests) <= 4.6.0-1 rpmlib(PayloadFilesHavePrefix) <= 4.0-1
Requires: /bin/sh libc.so.6()(64bit) libc.so.6(GLIBC_2.2.5)(64bit) 
libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit) 
libc.so.6(GLIBC_2.4)(64bit) libc.so.6(GLIBC_2.7)(64bit) libdl.so.2()(64bit) 
libdl.so.2(GLIBC_2.2.5)(64bit) libpthread.so.0()(64bit) 
libpthread.so.0(GLIBC_2.2.5)(64bit) libpthread.so.0(GLIBC_2.3.2)(64bit) 
rtld(GNU_HASH)
Obsoletes: singularity-runtime
Processing files: singularity-debuginfo-3.0.3-1.el6.x86_64
Checking for unpackaged file(s): /usr/lib/rpm/check-files 
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64
Wrote: /root/rpmbuild/RPMS/x86_64/singularity-3.0.3-1.el6.x86_64.rpm
Wrote: 
/root/rpmbuild/RPMS/x86_64/singularity-debuginfo-3.0.3-1.el6.x86_64.rpm
Executing(%clean): /bin/sh -e /var/tmp/rpm-tmp.K11Z8n
+ umask 022
+ cd /root/rpmbuild/BUILD
+ rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64
+ exit 0

ls -lat rpmbuild/RPMS/x86_64/
total 43424
-rw-r--r-- 1 root root 18417700 Jan 22 15:57 
singularity-debuginfo-3.0.3-1.el6.x86_64.rpm
drwxr-xr-x 2 root root     4096 Jan 22 15:57 .
-rw-r--r-- 1 root root 26037820 Jan 22 15:57 
singularity-3.0.3-1.el6.x86_64.rpm
drwxr-xr-x 3 root root     4096 Jan 22 15:56 ..


On Tuesday, January 22, 2019 at 3:19:59 PM UTC-5, Richard Powell wrote:
>
> Last month, and previous months, I was able to build the rpm for 
> Singularity with ease after having our security team open a hole in the 
> proxy.  This process no longer works a singularity v3.0.3.  I miss last 
> month's strategy now for building rpms!  Is there a path to success if I'm 
> strapped with a centralized golang install and I simply need to build rpms 
> without access to git?  Please advise on how to build rpm with only access 
> to google.dl golang or old local golang.
>
> On our RHEL6, the following is all I needed to do and the script would 
> wget to google.dl for latest golang and all worked well.
> rpmbuild -tb singularity-3.0.2.tar.gz
>
> Now, on same RHEL6 server, the script does not attempt to wget golang and 
> instead (perhaps) looks for golang package install, which I didn't 
> initially have.  Our install of golang, however, is not installed via rpm 
> and is on a centralized /nfs mount point to which a module environment file 
> sets PATH and GOROOT and I set GOPATH on the terminal.
> ---------------------------------first failed attempt using our 
> centralized golang----------------
> #1 module load go_1_11_1
> #2 export GOPATH=${HOME}/go
> #3 env | grep go
>
> PATH=/nfs/system/golang/go/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
> _LMFILES_=/nfs/system/envir_modulefiles/go_1_11_1
> LOADEDMODULES=go_1_11_1
> GOROOT=/nfs/system/golang/go
> GOPATH=/root/go
> #4 rpmbuild -tb singularity-3.0.3.tar.gz
> #5 failed result below:
> rpmbuild -tb singularity-3.0.3.tar.gz
> error: Failed build dependencies:
>         golang is needed by singularity-3.0.3-1.el6.x86_64
> --------------------end of first attempt---------------------------
>
> -----------------second failed attempt with RHEL6 EPEL 
> golang---------------------------
> When above failed, I installed golang via rpm from epel, but it's old and 
> gave the following issue:
> rpm -qa | grep golang
> golang-src-1.3.3-1.el6.noarch
> golang-pkg-bin-linux-amd64-1.3.3-1.el6.x86_64
> golang-1.3.3-1.el6.x86_64
> golang-pkg-linux-amd64-1.3.3-1.el6.noarch
>
> Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.DNm3VF
> + umask 022
> + cd /root/rpmbuild/BUILD
> + LANG=C
> + export LANG
> + unset DISPLAY
> + rm -rf singularity-3.0.3
> + mkdir singularity-3.0.3
> + exit 0
> Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.WJLNPo
> + umask 022
> + cd /root/rpmbuild/BUILD
> + LANG=C
> + export LANG
> + unset DISPLAY
> + cd singularity-3.0.3
> + mkdir -p gopath/src/github.com/sylabs/singularity
> + tar -C gopath/src/github.com/sylabs/ -xf /root/singularity-3.0.3.tar.gz
> + export GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
> + GOPATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath
> + export 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
> + 
> PATH=/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin
> + cd /root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/
> github.com/sylabs/singularity
> + ./mconfig -V 3.0.3-1.el6 --prefix=/usr --exec-prefix=/usr 
> --bindir=/usr/bin --libexecdir=/usr/libexec --sysconfdir=/etc 
> --sharedstatedir=/var/lib --localstatedir=/var --libdir=/usr/lib64
> => running base system checks ...
>  checking: host C compiler... cc
>  checking: host C++ compiler... c++
>  checking: host `ar' path... ar
>  checking: host `ld' path... ld
>  checking: host `ranlib' path... ranlib
>  checking: host `objcopy' path... objcopy
>  checking: target C compiler... cc
>  checking: target C++ compiler... c++
>  checking: target `ar' path... ar
>  checking: target `ld' path... ld
>  checking: target `ranlib' path... ranlib
>  checking: target `objcopy' path... objcopy
>  checking: host compiles static binaries... yes
>  checking: target compiles static binaries... yes
>  checking: host os type... unix
>  checking: host architecture... x86_64
>  checking: target architecture... x86_64
>  checking: host architecture word size... 64
>  checking: target architecture word size... 64
> => running project specific checks ...
>  checking: namespace: CLONE_NEWPID... yes
>  checking: namespace: CLONE_FS... yes
>  checking: namespace: CLONE_NEWNS... yes
>  checking: namespace: CLONE_NEWUSER... yes
>  checking: namespace: CLONE_NEWIPC... yes
>  checking: namespace: CLONE_NEWNET... yes
>  checking: namespace: CLONE_NEWUTS... yes
>  checking: namespace: CLONE_NEWCGROUP... no
>  checking: feature: NO_NEW_PRIVS... yes
>  checking: feature: MS_SLAVE... yes
>  checking: feature: MS_REC... yes
>  checking: feature: MS_PRIVATE... yes
>  checking: user capabilities... no
>  checking: header linux/securebits.h... no
>  checking: header linux/capability.h... yes
>  checking: function setns... no
>  checking: libssl+headers... yes
>  checking: libuuid+headers... yes
>  checking: libseccomp+headers... no
> INFO: userns and disable_suid are disabled. (mlocal/checks/basechecks.chk)
> => generating fragments ...
>  found build modules:
>    +-> internal/pkg/runtime/c/lib/util/util.mconf
> => building Makefile ...
> => generating singularity.spec ...
> => project setup with :
>     - target arch: x86_64
>     - target compiler: cc
>     - target wordsize: 64-bit
>     - host arch: x86_64
>     - host wordsize: 64-bit
>     - host system: unix
>     - config profile: release
>     - verbose: no
> => builddir/Makefile ready, try:
>    $ cd builddir
>    $ make
> + cd builddir
> + make old_config=
>  CC internal/pkg/runtime/c/lib/util/capability.c
>  CC internal/pkg/runtime/c/lib/util/message.c
>  CC internal/pkg/runtime/c/lib/util/setns.c
>  AR internal/pkg/runtime/c/lib/util/libutil.a
>  CSCOPE
>  DEPENDS
>  AR lib/libruntime.a
> go: unknown subcommand "generate"
> Run 'go help' for usage.
> make: *** [/root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/
> github.com/sylabs/singularity/internal/pkg/buildcfg/config.go] Error 2
> error: Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%build)
>
>
> RPM build errors:
>     Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%build)
>
>
------=_Part_1293_954210058.1548190972338
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>Update on this topic.=C2=A0 One fix I found was to up=
date the rpm&#39;s for golang.=C2=A0 Since I&#39;m on a dev box, I&#39;m ok=
 with that, but I&#39;d rather find a way to build the rpm using our golang=
 installed on /nfs.=C2=A0 Let me know if that is a possibility.=C2=A0 Thank=
s much.</div><div>rpm -qa | grep golang<br>golang-src-1.11.4-1.el6.noarch<b=
r>golang-bin-1.11.4-1.el6.x86_64<br>golang-1.11.4-1.el6.x86_64<br><br></div=
><div><br></div><div><br></div><div>go version<br>go version go1.11.4 linux=
/amd64<br>env | grep go<br>GOPATH=3D/root/go<br>rpmbuild -tb singularity-3.=
0.3.tar.gz<br>Executing(%prep): /bin/sh -e /var/tmp/rpm-tmp.eQId5o<br>+ uma=
sk 022<br>+ cd /root/rpmbuild/BUILD<br>+ LANG=3DC<br>+ export LANG<br>+ uns=
et DISPLAY<br>+ rm -rf singularity-3.0.3<br>+ mkdir singularity-3.0.3<br>+ =
exit 0<br>Executing(%build): /bin/sh -e /var/tmp/rpm-tmp.6ouPIr<br>+ umask =
022<br>+ cd /root/rpmbuild/BUILD<br>+ LANG=3DC<br>+ export LANG<br>+ unset =
DISPLAY<br>+ cd singularity-3.0.3<br>+ mkdir -p gopath/src/github.com/sylab=
s/singularity<br>+ tar -C gopath/src/github.com/sylabs/ -xf /root/singulari=
ty-3.0.3.tar.gz<br>+ export GOPATH=3D/root/rpmbuild/BUILD/singularity-3.0.3=
/gopath<br>+ GOPATH=3D/root/rpmbuild/BUILD/singularity-3.0.3/gopath<br>+ ex=
port PATH=3D/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system/s=
cripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/lo=
cal/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bin:=
/opt/pbs/default/sbin:/root/bin<br>+ PATH=3D/root/rpmbuild/BUILD/singularit=
y-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/f=
ortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbi=
n:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin<br>+ cd /ro=
ot/rpmbuild/BUILD/singularity-3.0.3/gopath/src/github.com/sylabs/singularit=
y<br>+ ./mconfig -V 3.0.3-1.el6 --prefix=3D/usr --exec-prefix=3D/usr --bind=
ir=3D/usr/bin --libexecdir=3D/usr/libexec --sysconfdir=3D/etc --sharedstate=
dir=3D/var/lib --localstatedir=3D/var --libdir=3D/usr/lib64<br>=3D&gt; runn=
ing base system checks ...<br>=C2=A0checking: host C compiler... cc<br>=C2=
=A0checking: host C++ compiler... c++<br>=C2=A0checking: host `ar&#39; path=
... ar<br>=C2=A0checking: host `ld&#39; path... ld<br>=C2=A0checking: host =
`ranlib&#39; path... ranlib<br>=C2=A0checking: host `objcopy&#39; path... o=
bjcopy<br>=C2=A0checking: target C compiler... cc<br>=C2=A0checking: target=
 C++ compiler... c++<br>=C2=A0checking: target `ar&#39; path... ar<br>=C2=
=A0checking: target `ld&#39; path... ld<br>=C2=A0checking: target `ranlib&#=
39; path... ranlib<br>=C2=A0checking: target `objcopy&#39; path... objcopy<=
br>=C2=A0checking: host compiles static binaries... yes<br>=C2=A0checking: =
target compiles static binaries... yes<br>=C2=A0checking: host os type... u=
nix<br>=C2=A0checking: host architecture... x86_64<br>=C2=A0checking: targe=
t architecture... x86_64<br>=C2=A0checking: host architecture word size... =
64<br>=C2=A0checking: target architecture word size... 64<br>=3D&gt; runnin=
g project specific checks ...<br>=C2=A0checking: namespace: CLONE_NEWPID...=
 yes<br>=C2=A0checking: namespace: CLONE_FS... yes<br>=C2=A0checking: names=
pace: CLONE_NEWNS... yes<br>=C2=A0checking: namespace: CLONE_NEWUSER... yes=
<br>=C2=A0checking: namespace: CLONE_NEWIPC... yes<br>=C2=A0checking: names=
pace: CLONE_NEWNET... yes<br>=C2=A0checking: namespace: CLONE_NEWUTS... yes=
<br>=C2=A0checking: namespace: CLONE_NEWCGROUP... no<br>=C2=A0checking: fea=
ture: NO_NEW_PRIVS... yes<br>=C2=A0checking: feature: MS_SLAVE... yes<br>=
=C2=A0checking: feature: MS_REC... yes<br>=C2=A0checking: feature: MS_PRIVA=
TE... yes<br>=C2=A0checking: user capabilities... no<br>=C2=A0checking: hea=
der linux/securebits.h... no<br>=C2=A0checking: header linux/capability.h..=
. yes<br>=C2=A0checking: function setns... no<br>=C2=A0checking: libssl+hea=
ders... yes<br>=C2=A0checking: libuuid+headers... yes<br>=C2=A0checking: li=
bseccomp+headers... no<br>INFO: userns and disable_suid are disabled. (mloc=
al/checks/basechecks.chk)<br>=3D&gt; generating fragments ...<br>=C2=A0foun=
d build modules:<br>=C2=A0=C2=A0 +-&gt; internal/pkg/runtime/c/lib/util/uti=
l.mconf<br>=3D&gt; building Makefile ...<br>=3D&gt; generating singularity.=
spec ...<br>=3D&gt; project setup with :<br>=C2=A0=C2=A0=C2=A0 - target arc=
h: x86_64<br>=C2=A0=C2=A0=C2=A0 - target compiler: cc<br>=C2=A0=C2=A0=C2=A0=
 - target wordsize: 64-bit<br>=C2=A0=C2=A0=C2=A0 - host arch: x86_64<br>=C2=
=A0=C2=A0=C2=A0 - host wordsize: 64-bit<br>=C2=A0=C2=A0=C2=A0 - host system=
: unix<br>=C2=A0=C2=A0=C2=A0 - config profile: release<br>=C2=A0=C2=A0=C2=
=A0 - verbose: no<br>=3D&gt; builddir/Makefile ready, try:<br>=C2=A0=C2=A0 =
$ cd builddir<br>=C2=A0=C2=A0 $ make<br>+ cd builddir<br>+ make old_config=
=3D<br>=C2=A0CC internal/pkg/runtime/c/lib/util/capability.c<br>=C2=A0CC in=
ternal/pkg/runtime/c/lib/util/message.c<br>=C2=A0CC internal/pkg/runtime/c/=
lib/util/setns.c<br>=C2=A0AR internal/pkg/runtime/c/lib/util/libutil.a<br>=
=C2=A0CSCOPE<br>=C2=A0DEPENDS<br>=C2=A0AR lib/libruntime.a<br>=C2=A0GO sing=
ularity<br>=C2=A0GEN singularity.conf<br>=C2=A0GO clean -cache<br>=C2=A0GO =
cmd/starter/c/starter<br>=C2=A0CNI PLUGIN bandwidth<br>=C2=A0CNI PLUGIN bri=
dge<br>=C2=A0CNI PLUGIN dhcp<br>=C2=A0CNI PLUGIN flannel<br>=C2=A0CNI PLUGI=
N host-device<br>=C2=A0CNI PLUGIN host-local<br>=C2=A0CNI PLUGIN ipvlan<br>=
=C2=A0CNI PLUGIN macvlan<br>=C2=A0CNI PLUGIN portmap<br>=C2=A0CNI PLUGIN pt=
p<br>=C2=A0CNI PLUGIN static<br>=C2=A0CNI PLUGIN tuning<br>=C2=A0CNI PLUGIN=
 vlan<br>+ exit 0<br>Executing(%install): /bin/sh -e /var/tmp/rpm-tmp.mAEbP=
3<br>+ umask 022<br>+ cd /root/rpmbuild/BUILD<br>+ &#39;[&#39; /root/rpmbui=
ld/BUILDROOT/singularity-3.0.3-1.el6.x86_64 &#39;!=3D&#39; / &#39;]&#39;<br=
>+ rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64<br>++ dir=
name /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64<br>+ mkdir -p =
/root/rpmbuild/BUILDROOT<br>+ mkdir /root/rpmbuild/BUILDROOT/singularity-3.=
0.3-1.el6.x86_64<br>+ LANG=3DC<br>+ export LANG<br>+ unset DISPLAY<br>+ cd =
singularity-3.0.3<br>+ export GOPATH=3D/root/rpmbuild/BUILD/singularity-3.0=
.3/gopath<br>+ GOPATH=3D/root/rpmbuild/BUILD/singularity-3.0.3/gopath<br>+ =
export PATH=3D/root/rpmbuild/BUILD/singularity-3.0.3/gopath/bin:/nfs/system=
/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system/fortran/ifort/bin/intel64:/usr/=
local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/pbs/default/bi=
n:/opt/pbs/default/sbin:/root/bin<br>+ PATH=3D/root/rpmbuild/BUILD/singular=
ity-3.0.3/gopath/bin:/nfs/system/scripts/:/usr/lib64/qt-3.3/bin:/nfs/system=
/fortran/ifort/bin/intel64:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/s=
bin:/usr/bin:/opt/pbs/default/bin:/opt/pbs/default/sbin:/root/bin<br>+ cd /=
root/rpmbuild/BUILD/singularity-3.0.3/gopath/src/github.com/sylabs/singular=
ity/builddir<br>+ mkdir -p /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6=
.x86_64/usr/share/man/man1<br>+ make DESTDIR=3D/root/rpmbuild/BUILDROOT/sin=
gularity-3.0.3-1.el6.x86_64 install man<br>=C2=A0INSTALL /root/rpmbuild/BUI=
LDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity<br>=C2=A0INSTALL =
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singula=
rity/bin/starter<br>=C2=A0INSTALL SUID /root/rpmbuild/BUILDROOT/singularity=
-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid<br>=C2=A0INSTA=
LL /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/var/singularity/=
mnt/session<br>=C2=A0INSTALL /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.e=
l6.x86_64/etc/singularity/singularity.conf<br>=C2=A0INSTALL /root/rpmbuild/=
BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/run-singularity<br>=C2=A0I=
NSTALL /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singular=
ity/capability.json<br>=C2=A0INSTALL /root/rpmbuild/BUILDROOT/singularity-3=
.0.3-1.el6.x86_64/etc/singularity/ecl.toml<br>=C2=A0INSTALL /root/rpmbuild/=
BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/bash_completion.d/singularity<=
br>=C2=A0INSTALL /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/et=
c/singularity/actions<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/=
singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth<br>=C2=
=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_=
64/usr/libexec/singularity/cni/bridge<br>=C2=A0INSTALL CNI PLUGIN /root/rpm=
build/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/=
dhcp<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/singularity-3.0.3=
-1.el6.x86_64/usr/libexec/singularity/cni/flannel<br>=C2=A0INSTALL CNI PLUG=
IN /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/sing=
ularity/cni/host-device<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROO=
T/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/host-local<br>=
=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x=
86_64/usr/libexec/singularity/cni/ipvlan<br>=C2=A0INSTALL CNI PLUGIN /root/=
rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/c=
ni/macvlan<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/singularity=
-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap<br>=C2=A0INSTALL CN=
I PLUGIN /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexe=
c/singularity/cni/ptp<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/=
singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/static<br>=C2=A0=
INSTALL CNI PLUGIN /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/=
usr/libexec/singularity/cni/tuning<br>=C2=A0INSTALL CNI PLUGIN /root/rpmbui=
ld/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/vla=
n<br>=C2=A0INSTALL CNI CONFIGURATION FILES<br>=C2=A0INSTALL /root/rpmbuild/=
BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/seccomp-profiles/d=
efault.json<br>=C2=A0INSTALL /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.e=
l6.x86_64/etc/singularity/nvliblist.conf<br>=C2=A0INSTALL /root/rpmbuild/BU=
ILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/cgroups/cgroups.toml=
<br>=C2=A0DONE<br>INFO=C2=A0=C2=A0=C2=A0 [U=3D0,P=3D374372]=C2=A0=C2=A0=C2=
=A0=C2=A0 main()=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=
=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0 Creating Singularity man pages at /root/rpmbuild/BUILDROOT/singulari=
ty-3.0.3-1.el6.x86_64/usr/share/man/man1<br>+ chmod 644 /root/rpmbuild/BUIL=
DROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/exec /root/rpm=
build/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/actions/run =
/root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/singularity/act=
ions/shell /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/etc/sing=
ularity/actions/start /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_=
64/etc/singularity/actions/test<br>+ /usr/lib/rpm/find-debuginfo.sh --stric=
t-build-id /root/rpmbuild/BUILD/<br>extracting debug info from /root/rpmbui=
ld/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/mac=
vlan<br>extracting debug info from /root/rpmbuild/BUILDROOT/singularity-3.0=
.3-1.el6.x86_64/usr/libexec/singularity/cni/portmap<br>extracting debug inf=
o from /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/=
singularity/cni/host-device<br>extracting debug info from /root/rpmbuild/BU=
ILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bridge<b=
r>extracting debug info from /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.e=
l6.x86_64/usr/libexec/singularity/cni/dhcp<br>extracting debug info from /r=
oot/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singulari=
ty/cni/static<br>extracting debug info from /root/rpmbuild/BUILDROOT/singul=
arity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/tuning<br>extracting d=
ebug info from /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/=
libexec/singularity/cni/ptp<br>extracting debug info from /root/rpmbuild/BU=
ILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/flannel<=
br>extracting debug info from /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.=
el6.x86_64/usr/libexec/singularity/cni/ipvlan<br>extracting debug info from=
 /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singul=
arity/cni/host-local<br>extracting debug info from /root/rpmbuild/BUILDROOT=
/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/cni/bandwidth<br>ex=
tracting debug info from /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x=
86_64/usr/libexec/singularity/cni/vlan<br>extracting debug info from /root/=
rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/b=
in/starter<br>/usr/lib/rpm/debugedit: /root/rpmbuild/BUILDROOT/singularity-=
3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: Unknown debugging s=
ection .debug_gdb_scripts<br>/usr/lib/rpm/debugedit: /root/rpmbuild/BUILDRO=
OT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter: .deb=
ug_line CU does not fit into section<br>extracting debug info from /root/rp=
mbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin=
/starter-suid<br>/usr/lib/rpm/debugedit: /root/rpmbuild/BUILDROOT/singulari=
ty-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/starter-suid: Unknown deb=
ugging section .debug_gdb_scripts<br>/usr/lib/rpm/debugedit: /root/rpmbuild=
/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/libexec/singularity/bin/start=
er-suid: .debug_line CU does not fit into section<br>*** WARNING: identical=
 binaries are copied, not linked:<br>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=
=C2=A0 /usr/libexec/singularity/bin/starter-suid<br>=C2=A0=C2=A0 and=C2=A0 =
/usr/libexec/singularity/bin/starter<br>extracting debug info from /root/rp=
mbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64/usr/bin/singularity<br>cpio=
: /tmp/go-build: Cannot stat: No such file or directory<br>3533 blocks<br>+=
 /usr/lib/rpm/check-buildroot<br>+ /usr/lib/rpm/redhat/brp-compress<br>+ /u=
sr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip<br>+ /usr/lib/rpm=
/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump<br>+ /usr/li=
b/rpm/brp-python-bytecompile<br>+ /usr/lib/rpm/redhat/brp-python-hardlink<b=
r>+ /usr/lib/rpm/redhat/brp-java-repack-jars<br>Processing files: singulari=
ty-3.0.3-1.el6.x86_64<br>warning: File listed twice: /etc/singularity/actio=
ns/exec<br>warning: File listed twice: /etc/singularity/actions/run<br>warn=
ing: File listed twice: /etc/singularity/actions/shell<br>warning: File lis=
ted twice: /etc/singularity/actions/start<br>warning: File listed twice: /e=
tc/singularity/actions/test<br>Provides: config(singularity) =3D 3.0.3-1.el=
6 singularity-runtime<br>Requires(rpmlib): rpmlib(CompressedFileNames) &lt;=
=3D 3.0.4-1 rpmlib(FileDigests) &lt;=3D 4.6.0-1 rpmlib(PayloadFilesHavePref=
ix) &lt;=3D 4.0-1<br>Requires: /bin/sh libc.so.6()(64bit) libc.so.6(GLIBC_2=
.2.5)(64bit) libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit) libc=
.so.6(GLIBC_2.4)(64bit) libc.so.6(GLIBC_2.7)(64bit) libdl.so.2()(64bit) lib=
dl.so.2(GLIBC_2.2.5)(64bit) libpthread.so.0()(64bit) libpthread.so.0(GLIBC_=
2.2.5)(64bit) libpthread.so.0(GLIBC_2.3.2)(64bit) rtld(GNU_HASH)<br>Obsolet=
es: singularity-runtime<br>Processing files: singularity-debuginfo-3.0.3-1.=
el6.x86_64<br>Checking for unpackaged file(s): /usr/lib/rpm/check-files /ro=
ot/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64<br>Wrote: /root/rpmbui=
ld/RPMS/x86_64/singularity-3.0.3-1.el6.x86_64.rpm<br>Wrote: /root/rpmbuild/=
RPMS/x86_64/singularity-debuginfo-3.0.3-1.el6.x86_64.rpm<br>Executing(%clea=
n): /bin/sh -e /var/tmp/rpm-tmp.K11Z8n<br>+ umask 022<br>+ cd /root/rpmbuil=
d/BUILD<br>+ rm -rf /root/rpmbuild/BUILDROOT/singularity-3.0.3-1.el6.x86_64=
<br>+ exit 0<br></div><div><br></div><div>ls -lat rpmbuild/RPMS/x86_64/<br>=
total 43424<br>-rw-r--r-- 1 root root 18417700 Jan 22 15:57 singularity-deb=
uginfo-3.0.3-1.el6.x86_64.rpm<br>drwxr-xr-x 2 root root=C2=A0=C2=A0=C2=A0=
=C2=A0 4096 Jan 22 15:57 .<br>-rw-r--r-- 1 root root 26037820 Jan 22 15:57 =
singularity-3.0.3-1.el6.x86_64.rpm<br>drwxr-xr-x 3 root root=C2=A0=C2=A0=C2=
=A0=C2=A0 4096 Jan 22 15:56 ..<br><br></div><br>On Tuesday, January 22, 201=
9 at 3:19:59 PM UTC-5, Richard Powell wrote:<blockquote class=3D"gmail_quot=
e" style=3D"margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid;paddin=
g-left: 1ex;"><div dir=3D"ltr"><div>Last month, and previous months, I was =
able to build the rpm for Singularity with ease after having our security t=
eam open a hole in the proxy.=C2=A0 This process no longer works a singular=
ity v3.0.3.=C2=A0 I miss last month&#39;s strategy now for building rpms!=
=C2=A0 Is there a path to success if I&#39;m strapped with a centralized go=
lang install and I simply need to build rpms without access to git?=C2=A0 P=
lease advise on how to build rpm with only access to google.dl golang or ol=
d local golang.<br></div><div><br></div><div>On our RHEL6, the following is=
 all I needed to do and the script would wget to google.dl for latest golan=
g and all worked well.<br></div><div><span style=3D"font-size:9.0pt;font-fa=
mily:&quot;Courier New&quot;">rpmbuild -tb
singularity-3.0.2.tar.gz</span></div><div><span style=3D"font-size:9.0pt;fo=
nt-family:&quot;Courier New&quot;"><br></span></div><div><span style=3D"fon=
t-size:9.0pt;font-family:&quot;Courier New&quot;">Now, on same RHEL6 server=
, the script does not attempt to wget golang and instead (perhaps) looks fo=
r golang package install, which I didn&#39;t initially have.=C2=A0 Our inst=
all of golang, however, is not installed via rpm and is on a centralized /n=
fs mount point to which a module environment file sets PATH and GOROOT and =
I set GOPATH on the terminal.<br></span></div><div><span style=3D"font-size=
:9.0pt;font-family:&quot;Courier New&quot;">------------------------------<=
wbr>---first failed attempt using our centralized golang----------------<br=
></span></div><div><span style=3D"font-size:9.0pt;font-family:&quot;Courier=
 New&quot;">#1 module load go_1_11_1</span></div><div><span style=3D"font-s=
ize:9.0pt;font-family:&quot;Courier New&quot;">#2 export GOPATH=3D$</span><=
span style=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;"><span st=
yle=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;">{HOME}/go</span=
></span></div><div><span style=3D"font-size:9.0pt;font-family:&quot;Courier=
 New&quot;"><span style=3D"font-size:9.0pt;font-family:&quot;Courier New&qu=
ot;">#3 env | grep go<br>PATH=3D/nfs/system/golang/go/<wbr>bin:/nfs/system/=
scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/ifort/bin/inte=
l64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/sbin:/usr/bin:=
<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin<br>_LMFILES_=
=3D/nfs/system/envir_<wbr>modulefiles/go_1_11_1<br>LOADEDMODULES=3Dgo_1_11_=
1<br>GOROOT=3D/nfs/system/golang/go<br>GOPATH=3D/root/go<br>#4 rpmbuild -tb=
 singularity-3.0.3.tar.gz<br></span></span></div><div><span style=3D"font-s=
ize:9.0pt;font-family:&quot;Courier New&quot;"><span style=3D"font-size:9.0=
pt;font-family:&quot;Courier New&quot;"></span></span></div><div><span styl=
e=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;"><span style=3D"fo=
nt-size:9.0pt;font-family:&quot;Courier New&quot;">#5 failed result below:<=
/span></span></div><div><span style=3D"font-size:9.0pt;font-family:&quot;Co=
urier New&quot;"><span style=3D"font-size:9.0pt;font-family:&quot;Courier N=
ew&quot;">rpmbuild -tb singularity-3.0.3.tar.gz<br>error: Failed build depe=
ndencies:<br>=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0 golang is needed by=
 singularity-3.0.3-1.el6.x86_64<br></span></span></div><div><span style=3D"=
font-size:9.0pt;font-family:&quot;Courier New&quot;"><span style=3D"font-si=
ze:9.0pt;font-family:&quot;Courier New&quot;">--------------------end of fi=
rst attempt-----------------------<wbr>----<br></span></span></div><div><sp=
an style=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;"><span styl=
e=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;"><br></span></span=
></div><div><span style=3D"font-size:9.0pt;font-family:&quot;Courier New&qu=
ot;"><span style=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;">--=
---------------second failed attempt with RHEL6 EPEL golang----------------=
--------<wbr>---<br></span></span></div><div><span style=3D"font-size:9.0pt=
;font-family:&quot;Courier New&quot;"><span style=3D"font-size:9.0pt;font-f=
amily:&quot;Courier New&quot;">When above failed, I installed golang via rp=
m from epel, but it&#39;s old and gave the following issue:</span></span></=
div><div><span style=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;=
"><span style=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;">rpm -=
qa | grep golang<br>golang-src-1.3.3-1.el6.noarch<br>golang-pkg-bin-linux-a=
md64-1.<wbr>3.3-1.el6.x86_64<br>golang-1.3.3-1.el6.x86_64<br>golang-pkg-lin=
ux-amd64-1.3.3-<wbr>1.el6.noarch<br><br></span></span></div><div><span styl=
e=3D"font-size:9.0pt;font-family:&quot;Courier New&quot;"><span style=3D"fo=
nt-size:9.0pt;font-family:&quot;Courier New&quot;">Executing(%prep): /bin/s=
h -e /var/tmp/rpm-tmp.DNm3VF<br>+ umask 022<br>+ cd /root/rpmbuild/BUILD<br=
>+ LANG=3DC<br>+ export LANG<br>+ unset DISPLAY<br>+ rm -rf singularity-3.0=
.3<br>+ mkdir singularity-3.0.3<br>+ exit 0<br>Executing(%build): /bin/sh -=
e /var/tmp/rpm-tmp.WJLNPo<br>+ umask 022<br>+ cd /root/rpmbuild/BUILD<br>+ =
LANG=3DC<br>+ export LANG<br>+ unset DISPLAY<br>+ cd singularity-3.0.3<br>+=
 mkdir -p gopath/src/<a href=3D"http://github.com/sylabs/singularity" targe=
t=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.go=
ogle.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\x26sa\x3dD=
\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true=
;" onclick=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2F=
github.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNG=
hyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;return true;">github.com/sylabs/<wbr>singu=
larity</a><br>+ tar -C gopath/src/<a href=3D"http://github.com/sylabs/" tar=
get=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.=
google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2F\x26sa\x3dD\x26sntz\=
x3d1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhxRsfI5IQ&#39;;return true;" onclic=
k=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.co=
m%2Fsylabs%2F\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNH7zJRyNdXUGYuPl0nmJhx=
RsfI5IQ&#39;;return true;">github.com/sylabs/</a> -xf /root/singularity-3.0=
.3.tar.gz<br>+ export GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/=
gopath<br>+ GOPATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath<br>=
+ export PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wb=
r>nfs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/i=
fort/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/s=
bin:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin=
<br>+ PATH=3D/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/bin:/<wbr>n=
fs/system/scripts/:/usr/<wbr>lib64/qt-3.3/bin:/nfs/system/<wbr>fortran/ifor=
t/bin/intel64:/<wbr>usr/local/sbin:/usr/local/bin:<wbr>/sbin:/bin:/usr/sbin=
:/usr/bin:<wbr>/opt/pbs/default/bin:/opt/pbs/<wbr>default/sbin:/root/bin<br=
>+ cd /root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/src/<a href=3D"htt=
p://github.com/sylabs/singularity" target=3D"_blank" rel=3D"nofollow" onmou=
sedown=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fgith=
ub.com%2Fsylabs%2Fsingularity\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKp=
KvjK8ndWENMKusqOlTNYSMQ&#39;;return true;" onclick=3D"this.href=3D&#39;http=
://www.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity\x=
26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNGhyKpKvjK8ndWENMKusqOlTNYSMQ&#39;;re=
turn true;">g<wbr>ithub.com/sylabs/singularity</a><br>+ ./mconfig -V 3.0.3-=
1.el6 --prefix=3D/usr --exec-prefix=3D/usr --bindir=3D/usr/bin --libexecdir=
=3D/usr/libexec --sysconfdir=3D/etc --sharedstatedir=3D/var/lib --localstat=
edir=3D/var --libdir=3D/usr/lib64<br>=3D&gt; running base system checks ...=
<br>=C2=A0checking: host C compiler... cc<br>=C2=A0checking: host C++ compi=
ler... c++<br>=C2=A0checking: host `ar&#39; path... ar<br>=C2=A0checking: h=
ost `ld&#39; path... ld<br>=C2=A0checking: host `ranlib&#39; path... ranlib=
<br>=C2=A0checking: host `objcopy&#39; path... objcopy<br>=C2=A0checking: t=
arget C compiler... cc<br>=C2=A0checking: target C++ compiler... c++<br>=C2=
=A0checking: target `ar&#39; path... ar<br>=C2=A0checking: target `ld&#39; =
path... ld<br>=C2=A0checking: target `ranlib&#39; path... ranlib<br>=C2=A0c=
hecking: target `objcopy&#39; path... objcopy<br>=C2=A0checking: host compi=
les static binaries... yes<br>=C2=A0checking: target compiles static binari=
es... yes<br>=C2=A0checking: host os type... unix<br>=C2=A0checking: host a=
rchitecture... x86_64<br>=C2=A0checking: target architecture... x86_64<br>=
=C2=A0checking: host architecture word size... 64<br>=C2=A0checking: target=
 architecture word size... 64<br>=3D&gt; running project specific checks ..=
.<br>=C2=A0checking: namespace: CLONE_NEWPID... yes<br>=C2=A0checking: name=
space: CLONE_FS... yes<br>=C2=A0checking: namespace: CLONE_NEWNS... yes<br>=
=C2=A0checking: namespace: CLONE_NEWUSER... yes<br>=C2=A0checking: namespac=
e: CLONE_NEWIPC... yes<br>=C2=A0checking: namespace: CLONE_NEWNET... yes<br=
>=C2=A0checking: namespace: CLONE_NEWUTS... yes<br>=C2=A0checking: namespac=
e: CLONE_NEWCGROUP... no<br>=C2=A0checking: feature: NO_NEW_PRIVS... yes<br=
>=C2=A0checking: feature: MS_SLAVE... yes<br>=C2=A0checking: feature: MS_RE=
C... yes<br>=C2=A0checking: feature: MS_PRIVATE... yes<br>=C2=A0checking: u=
ser capabilities... no<br>=C2=A0checking: header linux/securebits.h... no<b=
r>=C2=A0checking: header linux/capability.h... yes<br>=C2=A0checking: funct=
ion setns... no<br>=C2=A0checking: libssl+headers... yes<br>=C2=A0checking:=
 libuuid+headers... yes<br>=C2=A0checking: libseccomp+headers... no<br>INFO=
: userns and disable_suid are disabled. (mlocal/checks/basechecks.chk)<br>=
=3D&gt; generating fragments ...<br>=C2=A0found build modules:<br>=C2=A0=C2=
=A0 +-&gt; internal/pkg/runtime/c/lib/<wbr>util/util.mconf<br>=3D&gt; build=
ing Makefile ...<br>=3D&gt; generating singularity.spec ...<br>=3D&gt; proj=
ect setup with :<br>=C2=A0=C2=A0=C2=A0 - target arch: x86_64<br>=C2=A0=C2=
=A0=C2=A0 - target compiler: cc<br>=C2=A0=C2=A0=C2=A0 - target wordsize: 64=
-bit<br>=C2=A0=C2=A0=C2=A0 - host arch: x86_64<br>=C2=A0=C2=A0=C2=A0 - host=
 wordsize: 64-bit<br>=C2=A0=C2=A0=C2=A0 - host system: unix<br>=C2=A0=C2=A0=
=C2=A0 - config profile: release<br>=C2=A0=C2=A0=C2=A0 - verbose: no<br>=3D=
&gt; builddir/Makefile ready, try:<br>=C2=A0=C2=A0 $ cd builddir<br>=C2=A0=
=C2=A0 $ make<br>+ cd builddir<br>+ make old_config=3D<br>=C2=A0CC internal=
/pkg/runtime/c/lib/<wbr>util/capability.c<br>=C2=A0CC internal/pkg/runtime/=
c/lib/<wbr>util/message.c<br>=C2=A0CC internal/pkg/runtime/c/lib/<wbr>util/=
setns.c<br>=C2=A0AR internal/pkg/runtime/c/lib/<wbr>util/libutil.a<br>=C2=
=A0CSCOPE<br>=C2=A0DEPENDS<br>=C2=A0AR lib/libruntime.a<br>go: unknown subc=
ommand &quot;generate&quot;<br>Run &#39;go help&#39; for usage.<br>make: **=
* [/root/rpmbuild/BUILD/<wbr>singularity-3.0.3/gopath/src/<a href=3D"http:/=
/github.com/sylabs/singularity/internal/pkg/buildcfg/config.go" target=3D"_=
blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.google.c=
om/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity%2Finternal%2Fpkg=
%2Fbuildcfg%2Fconfig.go\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFDxCY14SUyO=
RJSfXIA4YNcOkWHOA&#39;;return true;" onclick=3D"this.href=3D&#39;http://www=
.google.com/url?q\x3dhttp%3A%2F%2Fgithub.com%2Fsylabs%2Fsingularity%2Finter=
nal%2Fpkg%2Fbuildcfg%2Fconfig.go\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFD=
xCY14SUyORJSfXIA4YNcOkWHOA&#39;;return true;">g<wbr>ithub.com/sylabs/singul=
arity/<wbr>internal/pkg/buildcfg/config.<wbr>go</a>] Error 2<br>error: Bad =
exit status from /var/tmp/rpm-tmp.WJLNPo (%build)<br><br><br>RPM build erro=
rs:<br>=C2=A0=C2=A0=C2=A0 Bad exit status from /var/tmp/rpm-tmp.WJLNPo (%bu=
ild)<br><br></span></span></div></div></blockquote></div>
------=_Part_1293_954210058.1548190972338--

------=_Part_1292_1645068467.1548190972336--
