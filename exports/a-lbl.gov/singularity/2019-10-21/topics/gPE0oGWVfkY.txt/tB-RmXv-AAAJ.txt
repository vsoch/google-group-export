X-Received: by 10.129.175.24 with SMTP id n24mr6288166ywh.7.1496898878363;
        Wed, 07 Jun 2017 22:14:38 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.107.18.206 with SMTP id 75ls2015886ios.22.gmail; Wed, 07 Jun
 2017 22:14:37 -0700 (PDT)
X-Received: by 10.99.127.78 with SMTP id p14mr36262935pgn.124.1496898877248;
        Wed, 07 Jun 2017 22:14:37 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1496898877; cv=none;
        d=google.com; s=arc-20160816;
        b=LHH5Tg44Ve+Nr5r8d+Uq3WZ15ZtNqU2XEKumC7PkMpK/aE39BVD5gPBCfjX56USeKn
         IZq0cBOES5V9AK5QtIgYJkGms+fOR37sIwaC0C5bczgW/jFly3GuLaFpTI0wIKNXWtFz
         hti4TU0l7DbO7cqXplIGFdhkV3NpV6Bg8Ki7Wu1rxMyRnFRVt1Q2lP2/iQPYEVjdBdBU
         lYrTNJbyfM+US497vEX5Nlta6L1gVuJ5GdcIeI8hRlpKioOK8K68h2ysMDcYZmefmAHL
         Q2sQbdtMDTfhrjACQsk+549yYSgzeSLzY3UvEtyEWE4YEbOe6RFdj9bCbHVVxBwyd/Ju
         bNLw==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=to:subject:message-id:date:from:references:in-reply-to:mime-version
         :dkim-signature:arc-authentication-results;
        bh=aWMVsU6BVYhV93/F8W/cEUrSVn3zidhtHxHXb387reY=;
        b=kW9Bc7U9iQJV7fWqP3N6Wda6C7IllAyGGYCFEyR8huYgRC2shpIBz5twp3uFJ4HZUf
         QDcp2zW8eraEbH3BwBddYcFbRLZyeyLyLtQDkgn3q/vMo+qGNXSsrE3WZQPubInT53+m
         48XTr6fAaO9TNNH+8982u8B6IjDyN0uUB+IT5+NqK1lOUOLs7SzFfSGViobhUBasjT2k
         Djz+XmuKDnFZ+vfdIQG7l2EuHUYvcUYDhlnGKMzK6qJvbRQrZju0Hk4h6Ajx7nRLKZsz
         zgvInf3uH1cyIjsh1+idz2tARIZaIU6G7t/Sa9V/aZ+Ho1WplHinOcDvHZNVcO6jRh7X
         B6HA==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass head...@gmail.com;
       spf=pass (google.com: domain of vso...@gmail.com designates 209.85.213.43 as permitted sender) smtp.mailfrom=vso...@gmail.com
Return-Path: <vso...@gmail.com>
Received: from fe3.lbl.gov (fe3.lbl.gov. [128.3.41.68])
        by mx.google.com with ESMTP id l1si3441485plg.314.2017.06.07.22.14.37
        for <singu...@lbl.gov>;
        Wed, 07 Jun 2017 22:14:37 -0700 (PDT)
Received-SPF: pass (google.com: domain of vso...@gmail.com designates 209.85.213.43 as permitted sender) client-ip=209.85.213.43;
Authentication-Results: mx.google.com;
       dkim=pass head...@gmail.com;
       spf=pass (google.com: domain of vso...@gmail.com designates 209.85.213.43 as permitted sender) smtp.mailfrom=vso...@gmail.com
X-Ironport-SBRS: 3.4
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A2EtAAAM3DhZhivVVdFbAxoBAQEBAgEBA?=
 =?us-ascii?q?QEIAQEBARYBAQEDAQEBCQEBAYJEPoENgQsCB4NkCGNTiGKRanKBEVwKikeIUYF?=
 =?us-ascii?q?OGyUDIQEJgXCDKhVKAkKCJAc/GAEBAQEBAQEBAQEBAhABAQEICwsIKC+CMwUCA?=
 =?us-ascii?q?xoGBARGIQUBAQEDAQEBAQEBAQEBAQEBHwEBAQEBAQEBAQEBAQEBAQEBAQEBAQE?=
 =?us-ascii?q?BAQEBAQEBAQEBAQEBAQYCDQYYBA8SAQEYAQEBAQIBGgkdAQoBAg4eAwELBgMCC?=
 =?us-ascii?q?wYCAQECARULAQkCAiEBAQIMAwEFAQsJCA4HBAEaAgSIOIE5AQMNCAULkgmRGj+?=
 =?us-ascii?q?MB4IEBQEcgwoFgQABgmcKGScNVoNcAQEBAQEBAQMBAQEBAQEBAQEBARUCBhKIL?=
 =?us-ascii?q?4IUWDSCWE6BFRIBPAEMEgiCS4JhAQSJTYZmhlSGdzuHJ4M3g36EX4IGVYhXhk+?=
 =?us-ascii?q?LQzeHJhQfgRUPEIEFMwt0FV+EXw8QDIIBJDYBAQEBBIdJR4FpAQEB?=
X-IronPort-AV: E=Sophos;i="5.39,313,1493708400"; 
   d="scan'208,217";a="77926787"
Received: from mail-vk0-f43.google.com ([209.85.213.43])
  by fe3.lbl.gov with ESMTP; 07 Jun 2017 22:14:34 -0700
Received: by mail-vk0-f43.google.com with SMTP id g66so12903003vki.1
        for <singu...@lbl.gov>; Wed, 07 Jun 2017 22:14:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to;
        bh=aWMVsU6BVYhV93/F8W/cEUrSVn3zidhtHxHXb387reY=;
        b=rf4IjKFINGsNz0FhZE1GzwCah1qxTQ0hkhfkjRWDVd7bjPxPEyP5NbMni0J8JAczMN
         uf2Mnk/bRqt3WEDC/2RhUhM41U4aW7tn58Izer6plAtuPPz2IpeWVdAGacXMH859/rgi
         JE/gSubrfbgXCSTqdc9uc5Y0avfRPYFooi2WNT704vC7jzmWJW9hi7pq8nYUquRxHIca
         D4Q8TbQXZirgOaVqupfC2AOFG92K4UDQyVS0J8UD3ygxxBX0J9SQb6R3qbnd0E06ZR13
         mDK2Nr+jXS0uS/a1J/JyiTl32lPUyrtq7Hg4f5NeXOR3hpKK4kga43Iq8HAsXo5woDxG
         tY3w==
X-Gm-Message-State: AODbwcDlTqq2FOm4BHCiXYxU1VzbacatojkoJkxyJ75MxVSZN9RZMdJA
	aoxXFI9Nq4k+5PpokAfCSTILOpGxOLsd2fA=
X-Received: by 10.31.80.131 with SMTP id e125mr12489303vkb.116.1496898872360;
 Wed, 07 Jun 2017 22:14:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.103.49.67 with HTTP; Wed, 7 Jun 2017 22:14:11 -0700 (PDT)
In-Reply-To: <4D1C1097-D067-4833-8A14-A94E36CE2D31@umich.edu>
References: <D94ED8FC-5F26-448A-ABCB-6D9391B5A05E@llnl.gov>
 <a8f9f7d6-69d6-40e8-9e04-1c66677ec63a@lbl.gov> <C90D3F81-8E77-4849-B9E4-4B4D38855746@llnl.gov>
 <6bba2549-da61-4e46-b601-428c11693797@lbl.gov> <CAMuRc6Aa-coi+hQDd695NQCK4Dm9dnir7TXj_d1N7gzFBLy9qg@mail.gmail.com>
 <a9cf7f23-52be-4d08-944f-1886edee6180@lbl.gov> <CAMuRc6AgUzay+FO=6uHv50gn4fhX0-ga0M2586Djp3iQai5EGw@mail.gmail.com>
 <EB3CECA0-D783-40DF-B7EE-21F635D828CA@llnl.gov> <8f8d2636-6fd8-4c2f-8fc5-bd52e8f628f7@lbl.gov>
 <389d200c-bfca-4fc3-a87e-2ae66adffe32@lbl.gov> <1C09E987-0AD2-4366-B951-8055DAF87C2F@llnl.gov>
 <27DC1985-F053-4781-987D-9AC38A4DFA8F@llnl.gov> <4D1C1097-D067-4833-8A14-A94E36CE2D31@umich.edu>
From: vanessa s <vso...@gmail.com>
Date: Thu, 8 Jun 2017 01:14:11 -0400
Message-ID: <CAM=pu++-0x8p3MJ_9VLtK=N2EGqe4M+dHy72eaei2jEKRGvGtg@mail.gmail.com>
Subject: Re: [Singularity] daemons started in container run forever
To: singularity@lbl.gov
Content-Type: multipart/alternative; boundary="001a114e22c08d443205516bedb6"

--001a114e22c08d443205516bedb6
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Hey all!

Let's keep these discussions going, but on this issue:

https://github.com/singularityware/singularity/issues/735

Ain't nobody ever going to find it here, lol. If you don't have a Github
account I'd be happy to add for you :)

On Wed, Jun 7, 2017 at 11:11 PM, Michael Bauer <bau...@umich.edu> wrote:

> Hi all,
>
> Singularity is, in its current state, not capable of properly dealing wit=
h
> daemons (and to a broader point, PID namespaces in general) running in th=
e
> container. We are currently fleshing out a solution to this and have begu=
n
> working on possible implementations. The current proposed solution is to
> implement an optional start/stop feature, which will properly handle the
> PID namespace by spawning an =E2=80=9Cs-init=E2=80=9D process inside the =
PID namespace
> which will exist as PID 1. =E2=80=9Csingularity stop=E2=80=9D will instru=
ct the =E2=80=9Cs-init=E2=80=9D
> process inside the PID namespace to terminate, which will cause the kerne=
l
> to reap the remaining process inside the PID namespace. Daemon processes
> spawned inside the PID namespace will no longer linger after the main
> singularity process is terminated. Let me know if this will be sufficient
> for your use cases!
>
> Michael
>
> On Jun 7, 2017, at 2:28 PM, Goldstone, Robin J. <golds...@llnl.gov>
> wrote:
>
> OK sorry for all the spam and confusion.  I successfully installed
> Singularity v2.3 into a local filesystem and now all the suid bits are in
> place.  I was able to follow Cedric=E2=80=99s instructions:
>
> As workaround for your problem, you could use singularity shell with -p
> option to create a new PID namespace:
> $ singularity shell -p image.img
> > service apache start
> > exit
> so apache daemon will be killed once shell exit
>
> shell =E2=80=93p did indeed start apache then killed it when I quit out o=
f the
> container.  But if I try to use exec =E2=80=93p or run -p it just starts =
the daemon
> and then immediately kills it.
>
> So this is where it seems we do need the =E2=80=9Csingularity start/stop=
=E2=80=9D command
> so I can start apache in the background then later shut down the containe=
r
> and kill the processes.
>
> -Robin
>
>
> *From: *"Robin J. Goldstone" <golds...@llnl.gov>
> *Reply-To: *"singu...@lbl.gov" <singu...@lbl.gov>
> *Date: *Wednesday, June 7, 2017 at 1:03 PM
> *To: *"singu...@lbl.gov" <singu...@lbl.gov>
> *Subject: *Re: [Singularity] Re: daemons started in container run forever
>
> OK I think I know what is going on.  I was trying to install my own copy
> in my home dir but you must be root when you do make install or the setui=
d
> components don=E2=80=99t get installed.
>
> *From: *C=C3=A9dric Clerget <cedric...@gmail.com>
> *Reply-To: *"singu...@lbl.gov" <singu...@lbl.gov>
> *Date: *Wednesday, June 7, 2017 at 12:44 PM
> *To: *singularity <singu...@lbl.gov>
> *Subject: *Re: [Singularity] Re: daemons started in container run forever
>
> sorry miss the root work for you
> singularity binary has setuid bit set or allow setuid in singularity.conf
> is set to no ?
>
> Le mercredi 7 juin 2017 21:38:24 UTC+2, C=C3=A9dric Clerget a =C3=A9crit =
:
>
> if you run this command : cat /boot/config-$(uname -r)|grep CONFIG_PID
> should give CONFIG_PID_NS=3Dy, if nothing so the kernel don't support
> namespace
>
> Le mercredi 7 juin 2017 21:31:35 UTC+2, Robin Goldstone a =C3=A9crit :
>
> My singularity.conf has:
> # ALLOW PID NS: [BOOL]
> # DEFAULT: yes
> # Should we allow users to request the PID namespace?
> allow pid ns =3D yes
>
> As Tom suggested, it appears there is something about our system
> configuration that is preventing Singularity from establishing a PID
> namespace when running as a regular user.  If I run the container as root
> it works fine.
>
> I=E2=80=99m checking with our kernel guys to see if they can confirm this=
.  It
> seems like this is a bit orthogonal to the discussion about having a
> singularity start/stop command so don=E2=80=99t let me stop you from cont=
inuing the
> conversation!
>
> *From: *CARLOS EDUARDO ARANGO GUTIERREZ <carlos.aran...@correounivalle
> .edu.co>
> *Reply-To: *"si...@lbl.gov" <si...@lbl.gov>
> *Date: *Wednesday, June 7, 2017 at 12:22 PM
> *To: *"si...@lbl.gov" <si...@lbl.gov>
> *Subject: *Re: [Singularity] Re: daemons started in container run forever
>
> Like the idea of a /var/run/singularity/{image-name}.{pid}
> Stop will also $rm /var/run/singularity/{image-name}.{pid} (hopefully)
>
> The other thing that must be considered is how to launch the same daemon
> multiple times, as we are thinking on a production environment (Shared
> cluster) where multiple users are working on...
>
> On 7 June 2017 at 14:13, C=C3=A9dric Clerget <ced...@gmail.com> wrote:
>
> Basic idea, something based on image/file name, the start command store
> /var/run/singularity/image-name.pid and stop read the corresponding pid
> file based on image name to kill it, as we rarely launch the same daemon
> twice it should be handle most cases, no ?
>
> Le mercredi 7 juin 2017 20:50:30 UTC+2, CARLOS EDUARDO ARANGO GUTIERREZ a
> =C3=A9crit :
>
> C=C3=A9dric, any ideas on how you would implement this without the need o=
f a
> containerd to keep track of "Started" containers.
>
> +1 on this topic.
>
> On 7 June 2017 at 13:47, C=C3=A9dric Clerget <ced...@gmail.com> wrote:
>
> Hi Robin,
>
> Singularity implement PID namespace but don't offer to run a daemon insid=
e
> container in background, the purpose of start/stop command would allow to
> run something like this:
> $ singularity start image.img service apache start
>
> And stop it later like this
> $ singularity stop image.img
>
> As workaround for your problem, you could use singularity shell with -p
> option to create a new PID namespace :
> $ singularity shell -p image.img
> > service apache start
> > exit
> so apache daemon will be killed once shell exit
>
> The start/stop command would open other possibilities
>
> Best regards,
> Cedric Clerget
>
> Le mercredi 7 juin 2017 20:00:27 UTC+2, Robin Goldstone a =C3=A9crit :
>
> Hi Cedric,
>
> You wrote: =E2=80=9CIn order to work, Singularity should implement PID na=
mespsaces
> with start/stop commands. PID namespaces will allow Singularity to become
> the init process in order to own daemon processes running inside containe=
r
> and make a clean exit with stop command.=E2=80=9D
>
> Are you saying Singularity does implement this or should?  Also when you
> refer to start/stop commands, are you referring to my =E2=80=9Cservice ap=
ache2
> start=E2=80=9D command in the container or are you saying Singularity sho=
uld have a
> command to stop (cleanly shut down) a container?
>
> Thanks,
> Robin
>
> *From: *C=C3=A9dric Clerget <ced...@gmail.com>
> *Reply-To: *"si...@lbl.gov" <si...@lbl.gov>
> *Date: *Wednesday, June 7, 2017 at 12:43 AM
> *To: *singularity <si...@lbl.gov>
> *Subject: *[Singularity] Re: daemons started in container run forever
>
> It's normal, daemon processes uses double fork to be attached to the init
> process and avoid zombie processes, that's why singularity process don't
> own your apache process even if you logout from container, between
> singularity shouldn't be able to unmount the bind partitions because apac=
he
> process uses files in container resulting in a no clean state.
>
> In order to work, Singularity should implement PID namespsaces with
> start/stop commands. PID namespaces will allow Singularity to become the
> init process in order to own daemon processes running inside container an=
d
> make a clean exit with stop command
>
> Best regards,
> Cedric Clerget
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
>
>
>
> --
>
> ------------------------------------------------------------
> ------------------------------------------------------------
> CARLOS EDUARDO ARANGO GUTIERREZ.
> Cel : +57 3182545671 <+57%20318%202545671>
> Computer Science PhD Student
> UNIVERSIDAD DEL VALLE <http://www.univalle.edu.co/>
> Laboratorio de redes y sistemas distribuidos - LASCILAB
> <http://lascilab.univalle.edu.co/>
> Tecnolog=C3=ADa, Informaci=C3=B3n y Complejidad Cu=C3=A1ntica - QuanTIC (=
GrupLAC
> <http://secure-web.cisco.com/1YnCmFu2EmyLV3KtcdG7MhcbZWuqIoT0ts6YjNH3sTyL=
aOzBcYm2hBXmGSJgHXY39ISfBk-ZU2pc3n8PZDMhzUd7-MgtS0rKTe0qre6NfLmcwhfZ21elmRe=
OYn37VRqilvsZqJVEcYHuPwKGITh2vKdENpIV2_7zQ7mdVmPTOHxGF8EcYv-L5VIeH73Tg-Ymde=
96qj2Ijyq6UGF3sR4wcqEecWejgHPOCbhfTA6O9MpPNrBVMHoT0WtMi2rFlmMCZGP8iM6PrD8_K=
mxKz1wb3S1eMJji51aEfdq05ZZj2Ns5QETHkd7MNG1I2PaK09LItZF7uGgl0oe1ZD1XySOpDcFF=
v5ROyWhiVKMmzXecWHhYBHqiwSGzY95wNjxgYEAP6/http%3A%2F%2F201.234.78.173%3A808=
0%2Fgruplac%2Fjsp%2Fvisualiza%2Fvisualizagr.jsp%3Fnro%3D00000000010436>
> )
> Centro de Investigaci=C3=B3n e Innovaci=C3=B3n en Bioinform=C3=A1tica y F=
ot=C3=B3nica (CIBioFi)
> <http://cibiofi.univalle.edu.co/>
>
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
>
>
>
> --
>
> ------------------------------------------------------------
> ------------------------------------------------------------
> CARLOS EDUARDO ARANGO GUTIERREZ.
> Cel : +57 3182545671 <+57%20318%202545671>
> Computer Science PhD Student
> UNIVERSIDAD DEL VALLE <http://www.univalle.edu.co/>
> Laboratorio de redes y sistemas distribuidos - LASCILAB
> <http://lascilab.univalle.edu.co/>
> Tecnolog=C3=ADa, Informaci=C3=B3n y Complejidad Cu=C3=A1ntica - QuanTIC (=
GrupLAC
> <http://secure-web.cisco.com/1YnCmFu2EmyLV3KtcdG7MhcbZWuqIoT0ts6YjNH3sTyL=
aOzBcYm2hBXmGSJgHXY39ISfBk-ZU2pc3n8PZDMhzUd7-MgtS0rKTe0qre6NfLmcwhfZ21elmRe=
OYn37VRqilvsZqJVEcYHuPwKGITh2vKdENpIV2_7zQ7mdVmPTOHxGF8EcYv-L5VIeH73Tg-Ymde=
96qj2Ijyq6UGF3sR4wcqEecWejgHPOCbhfTA6O9MpPNrBVMHoT0WtMi2rFlmMCZGP8iM6PrD8_K=
mxKz1wb3S1eMJji51aEfdq05ZZj2Ns5QETHkd7MNG1I2PaK09LItZF7uGgl0oe1ZD1XySOpDcFF=
v5ROyWhiVKMmzXecWHhYBHqiwSGzY95wNjxgYEAP6/http%3A%2F%2F201.234.78.173%3A808=
0%2Fgruplac%2Fjsp%2Fvisualiza%2Fvisualizagr.jsp%3Fnro%3D00000000010436>
> )
> Centro de Investigaci=C3=B3n e Innovaci=C3=B3n en Bioinform=C3=A1tica y F=
ot=C3=B3nica (CIBioFi)
> <http://cibiofi.univalle.edu.co/>
>
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>



--=20
Vanessa Villamia Sochat
Stanford University '16
(603) 321-0676

--001a114e22c08d443205516bedb6
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hey all!<div><br>Let&#39;s keep these discussions going, b=
ut on this issue:</div><div><br></div><div><a href=3D"https://github.com/si=
ngularityware/singularity/issues/735">https://github.com/singularityware/si=
ngularity/issues/735</a><br></div><div><br></div><div>Ain&#39;t nobody ever=
 going to find it here, lol. If you don&#39;t have a Github account I&#39;d=
 be happy to add for you :)</div></div><div class=3D"gmail_extra"><br><div =
class=3D"gmail_quote">On Wed, Jun 7, 2017 at 11:11 PM, Michael Bauer <span =
dir=3D"ltr">&lt;<a href=3D"mailto:bau...@umich.edu" target=3D"_blank">bau..=
.@umich.edu</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" styl=
e=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div st=
yle=3D"word-wrap:break-word">Hi all,<div><br></div><div>Singularity is, in =
its current state, not capable of properly dealing with daemons (and to a b=
roader point, PID namespaces in general) running in the container. We are c=
urrently fleshing out a solution to this and have begun working on possible=
 implementations. The current proposed solution is to implement an optional=
 start/stop feature, which will properly handle the PID namespace by spawni=
ng an =E2=80=9Cs-init=E2=80=9D process inside the PID namespace which will =
exist as PID 1. =E2=80=9Csingularity stop=E2=80=9D will instruct the =E2=80=
=9Cs-init=E2=80=9D process inside the PID namespace to terminate, which wil=
l cause the kernel to reap the remaining process inside the PID namespace. =
Daemon processes spawned inside the PID namespace will no longer linger aft=
er the main singularity process is terminated. Let me know if this will be =
sufficient for your use cases!</div><span class=3D"HOEnZb"><font color=3D"#=
888888"><div><br></div><div>Michael</div></font></span><div><div class=3D"h=
5"><div><br></div><div><blockquote type=3D"cite"><div>On Jun 7, 2017, at 2:=
28 PM, Goldstone, Robin J. &lt;<a href=3D"mailto:golds...@llnl.gov" target=
=3D"_blank">golds...@llnl.gov</a>&gt; wrote:</div><br class=3D"m_-720468677=
6651173133Apple-interchange-newline"><div><div class=3D"m_-7204686776651173=
133WordSection1" style=3D"font-family:Helvetica;font-size:12px;font-style:n=
ormal;font-variant-caps:normal;font-weight:normal;letter-spacing:normal;tex=
t-align:start;text-indent:0px;text-transform:none;white-space:normal;word-s=
pacing:0px;background-color:rgb(255,255,255)"><div style=3D"margin:0in 0in =
0.0001pt;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span =
style=3D"font-size:14pt;font-family:Calibri,sans-serif">OK sorry for all th=
e spam and confusion.=C2=A0 I successfully installed Singularity v2.3 into =
a local filesystem and now all the suid bits are in place.=C2=A0 I was able=
 to follow Cedric=E2=80=99s instructions:<u></u><u></u></span></div><div st=
yle=3D"margin:0in 0in 0.0001pt;font-size:12pt;font-family:&#39;Times New Ro=
man&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-seri=
f"><u></u>=C2=A0<u></u></span></div><div style=3D"margin:0in 0in 0.0001pt;f=
ont-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"f=
ont-size:14pt;font-family:Calibri,sans-serif">As workaround for your proble=
m, you could use singularity shell with -p option to create a new PID names=
pace:<br>$ singularity shell -p image.img<br>&gt; service apache start<br>&=
gt; exit<br>so apache daemon will be killed once shell exit<u></u><u></u></=
span></div><div style=3D"margin:0in 0in 0.0001pt;font-size:12pt;font-family=
:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family=
:Calibri,sans-serif"><u></u>=C2=A0<u></u></span></div><div style=3D"margin:=
0in 0in 0.0001pt;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif=
"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">shell =E2=
=80=93p did indeed start apache then killed it when I quit out of the conta=
iner.=C2=A0 But if I try to use exec =E2=80=93p or run -p it just starts th=
e daemon and then immediately kills it.<u></u><u></u></span></div><div styl=
e=3D"margin:0in 0in 0.0001pt;font-size:12pt;font-family:&#39;Times New Roma=
n&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif"=
><u></u>=C2=A0<u></u></span></div><div style=3D"margin:0in 0in 0.0001pt;fon=
t-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"fon=
t-size:14pt;font-family:Calibri,sans-serif">So this is where it seems we do=
 need the =E2=80=9Csingularity start/stop=E2=80=9D command so I can start a=
pache in the background then later shut down the container and kill the pro=
cesses.<u></u><u></u></span></div><div style=3D"margin:0in 0in 0.0001pt;fon=
t-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"fon=
t-size:14pt;font-family:Calibri,sans-serif"><u></u>=C2=A0<u></u></span></di=
v><div style=3D"margin:0in 0in 0.0001pt;font-size:12pt;font-family:&#39;Tim=
es New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,=
sans-serif">-Robin<u></u><u></u></span></div><div style=3D"margin:0in 0in 0=
.0001pt;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span s=
tyle=3D"font-size:14pt;font-family:Calibri,sans-serif"><u></u>=C2=A0<u></u>=
</span></div><div style=3D"margin:0in 0in 0.0001pt;font-size:12pt;font-fami=
ly:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-fami=
ly:Calibri,sans-serif"><u></u>=C2=A0<u></u></span></div><div style=3D"borde=
r-style:solid none none;border-top-color:rgb(181,196,223);border-top-width:=
1pt;padding:3pt 0in 0in"><div style=3D"margin:0in 0in 0.0001pt 0.5in;font-s=
ize:12pt;font-family:&#39;Times New Roman&#39;,serif"><b><span style=3D"fon=
t-family:Calibri,sans-serif">From:<span class=3D"m_-7204686776651173133Appl=
e-converted-space">=C2=A0</span></span></b><span style=3D"font-family:Calib=
ri,sans-serif">&quot;Robin J. Goldstone&quot; &lt;<a href=3D"mailto:golds..=
.@llnl.gov" target=3D"_blank">golds...@llnl.gov</a>&gt;<br><b>Reply-To:<spa=
n class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></b>&q=
uot;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singu...@lbl.gov<=
/a><wbr>&quot; &lt;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">si=
ngu...@lbl.gov</a>&gt;<br><b>Date:<span class=3D"m_-7204686776651173133Appl=
e-converted-space">=C2=A0</span></b>Wednesday, June 7, 2017 at 1:03 PM<br><=
b>To:<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</sp=
an></b>&quot;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singu...=
@lbl.gov</a>&quot; &lt;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank=
">singu...@lbl.gov</a>&gt;<br><b>Subject:<span class=3D"m_-7204686776651173=
133Apple-converted-space">=C2=A0</span></b>Re: [Singularity] Re: daemons st=
arted in container run forever<u></u><u></u></span></div></div><div><div st=
yle=3D"margin:0in 0in 0.0001pt 0.5in;font-size:12pt;font-family:&#39;Times =
New Roman&#39;,serif"><u></u>=C2=A0<u></u></div></div><div style=3D"margin:=
0in 0in 0.0001pt 0.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;=
,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">OK I =
think I know what is going on.=C2=A0 I was trying to install my own copy in=
 my home dir but you must be root when you do make install or the setuid co=
mponents don=E2=80=99t get installed.</span><u></u><u></u></div><div style=
=3D"margin:0in 0in 0.0001pt 0.5in;font-size:12pt;font-family:&#39;Times New=
 Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-s=
erif">=C2=A0</span><u></u><u></u></div><div style=3D"border-style:solid non=
e none;border-top-color:rgb(181,196,223);border-top-width:1pt;padding:3pt 0=
in 0in"><div style=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-famil=
y:&#39;Times New Roman&#39;,serif"><b><span style=3D"font-family:Calibri,sa=
ns-serif">From:<span class=3D"m_-7204686776651173133Apple-converted-space">=
=C2=A0</span></span></b><span style=3D"font-family:Calibri,sans-serif">C=C3=
=A9dric Clerget &lt;<a href=3D"mailto:cedric...@gmail.com" target=3D"_blank=
">cedric...@gmail.com</a>&gt;</span><span style=3D"font-family:PMingLiU,ser=
if"><br></span><b><span style=3D"font-family:Calibri,sans-serif">Reply-To:<=
span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></s=
pan></b><span style=3D"font-family:Calibri,sans-serif">&quot;<a href=3D"mai=
lto:singu...@lbl.gov" target=3D"_blank">singu...@lbl.gov</a><wbr>&quot; &lt=
;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singu...@lbl.gov</a>=
&gt;<br><b>Date:<span class=3D"m_-7204686776651173133Apple-converted-space"=
>=C2=A0</span></b>Wednesday, June 7, 2017 at 12:44 PM<br><b>To:<span class=
=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></b>singulari=
ty &lt;<a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singu...@lbl.g=
ov</a>&gt;<br><b>Subject:<span class=3D"m_-7204686776651173133Apple-convert=
ed-space">=C2=A0</span></b>Re: [Singularity] Re: daemons started in contain=
er run forever</span><u></u><u></u></div></div><div><div style=3D"margin:0i=
n 0in 0.0001pt 1in;font-size:12pt;font-family:&#39;Times New Roman&#39;,ser=
if">=C2=A0<u></u><u></u></div></div><div><div style=3D"margin:0in 0in 0.000=
1pt 1in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">sorry m=
iss the root work for you<br>singularity binary has setuid bit set or allow=
 setuid in singularity.conf is set to no ?<br><br>Le mercredi 7 juin 2017 2=
1:38:24 UTC+2, C=C3=A9dric Clerget a =C3=A9crit=C2=A0:<span class=3D"m_-720=
4686776651173133Apple-converted-space">=C2=A0</span><u></u><u></u></div><bl=
ockquote style=3D"border-style:none none none solid;border-left-color:rgb(2=
04,204,204);border-left-width:1pt;padding:0in 0in 0in 6pt;margin:5pt 0in 5p=
t 4.8pt" type=3D"cite"><div><div style=3D"margin:0in 0in 0.0001pt 1in;font-=
size:12pt;font-family:&#39;Times New Roman&#39;,serif">if you run this comm=
and : cat /boot/config-$(uname -r)|grep CONFIG_PID<br>should give CONFIG_PI=
D_NS=3Dy, if nothing so the kernel don&#39;t support namespace<br><br>Le me=
rcredi 7 juin 2017 21:31:35 UTC+2, Robin Goldstone a =C3=A9crit=C2=A0:<span=
 class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span><u></u>=
<u></u></div><blockquote style=3D"border-style:none none none solid;border-=
left-color:rgb(204,204,204);border-left-width:1pt;padding:0in 0in 0in 6pt;m=
argin:5pt 0in 5pt 4.8pt" type=3D"cite"><div><div><div style=3D"margin:0in 0=
in 0.0001pt 1in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"=
><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">My singulari=
ty.conf has:</span><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001p=
t 1in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span sty=
le=3D"font-size:14pt;font-family:Calibri,sans-serif"># ALLOW PID NS: [BOOL]=
</span><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001pt 1in;font-s=
ize:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"font-s=
ize:14pt;font-family:Calibri,sans-serif"># DEFAULT: yes</span><u></u><u></u=
></div><div style=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-family=
:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family=
:Calibri,sans-serif"># Should we allow users to request the PID namespace?<=
/span><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001pt 1in;font-si=
ze:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"font-si=
ze:14pt;font-family:Calibri,sans-serif">allow pid ns =3D yes</span><u></u><=
u></u></div><div style=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-f=
amily:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-f=
amily:Calibri,sans-serif">=C2=A0</span><u></u><u></u></div><div style=3D"ma=
rgin:0in 0in 0.0001pt 1in;font-size:12pt;font-family:&#39;Times New Roman&#=
39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">As=
 Tom suggested, it appears there is something about our system configuratio=
n that is preventing Singularity from establishing a PID namespace when run=
ning as a regular user.=C2=A0 If I run the container as root it works fine.=
=C2=A0<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</s=
pan></span><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001pt 1in;fo=
nt-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"fo=
nt-size:14pt;font-family:Calibri,sans-serif">=C2=A0</span><u></u><u></u></d=
iv><div style=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-family:&#3=
9;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Cal=
ibri,sans-serif">I=E2=80=99m checking with our kernel guys to see if they c=
an confirm this.=C2=A0 It seems like this is a bit orthogonal to the discus=
sion about having a singularity start/stop command so don=E2=80=99t let me =
stop you from continuing the conversation!</span><u></u><u></u></div><div s=
tyle=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-family:&#39;Times N=
ew Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans=
-serif">=C2=A0</span><u></u><u></u></div><div style=3D"border-style:solid n=
one none;border-top-color:rgb(181,196,223);border-top-width:1pt;padding:3pt=
 0in 0in"><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-f=
amily:&#39;Times New Roman&#39;,serif"><b><span style=3D"font-family:Calibr=
i,sans-serif">From:<span class=3D"m_-7204686776651173133Apple-converted-spa=
ce">=C2=A0</span></span></b><span style=3D"font-family:Calibri,sans-serif">=
CARLOS EDUARDO ARANGO GUTIERREZ &lt;carlos.aran...@<a href=3D"http://correo=
univalle.edu.co" target=3D"_blank">correounivalle<wbr>.edu.co</a>&gt;<br><b=
>Reply-To:<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=
=A0</span></b>&quot;singu...@<a href=3D"http://lbl.gov" target=3D"_blank">l=
bl.gov</a>&quot; &lt;singu...@<a href=3D"http://lbl.gov" target=3D"_blank">=
lbl.gov</a>&gt;<br><b>Date:<span class=3D"m_-7204686776651173133Apple-conve=
rted-space">=C2=A0</span></b>Wednesday, June 7, 2017 at 12:22 PM<br><b>To:<=
span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></b=
>&quot;singu...@<a href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>&qu=
ot; &lt;singu...@<a href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>&g=
t;<br><b>Subject:<span class=3D"m_-7204686776651173133Apple-converted-space=
">=C2=A0</span></b>Re: [Singularity] Re: daemons started in container run f=
orever</span><u></u><u></u></div></div><div><div style=3D"margin:0in 0in 0.=
0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">=
=C2=A0<u></u><u></u></div></div><div><div><div style=3D"margin:0in 0in 0.00=
01pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">Like=
 the idea of a=C2=A0<span style=3D"font-size:9.5pt">/var/run/singularity/{i=
mage-<wbr>name}.{pid}=C2=A0</span><u></u><u></u></div></div><div><div style=
=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New=
 Roman&#39;,serif"><span style=3D"font-size:9.5pt">Stop will also $rm=C2=A0=
/var/run/singularity/{<wbr>image-name}.{pid} (hopefully)</span><u></u><u></=
u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12=
pt;font-family:&#39;Times New Roman&#39;,serif">=C2=A0<u></u><u></u></div><=
/div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family=
:&#39;Times New Roman&#39;,serif">The other thing that must be considered<s=
pan class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span><spa=
n style=3D"font-size:9.5pt">is how to launch the same daemon multiple times=
, as we are thinking on a production environment (Shared cluster) where mul=
tiple users are working on...=C2=A0</span><u></u><u></u></div></div><div><d=
iv style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;T=
imes New Roman&#39;,serif">=C2=A0<u></u><u></u></div><div><div style=3D"mar=
gin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&=
#39;,serif">On 7 June 2017 at 14:13, C=C3=A9dric Clerget &lt;cedric....@<a =
href=3D"http://gmail.com" target=3D"_blank">gmail.com</a>&gt; wrote:<u></u>=
<u></u></div><blockquote style=3D"border-style:none none none solid;border-=
left-color:rgb(204,204,204);border-left-width:1pt;padding:0in 0in 0in 6pt;m=
argin:5pt 0in 5pt 4.8pt" type=3D"cite"><div><div style=3D"margin:0in 0in 0.=
0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">Ba=
sic idea, something based on image/file name, the start command store /var/=
run/singularity/image-<wbr>name.pid and stop read the corresponding pid fil=
e based on image name to kill it, as we rarely launch the same daemon twice=
 it should be handle most cases, no ?<br><br>Le mercredi 7 juin 2017 20:50:=
30 UTC+2, CARLOS EDUARDO ARANGO GUTIERREZ a =C3=A9crit=C2=A0:<u></u><u></u>=
</div><blockquote style=3D"border-style:none none none solid;border-left-co=
lor:rgb(204,204,204);border-left-width:1pt;padding:0in 0in 0in 6pt;margin:5=
pt 0in 5pt 4.8pt" type=3D"cite"><div><div style=3D"margin:0in 0in 0.0001pt =
1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">C=C3=A9dr=
ic, any ideas on how you would implement this without the need of a contain=
erd to keep track of &quot;Started&quot; containers.<u></u><u></u></div><di=
v><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#=
39;Times New Roman&#39;,serif">=C2=A0<u></u><u></u></div></div><div><div st=
yle=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times =
New Roman&#39;,serif">+1 on this topic.<u></u><u></u></div><div><div style=
=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New=
 Roman&#39;,serif">=C2=A0<u></u><u></u></div><div><div><div><div style=3D"m=
argin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roma=
n&#39;,serif">On 7 June 2017 at 13:47, C=C3=A9dric Clerget &lt;cedric....@<=
a href=3D"http://gmail.com" target=3D"_blank">gmail.com</a>&gt; wrote:<u></=
u><u></u></div></div></div><blockquote style=3D"border-style:none none none=
 solid;border-left-color:rgb(204,204,204);border-left-width:1pt;padding:0in=
 0in 0in 6pt;margin:5pt 0in 5pt 4.8pt" type=3D"cite"><div><div><div><div st=
yle=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times =
New Roman&#39;,serif">Hi Robin,<br><br>Singularity implement PID namespace =
but don&#39;t offer to run a daemon inside container in background, the pur=
pose of start/stop command would allow to run something like this:<br>$ sin=
gularity start image.img service apache start<br><br>And stop it later like=
 this<br>$ singularity stop image.img<br><br>As workaround for your problem=
, you could use singularity shell with -p option to create a new PID namesp=
ace :<br>$ singularity shell -p image.img<br>&gt; service apache start<br>&=
gt; exit<br>so apache daemon will be killed once shell exit<br><br>The star=
t/stop command would open other possibilities<br><br>Best regards,<br>Cedri=
c Clerget<br><br>Le mercredi 7 juin 2017 20:00:27 UTC+2, Robin Goldstone a =
=C3=A9crit=C2=A0:<span class=3D"m_-7204686776651173133Apple-converted-space=
">=C2=A0</span><u></u><u></u></div><blockquote style=3D"border-style:none n=
one none solid;border-left-color:rgb(204,204,204);border-left-width:1pt;pad=
ding:0in 0in 0in 6pt;margin:5pt 0in 5pt 4.8pt" type=3D"cite"><div><div><div=
 style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Tim=
es New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,=
sans-serif">Hi Cedric,</span><u></u><u></u></div><div style=3D"margin:0in 0=
in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,seri=
f"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif"><br>You wr=
ote: =E2=80=9CIn order to work, Singularity should implement PID namespsace=
s with start/stop commands. PID namespaces will allow Singularity to become=
 the init process in order to own daemon processes running inside container=
 and make a clean exit with stop command.=E2=80=9D</span><u></u><u></u></di=
v><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#=
39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family:Ca=
libri,sans-serif">=C2=A0</span><u></u><u></u></div><div style=3D"margin:0in=
 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,se=
rif"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">Are you =
saying Singularity does implement this or should?=C2=A0 Also when you refer=
 to start/stop commands, are you referring to my =E2=80=9Cservice apache2 s=
tart=E2=80=9D command in the container or are you saying Singularity should=
 have a command to stop (cleanly shut down) a container?</span><u></u><u></=
u></div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-fam=
ily:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-fam=
ily:Calibri,sans-serif">=C2=A0</span><u></u><u></u></div><div style=3D"marg=
in:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#=
39;,serif"><span style=3D"font-size:14pt;font-family:Calibri,sans-serif">Th=
anks,</span><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001pt 1.5in=
;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D=
"font-size:14pt;font-family:Calibri,sans-serif">Robin</span><u></u><u></u><=
/div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family=
:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:14pt;font-family=
:Calibri,sans-serif">=C2=A0</span><u></u><u></u></div><div style=3D"border-=
style:solid none none;border-top-color:rgb(181,196,223);border-top-width:1p=
t;padding:3pt 0in 0in"><div style=3D"margin:0in 0in 0.0001pt 2in;font-size:=
12pt;font-family:&#39;Times New Roman&#39;,serif"><b><span style=3D"font-fa=
mily:Calibri,sans-serif">From:<span class=3D"m_-7204686776651173133Apple-co=
nverted-space">=C2=A0</span></span></b><span style=3D"font-family:Calibri,s=
ans-serif">C=C3=A9dric Clerget &lt;cedric....@<a href=3D"http://gmail.com" =
target=3D"_blank">gmail.com</a>&gt;</span><span style=3D"font-family:PMingL=
iU,serif"><br></span><b><span style=3D"font-family:Calibri,sans-serif">Repl=
y-To:<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</sp=
an></span></b><span style=3D"font-family:Calibri,sans-serif">&quot;singu...=
@<a href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>&quot; &lt;singu..=
.@<a href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>&gt;<br><b>Date:<=
span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></b=
>Wednesday, June 7, 2017 at 12:43 AM<br><b>To:<span class=3D"m_-72046867766=
51173133Apple-converted-space">=C2=A0</span></b>singularity &lt;singu...@<a=
 href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>&gt;<br><b>Subject:<s=
pan class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></b>=
[Singularity] Re: daemons started in container run forever</span><u></u><u>=
</u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 2in;font-size:12=
pt;font-family:&#39;Times New Roman&#39;,serif">=C2=A0<u></u><u></u></div><=
/div><div><div style=3D"margin:0in 0in 0.0001pt 2in;font-size:12pt;font-fam=
ily:&#39;Times New Roman&#39;,serif">It&#39;s normal, daemon processes uses=
 double fork to be attached to the init process and avoid zombie processes,=
 that&#39;s why singularity process don&#39;t own your apache process even =
if you logout from container, between singularity shouldn&#39;t be able to =
unmount the bind partitions because apache process uses files in container =
resulting in a no clean state.<br><br>In order to work, Singularity should =
implement PID namespsaces with start/stop commands. PID namespaces will all=
ow Singularity to become the init process in order to own daemon processes =
running inside container and make a clean exit with stop command<br><br>Bes=
t regards,<br>Cedric Clerget<u></u><u></u></div></div><p class=3D"MsoNormal=
" style=3D"margin:0in 0in 12pt 2in;font-size:12pt;font-family:&#39;Times Ne=
w Roman&#39;,serif">--<span class=3D"m_-7204686776651173133Apple-converted-=
space">=C2=A0</span><br>You received this message because you are subscribe=
d to the Google Groups &quot;singularity&quot; group.<br>To unsubscribe fro=
m this group and stop receiving emails from it, send an email to singularit=
y...@<a href=3D"http://lbl.gov" target=3D"_blank">lbl.gov</a>.<u></u><u></u=
></p></div></div></blockquote></div></div></div><div><div><div><div><div st=
yle=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times =
New Roman&#39;,serif">--<span class=3D"m_-7204686776651173133Apple-converte=
d-space">=C2=A0</span><br>You received this message because you are subscri=
bed to the Google Groups &quot;singularity&quot; group.<u></u><u></u></div>=
</div></div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font=
-family:&#39;Times New Roman&#39;,serif">To unsubscribe from this group and=
 stop receiving emails from it, send an email to singularity...@<a href=3D"=
http://lbl.gov" target=3D"_blank">lbl.gov</a>.<u></u><u></u></div></div></d=
iv></blockquote></div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size=
:12pt;font-family:&#39;Times New Roman&#39;,serif"><br><br clear=3D"all"><u=
></u><u></u></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-siz=
e:12pt;font-family:&#39;Times New Roman&#39;,serif">=C2=A0<u></u><u></u></d=
iv></div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-fa=
mily:&#39;Times New Roman&#39;,serif">--<span class=3D"m_-72046867766511731=
33Apple-converted-space">=C2=A0</span><u></u><u></u></div><div><div><div><d=
iv><div><div><div><div><div><div><div><div><div style=3D"margin:0in 0in 0.0=
001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><br=
>------------------------------<wbr>------------------------------<wbr>----=
--------------------------<wbr>------------------------------<u></u><u></u>=
</div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt=
;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:7.5p=
t;font-family:Courier,serif">CARLOS EDUARDO ARANGO GUTIERREZ. =C2=A0</span>=
<u></u><u></u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;=
font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"=
font-size:7.5pt;font-family:Courier,serif">Cel : <a href=3D"tel:+57%20318%2=
02545671" value=3D"+573182545671" target=3D"_blank">+57 3182545671</a></spa=
n><u></u><u></u></div></div><div style=3D"margin:0in 0in 0.0001pt 1.5in;fon=
t-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"fon=
t-size:7.5pt;font-family:Courier,serif">Computer Science PhD Student</span>=
<u></u><u></u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;=
font-size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"=
font-size:10pt;font-family:Courier,serif"><a href=3D"http://www.univalle.ed=
u.co/" style=3D"color:purple;text-decoration:underline" target=3D"_blank">U=
NIVERSIDAD DEL VALLE</a></span><u></u><u></u></div></div><div><div style=3D=
"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Ro=
man&#39;,serif"><span style=3D"font-size:7.5pt;font-family:Courier,serif">L=
aboratorio de redes y sistemas distribuidos -<span class=3D"m_-720468677665=
1173133Apple-converted-space">=C2=A0</span><a href=3D"http://lascilab.univa=
lle.edu.co/" style=3D"color:purple;text-decoration:underline" target=3D"_bl=
ank">LASCILAB</a></span><u></u><u></u></div></div><div><div style=3D"margin=
:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39=
;,serif"><span style=3D"font-size:7.5pt;font-family:Courier,serif">Tecnolog=
=C3=ADa, Informaci=C3=B3n y Complejidad Cu=C3=A1ntica - QuanTIC (<a href=3D=
"http://secure-web.cisco.com/1YnCmFu2EmyLV3KtcdG7MhcbZWuqIoT0ts6YjNH3sTyLaO=
zBcYm2hBXmGSJgHXY39ISfBk-ZU2pc3n8PZDMhzUd7-MgtS0rKTe0qre6NfLmcwhfZ21elmReOY=
n37VRqilvsZqJVEcYHuPwKGITh2vKdENpIV2_7zQ7mdVmPTOHxGF8EcYv-L5VIeH73Tg-Ymde96=
qj2Ijyq6UGF3sR4wcqEecWejgHPOCbhfTA6O9MpPNrBVMHoT0WtMi2rFlmMCZGP8iM6PrD8_Kmx=
Kz1wb3S1eMJji51aEfdq05ZZj2Ns5QETHkd7MNG1I2PaK09LItZF7uGgl0oe1ZD1XySOpDcFFv5=
ROyWhiVKMmzXecWHhYBHqiwSGzY95wNjxgYEAP6/http%3A%2F%2F201.234.78.173%3A8080%=
2Fgruplac%2Fjsp%2Fvisualiza%2Fvisualizagr.jsp%3Fnro%3D00000000010436" style=
=3D"color:purple;text-decoration:underline" target=3D"_blank"><span style=
=3D"text-decoration:none">GrupLAC</span></a>)<b>=C2=A0</b></span><u></u><u>=
</u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:=
12pt;font-family:&#39;Times New Roman&#39;,serif"><a href=3D"http://cibiofi=
.univalle.edu.co/" style=3D"color:purple;text-decoration:underline" target=
=3D"_blank"><span style=3D"font-size:7.5pt;font-family:Courier,serif">Centr=
o de Investigaci=C3=B3n e Innovaci=C3=B3n en Bioinform=C3=A1tica y Fot=C3=
=B3nica (CIBioFi)</span></a><u></u><u></u></div></div><div><div style=3D"ma=
rgin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman=
&#39;,serif"><br>=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0=C2=A0<img border=3D"0" width=3D"69" height=3D"96" id=3D"m_-72=
04686776651173133_x0000_i1025"><u></u><u></u></div></div></div></div></div>=
</div></div></div></div></div></div></div></div></div></div></blockquote></=
div><div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;fo=
nt-family:&#39;Times New Roman&#39;,serif">--<span class=3D"m_-720468677665=
1173133Apple-converted-space">=C2=A0</span><br>You received this message be=
cause you are subscribed to the Google Groups &quot;singularity&quot; group=
.<br>To unsubscribe from this group and stop receiving emails from it, send=
 an email to singularity...@<a href=3D"http://lbl.gov" target=3D"_blank">lb=
l.gov</a>.<u></u><u></u></div></div></div></blockquote></div><div style=3D"=
margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Rom=
an&#39;,serif"><br><br clear=3D"all"><u></u><u></u></div><div><div style=3D=
"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Ro=
man&#39;,serif">=C2=A0<u></u><u></u></div></div><div style=3D"margin:0in 0i=
n 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#39;,serif=
">--<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</spa=
n><u></u><u></u></div><div><div><div><div><div><div><div><div><div><div><di=
v><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-fami=
ly:&#39;Times New Roman&#39;,serif"><br>------------------------------<wbr>=
------------------------------<wbr>------------------------------<wbr>-----=
-------------------------<u></u><u></u></div></div><div><div style=3D"margi=
n:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&#3=
9;,serif"><span style=3D"font-size:7.5pt;font-family:Courier,serif">CARLOS =
EDUARDO ARANGO GUTIERREZ. =C2=A0</span><u></u><u></u></div></div><div><div =
style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Time=
s New Roman&#39;,serif"><span style=3D"font-size:7.5pt;font-family:Courier,=
serif">Cel : <a href=3D"tel:+57%20318%202545671" value=3D"+573182545671" ta=
rget=3D"_blank">+57 3182545671</a></span><u></u><u></u></div></div><div sty=
le=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times N=
ew Roman&#39;,serif"><span style=3D"font-size:7.5pt;font-family:Courier,ser=
if">Computer Science PhD Student</span><u></u><u></u></div></div><div><div =
style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Time=
s New Roman&#39;,serif"><span style=3D"font-size:10pt;font-family:Courier,s=
erif"><a href=3D"http://www.univalle.edu.co/" style=3D"color:purple;text-de=
coration:underline" target=3D"_blank">UNIVERSIDAD DEL VALLE</a></span><u></=
u><u></u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-=
size:12pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"font-=
size:7.5pt;font-family:Courier,serif">Laboratorio de redes y sistemas distr=
ibuidos -<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0=
</span><a href=3D"http://lascilab.univalle.edu.co/" style=3D"color:purple;t=
ext-decoration:underline" target=3D"_blank">LASCILAB</a></span><u></u><u></=
u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:12=
pt;font-family:&#39;Times New Roman&#39;,serif"><span style=3D"font-size:7.=
5pt;font-family:Courier,serif">Tecnolog=C3=ADa, Informaci=C3=B3n y Compleji=
dad Cu=C3=A1ntica - QuanTIC (<a href=3D"http://secure-web.cisco.com/1YnCmFu=
2EmyLV3KtcdG7MhcbZWuqIoT0ts6YjNH3sTyLaOzBcYm2hBXmGSJgHXY39ISfBk-ZU2pc3n8PZD=
MhzUd7-MgtS0rKTe0qre6NfLmcwhfZ21elmReOYn37VRqilvsZqJVEcYHuPwKGITh2vKdENpIV2=
_7zQ7mdVmPTOHxGF8EcYv-L5VIeH73Tg-Ymde96qj2Ijyq6UGF3sR4wcqEecWejgHPOCbhfTA6O=
9MpPNrBVMHoT0WtMi2rFlmMCZGP8iM6PrD8_KmxKz1wb3S1eMJji51aEfdq05ZZj2Ns5QETHkd7=
MNG1I2PaK09LItZF7uGgl0oe1ZD1XySOpDcFFv5ROyWhiVKMmzXecWHhYBHqiwSGzY95wNjxgYE=
AP6/http%3A%2F%2F201.234.78.173%3A8080%2Fgruplac%2Fjsp%2Fvisualiza%2Fvisual=
izagr.jsp%3Fnro%3D00000000010436" style=3D"color:purple;text-decoration:und=
erline" target=3D"_blank"><span style=3D"text-decoration:none">GrupLAC</spa=
n></a>)<b>=C2=A0</b></span><u></u><u></u></div></div><div><div style=3D"mar=
gin:0in 0in 0.0001pt 1.5in;font-size:12pt;font-family:&#39;Times New Roman&=
#39;,serif"><a href=3D"http://cibiofi.univalle.edu.co/" style=3D"color:purp=
le;text-decoration:underline" target=3D"_blank"><span style=3D"font-size:7.=
5pt;font-family:Courier,serif">Centro de Investigaci=C3=B3n e Innovaci=C3=
=B3n en Bioinform=C3=A1tica y Fot=C3=B3nica (CIBioFi)</span></a><u></u><u><=
/u></div></div><div><div style=3D"margin:0in 0in 0.0001pt 1.5in;font-size:1=
2pt;font-family:&#39;Times New Roman&#39;,serif"><br>=C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=C2=A0<img border=3D"0" wid=
th=3D"69" height=3D"96" id=3D"m_-7204686776651173133_x0000_i1026"><u></u><u=
></u></div></div></div></div></div></div></div></div></div></div></div></di=
v></div><p class=3D"MsoNormal" style=3D"margin:0in 0in 12pt 1.5in;font-size=
:12pt;font-family:&#39;Times New Roman&#39;,serif">--<span class=3D"m_-7204=
686776651173133Apple-converted-space">=C2=A0</span><br>You received this me=
ssage because you are subscribed to the Google Groups &quot;singularity&quo=
t; group.<br>To unsubscribe from this group and stop receiving emails from =
it, send an email to singularity...@<a href=3D"http://lbl.gov" target=3D"_b=
lank">lbl.gov</a>.<u></u><u></u></p></div></div></blockquote></div></blockq=
uote></div><div style=3D"margin:0in 0in 0.0001pt 1in;font-size:12pt;font-fa=
mily:&#39;Times New Roman&#39;,serif">--<span class=3D"m_-72046867766511731=
33Apple-converted-space">=C2=A0</span><br>You received this message because=
 you are subscribed to the Google Groups &quot;singularity&quot; group.<br>=
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to<span class=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</=
span><a href=3D"mailto:singu...@lbl.gov" style=3D"color:purple;text-decorat=
ion:underline" target=3D"_blank">singularity+unsubscribe@<wbr>lbl.gov</a>.<=
br><br><br><u></u><u></u></div><div style=3D"margin:0in 0in 0.0001pt 0.5in;=
font-size:12pt;font-family:&#39;Times New Roman&#39;,serif">--<span class=
=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span><br>You recei=
ved this message because you are subscribed to the Google Groups &quot;sing=
ularity&quot; group.<br>To unsubscribe from this group and stop receiving e=
mails from it, send an email to<span class=3D"m_-7204686776651173133Apple-c=
onverted-space">=C2=A0</span><a href=3D"mailto:singu...@lbl.gov" style=3D"c=
olor:purple;text-decoration:underline" target=3D"_blank">singularity+unsubs=
cribe@<wbr>lbl.gov</a>.<br><br><u></u><u></u></div></div><div style=3D"marg=
in-right:0in;margin-left:0in;font-size:12pt;font-family:&#39;Times New Roma=
n&#39;,serif;font-style:normal;font-variant-caps:normal;font-weight:normal;=
letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none;=
white-space:normal;word-spacing:0px;background-color:rgb(255,255,255)"><br =
class=3D"m_-7204686776651173133webkit-block-placeholder"></div><span style=
=3D"font-family:Helvetica;font-size:12px;font-style:normal;font-variant-cap=
s:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-ind=
ent:0px;text-transform:none;white-space:normal;word-spacing:0px;background-=
color:rgb(255,255,255);float:none;display:inline!important">--<span class=
=3D"m_-7204686776651173133Apple-converted-space">=C2=A0</span></span><br st=
yle=3D"font-family:Helvetica;font-size:12px;font-style:normal;font-variant-=
caps:normal;font-weight:normal;letter-spacing:normal;text-align:start;text-=
indent:0px;text-transform:none;white-space:normal;word-spacing:0px;backgrou=
nd-color:rgb(255,255,255)"><span style=3D"font-family:Helvetica;font-size:1=
2px;font-style:normal;font-variant-caps:normal;font-weight:normal;letter-sp=
acing:normal;text-align:start;text-indent:0px;text-transform:none;white-spa=
ce:normal;word-spacing:0px;background-color:rgb(255,255,255);float:none;dis=
play:inline!important">You received this message because you are subscribed=
 to the Google Groups &quot;singularity&quot; group.</span><br style=3D"fon=
t-family:Helvetica;font-size:12px;font-style:normal;font-variant-caps:norma=
l;font-weight:normal;letter-spacing:normal;text-align:start;text-indent:0px=
;text-transform:none;white-space:normal;word-spacing:0px;background-color:r=
gb(255,255,255)"><span style=3D"font-family:Helvetica;font-size:12px;font-s=
tyle:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:norm=
al;text-align:start;text-indent:0px;text-transform:none;white-space:normal;=
word-spacing:0px;background-color:rgb(255,255,255);float:none;display:inlin=
e!important">To unsubscribe from this group and stop receiving emails from =
it, send an email to<span class=3D"m_-7204686776651173133Apple-converted-sp=
ace">=C2=A0</span></span><a href=3D"mailto:singu...@lbl.gov" style=3D"color=
:purple;text-decoration:underline;font-family:Helvetica;font-size:12px;font=
-style:normal;font-variant-caps:normal;font-weight:normal;letter-spacing:no=
rmal;text-align:start;text-indent:0px;text-transform:none;white-space:norma=
l;word-spacing:0px;background-color:rgb(255,255,255)" target=3D"_blank">sin=
gularity+unsubscribe@<wbr>lbl.gov</a><span style=3D"font-family:Helvetica;f=
ont-size:12px;font-style:normal;font-variant-caps:normal;font-weight:normal=
;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:none=
;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255);floa=
t:none;display:inline!important">.</span><br style=3D"font-family:Helvetica=
;font-size:12px;font-style:normal;font-variant-caps:normal;font-weight:norm=
al;letter-spacing:normal;text-align:start;text-indent:0px;text-transform:no=
ne;white-space:normal;word-spacing:0px;background-color:rgb(255,255,255)"><=
/div></blockquote></div><br></div></div></div><div class=3D"HOEnZb"><div cl=
ass=3D"h5">

<p></p>

-- <br>
You received this message because you are subscribed to the Google Groups &=
quot;singularity&quot; group.<br>
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singularity+u=
nsubscribe@lbl.<wbr>gov</a>.<br>
</div></div></blockquote></div><br><br clear=3D"all"><div><br></div>-- <br>=
<div class=3D"gmail_signature" data-smartmail=3D"gmail_signature">Vanessa V=
illamia Sochat<br>Stanford University &#39;16<br><div><div><div>(603) 321-0=
676</div></div></div></div>
</div>

--001a114e22c08d443205516bedb6--
