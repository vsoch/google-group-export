X-Received: by 10.107.201.70 with SMTP id z67mr4808758iof.22.1468373123530;
        Tue, 12 Jul 2016 18:25:23 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.36.82.13 with SMTP id d13ls2582764itb.31.canary; Tue, 12 Jul
 2016 18:25:22 -0700 (PDT)
X-Received: by 10.98.25.8 with SMTP id 8mr34564890pfz.94.1468373122793;
        Tue, 12 Jul 2016 18:25:22 -0700 (PDT)
Return-Path: <gmku...@lbl.gov>
Received: from fe3.lbl.gov (fe3.lbl.gov. [128.3.41.68])
        by mx.google.com with ESMTPS id xk1si964486pac.141.2016.07.12.18.25.22
        for <singu...@lbl.gov>
        (version=TLS1_2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Tue, 12 Jul 2016 18:25:22 -0700 (PDT)
Received-SPF: pass (google.com: domain of gmku...@lbl.gov designates 209.85.215.69 as permitted sender) client-ip=209.85.215.69;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of gmku...@lbl.gov designates 209.85.215.69 as permitted sender) smtp.mailfrom=gmku...@lbl.gov
X-Ironport-SBRS: 1.6
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A2E7AQAAmIVXdEXXVdFchBR8BqxyhxKFBIF5JII9gm1KAoEyBzgUAQEBAQEBAQMPAQoLDAgfMYJRORBVAghjAQEEARIRBGILCw0qAgIhARIBBQEcBhMih3QDDwgFCaM+gTE+MYs7ilgNhB4BCgEBAR4FEIpngkOEf4JaBY57iWw0AYYOhi+CFoFqiAeFPYgchjkSHoEPHoRHHDIBAYdhK4EXAQEB
X-IronPort-AV: E=Sophos;i="5.28,354,1464678000"; 
   d="scan'208,217";a="30154517"
Received: from mail-lf0-f69.google.com ([209.85.215.69])
  by fe3.lbl.gov with ESMTP; 12 Jul 2016 18:25:20 -0700
Received: by mail-lf0-f69.google.com with SMTP id l89so21998329lfi.3
        for <singu...@lbl.gov>; Tue, 12 Jul 2016 18:25:20 -0700 (PDT)
X-Gm-Message-State: ALyK8tKF1zWDonx6qOS9P2SRPIvbxHq45MLGyYzvBkqR9QVgBx5J0BFe+ACDAUB3lEAO2N/EjLgkbm7AoFVNeupWeBi4E2TyxJ74ueig3fwrkSqhCg86Oq45hOyOFJyASptPa63B2uSIlDqunaTHBcH9rhI=
X-Received: by 10.46.32.131 with SMTP id g3mr2809827lji.46.1468373120068;
        Tue, 12 Jul 2016 18:25:20 -0700 (PDT)
X-Received: by 10.46.32.131 with SMTP id g3mr2809823lji.46.1468373119928; Tue,
 12 Jul 2016 18:25:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.25.214.158 with HTTP; Tue, 12 Jul 2016 18:25:19 -0700 (PDT)
In-Reply-To: <CAM=pu+Jf4JTewns7nSAJ0XgoZzO9DHar2up9sA+M214TP08H5Q@mail.gmail.com>
References: <CAM=pu+KGeNBaBGKbGGcrwLfa6BxsC6jM8tiaLK-e7FuyYMc00Q@mail.gmail.com>
 <CAAQzouPPxiF+e7TX-T5D8a76aOGq761dG7ZGKgQ6iXJ87uW0QQ@mail.gmail.com>
 <CAM=pu+Jw3FB3PszFwiTbNFZfHORyXYc5nr4SXd=7ho7mUYji5w@mail.gmail.com>
 <CAAQzouNMOkc=8Aw90zoagUAmu=9+dPGyR-jmPyKC7BPxo5D6Yw@mail.gmail.com>
 <CAM=pu+J8OG+=ftmgSNkj-S76w_Ky6aTzNd15UC_+J9MtqoLvKg@mail.gmail.com>
 <CAM=pu++CmvV6ebnXuwo3qUVtgd03FJdnkaxATPuHsfJsYk7gWA@mail.gmail.com>
 <CAN7etTy-SKME_Z49MbCb0QUh-kPmXo0MnObL27Je5UkiVUK09Q@mail.gmail.com>
 <CAM=pu+LPOC+OvQL7xSosLUdC4gR34GOM7AHTjpiMpvRmms+8hw@mail.gmail.com>
 <CAN7etTzuj+vx7HM=VhZELH4FY-4xg7-RYEb6mGMQdRnCi1xofw@mail.gmail.com> <CAM=pu+Jf4JTewns7nSAJ0XgoZzO9DHar2up9sA+M214TP08H5Q@mail.gmail.com>
From: "Gregory M. Kurtzer" <gmku...@lbl.gov>
Date: Tue, 12 Jul 2016 18:25:19 -0700
Message-ID: <CAN7etTxN7thLx7WfKWpz0qhroi1A7m+oc5oXuhs2RUh1Zt2G7g@mail.gmail.com>
Subject: Re: [Singularity] Singularity Container Info for Workflows - in the header?
To: singularity <singu...@lbl.gov>
Content-Type: multipart/alternative; boundary=001a1142ad40361c3005377a42f0

--001a1142ad40361c3005377a42f0
Content-Type: text/plain; charset=UTF-8

On Tue, Jul 12, 2016 at 2:52 PM, vanessa s <vso...@gmail.com> wrote:

>
>>
>> On Tue, Jul 12, 2016 at 2:03 PM, vanessa s <vso...@gmail.com> wrote:
>>
>>> I'm just going with a simple zip for now - it's easy for people to work
>>> with and the interface to poke through. I'm well into writing scripts to
>>> take standard python executable functions (using argparse) and extracting
>>> the arguments for formatting them into boutiques spec
>>> <https://raw.githubusercontent.com/boutiques/schema/master/descriptor.schema.json>,
>>> for inclusion in the package, and eventually I'll ping others for
>>> contribution of reasonable standards for other languages as well!  This
>>> will mean that any zipped up image/container thing that has a boutiques
>>> spec will be immediately pluggable into the interface, and subsequently
>>> workflows. My plan for workflows atm is to use WDL, because it's the most
>>> simple and intuitive that I've seen. So in summary:
>>>
>>> container + meta_data spec (boutiques) --> singularity_hub --> [*click
>>> click* make cool workflow!] --> WDL via json API --> go to some cloud /
>>> cluster to run things --> command line tool to retrieve workflow via unique
>>> id from the hub, download images, and run.
>>>
>>
>> I really like this workflow! Have you considered how to inject data into
>> this model? Either locally on the system in question, also on the HUB,
>> within a container, downloadable via a URL or other?
>>
>>
> Do you mean modify / specify the inputs / outputs? My plan now is to make
> the extraction as programmatic as possible, but once it's in the interface
> all the fields, etc. will be customizable by the user - a big issue for
> singularity will be figuring out the container outputs, since that isn't
> something easy to grab. For use by researchers on some kind of SLURM
> cluster, my thinking is that we can (eventually) have a node serve as a
> capture device - so basically a user submits a job, and the software
> required and general environment is packaged into a singularity container,
> and then figuring out the output becomes something simple like figuring out
> which files were generated after the run finished! In the longer term we
> will want to have tests / validation for containers and inputs / outputs,
> but for now this way seems like a good start.
>
> Or do you mean associate a specific data input with a workflow? This is
> going to happen on the level of the commend line executable - the workflow
> object itself (both in singularity hub and when retrieved via the API) is
> not going to have hard coded input files / data into it - it's only going
> to understand inputs on the level of "file" and "string." When the user
> runs the workflow, there will need to be some simple file with starter
> inputs to be parallelized in some fashion. For example, most of my slurm
> jobs I read in some list of paths or ids, and then submit them out to
> different nodes.
>

Yes. So for example, a user can refer to a particular unique workflow ID in
the command line download/run tool and that workflow can also include the
relevant data (if the data is distributable) so the entire problem can be
reproduced. Also, some of the bio-sciences maybe able to benefit from
including genomic data in the workflow to be downloaded... Hrmm, speaking
of which, have you considered caching?


>
> Another thing (that is entirely separate from the problem of generating
> and deploying workflows) is capturing the specific results associated, and
> then somehow linking those things. This is a big problem, and pretty
> important for most users that will want a tool like this, and for now my
> suggestion is to get to this when we get to it!
>

Haha, works for me and I use this development model also at times!


>
>
>>> The interface is going to be pretty awesome, I've taken a break from it
>>> for a few days to work on this, but it's going to be drag and drop
>>> interactive, and I think I'm going to use web (service) workers for users
>>> to browse around the site and have "add containers to cart" functionality!
>>> The picture below isn't technically a workflow (I was just playing around
>>> with a javascript library) but it shows how I want things to be draggable,
>>> connectable, and all editable, and then that representation is what will
>>> get saved to a WDL string associated with the workflow, and that will be
>>> served via the API for programmatic access from command line. It kind of
>>> all makes sense in my head, just need to put it together :O)
>>>
>>
>> I am looking forward to seeing it!
>>
>>
> Heh, me too! :)
>
>
>>
>>> I'll ping with more details when I finish this up! I'm kind of being
>>> slow this summer, doing too much running, heh :)
>>>
>>
>> Haha, no worries. I usually blame any slowness I have on meetings. ;-)
>>
>>
> oh, those meetings!!! You know, if you pick up running, you can run away
> from them too :P
>

LOL, not sure my coworkers would appreciate that... On the other hand,
maybe they would!




-- 
Gregory M. Kurtzer
High Performance Computing Services (HPCS)
University of California
Lawrence Berkeley National Laboratory
One Cyclotron Road, Berkeley, CA 94720

--001a1142ad40361c3005377a42f0
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><br><div class=3D"gmail_extra"><br><div class=3D"gmail_quo=
te">On Tue, Jul 12, 2016 at 2:52 PM, vanessa s <span dir=3D"ltr">&lt;<a hre=
f=3D"mailto:vso...@gmail.com" target=3D"_blank">vso...@gmail.com</a>&gt;</s=
pan> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex=
;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><div class=
=3D"gmail_extra"><div class=3D"gmail_quote"><span class=3D""><blockquote cl=
ass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;p=
adding-left:1ex"><div dir=3D"ltr"><br><div class=3D"gmail_extra"><br><div c=
lass=3D"gmail_quote"><span>On Tue, Jul 12, 2016 at 2:03 PM, vanessa s <span=
 dir=3D"ltr">&lt;<a href=3D"mailto:vso...@gmail.com" target=3D"_blank">vso.=
..@gmail.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" sty=
le=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div d=
ir=3D"ltr">I&#39;m just going with a simple zip for now - it&#39;s easy for=
 people to work with and the interface to poke through. I&#39;m well into w=
riting scripts to take standard python executable functions (using argparse=
) and extracting the arguments for formatting them into <a href=3D"https://=
raw.githubusercontent.com/boutiques/schema/master/descriptor.schema.json" t=
arget=3D"_blank">boutiques spec</a>, for inclusion in the package, and even=
tually I&#39;ll ping others for contribution of reasonable standards for ot=
her languages as well!=C2=A0 This will mean that any zipped up image/contai=
ner thing that has a boutiques spec will be immediately pluggable into the =
interface, and subsequently workflows. My plan for workflows atm is to use =
WDL, because it&#39;s the most simple and intuitive that I&#39;ve seen. So =
in summary:<div><br></div><div>container + meta_data spec (boutiques) --&gt=
; singularity_hub --&gt; [*click click* make cool workflow!] --&gt; WDL via=
 json API --&gt; go to some cloud / cluster to run things --&gt; command li=
ne tool to retrieve workflow via unique id from the hub, download images, a=
nd run.</div></div></blockquote><div><br></div></span><div>I really like th=
is workflow! Have you considered how to inject data into this model? Either=
 locally on the system in question, also on the HUB, within a container, do=
wnloadable via a URL or other?</div><span><div>=C2=A0</div></span></div></d=
iv></div></blockquote></span><div>Do you mean modify / specify the inputs /=
 outputs? My plan now is to make the extraction as programmatic as possible=
, but once it&#39;s in the interface all the fields, etc. will be customiza=
ble by the user - a big issue for singularity will be figuring out the cont=
ainer outputs, since that isn&#39;t something easy to grab. For use by rese=
archers on some kind of SLURM cluster, my thinking is that we can (eventual=
ly) have a node serve as a capture device - so basically a user submits a j=
ob, and the software required and general environment is packaged into a si=
ngularity container, and then figuring out the output becomes something sim=
ple like figuring out which files were generated after the run finished! In=
 the longer term we will want to have tests / validation for containers and=
 inputs / outputs, but for now this way seems like a good start.</div><div>=
<br></div><div>Or do you mean associate a specific data input with a workfl=
ow? This is going to happen on the level of the commend line executable - t=
he workflow object itself (both in singularity hub and when retrieved via t=
he API) is not going to have hard coded input files / data into it - it&#39=
;s only going to understand inputs on the level of &quot;file&quot; and &qu=
ot;string.&quot; When the user runs the workflow, there will need to be som=
e simple file with starter inputs to be parallelized in some fashion. For e=
xample, most of my slurm jobs I read in some list of paths or ids, and then=
 submit them out to different nodes.=C2=A0</div></div></div></div></blockqu=
ote><div><br></div><div>Yes. So for example, a user can refer to a particul=
ar unique workflow ID in the command line download/run tool and that workfl=
ow can also include the relevant data (if the data is distributable) so the=
 entire problem can be reproduced. Also, some of the bio-sciences maybe abl=
e to benefit from including genomic data in the workflow to be downloaded..=
. Hrmm, speaking of which, have you considered caching?</div><div>=C2=A0</d=
iv><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left=
:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_extr=
a"><div class=3D"gmail_quote"><div><br></div><div>Another thing (that is en=
tirely separate from the problem of generating and deploying workflows) is =
capturing the specific results associated, and then somehow linking those t=
hings. This is a big problem, and pretty important for most users that will=
 want a tool like this, and for now my suggestion is to get to this when we=
 get to it!</div></div></div></div></blockquote><div><br></div><div>Haha, w=
orks for me and I use this development model also at times!</div><div>=C2=
=A0</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmai=
l_extra"><div class=3D"gmail_quote"><span class=3D""><div><br></div><blockq=
uote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc =
solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_extra"><div cl=
ass=3D"gmail_quote"><span><blockquote class=3D"gmail_quote" style=3D"margin=
:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><=
div><br></div><div>The interface is going to be pretty awesome, I&#39;ve ta=
ken a break from it for a few days to work on this, but it&#39;s going to b=
e drag and drop interactive, and I think I&#39;m going to use web (service)=
 workers for users to browse around the site and have &quot;add containers =
to cart&quot; functionality! The picture below isn&#39;t technically a work=
flow (I was just playing around with a javascript library) but it shows how=
 I want things to be draggable, connectable, and all editable, and then tha=
t representation is what will get saved to a WDL string associated with the=
 workflow, and that will be served via the API for programmatic access from=
 command line. It kind of all makes sense in my head, just need to put it t=
ogether :O)</div></div></blockquote><div><br></div></span><div>I am looking=
 forward to seeing it!</div><span><div>=C2=A0</div></span></div></div></div=
></blockquote></span><div>Heh, me too! :)</div><span class=3D""><div>=C2=A0=
</div><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-l=
eft:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr"><div class=3D"gmail_e=
xtra"><div class=3D"gmail_quote"><span><blockquote class=3D"gmail_quote" st=
yle=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
dir=3D"ltr"><div><br></div><div>I&#39;ll ping with more details when I fini=
sh this up! I&#39;m kind of being slow this summer, doing too much running,=
 heh :)<br></div></div></blockquote><div><br></div></span><div>Haha, no wor=
ries. I usually blame any slowness I have on meetings. ;-)</div><div><div><=
div><br></div></div></div></div></div></div></blockquote><div>=C2=A0</div><=
/span><div>oh, those meetings!!! You know, if you pick up running, you can =
run away from them too :P</div></div></div></div></blockquote><div><br></di=
v><div>LOL, not sure my coworkers would appreciate that... On the other han=
d, maybe they would!</div><div><br></div><div><br></div><div><br></div></di=
v><div><br></div>-- <br><div class=3D"gmail_signature" data-smartmail=3D"gm=
ail_signature"><div dir=3D"ltr"><div>Gregory M. Kurtzer<br>High Performance=
 Computing Services (HPCS)<br>University of California<br>Lawrence Berkeley=
 National Laboratory<br>One Cyclotron Road, Berkeley, CA 94720</div></div><=
/div>
</div></div>

--001a1142ad40361c3005377a42f0--
