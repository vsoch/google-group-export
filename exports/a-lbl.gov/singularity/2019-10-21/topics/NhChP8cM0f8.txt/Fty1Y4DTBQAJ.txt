X-Received: by 10.99.95.5 with SMTP id t5mr2558109pgb.18.1522792949850;
        Tue, 03 Apr 2018 15:02:29 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.99.106.135 with SMTP id f129ls228945pgc.1.gmail; Tue, 03 Apr
 2018 15:02:28 -0700 (PDT)
X-Received: by 10.99.109.136 with SMTP id i130mr10307806pgc.380.1522792948127;
        Tue, 03 Apr 2018 15:02:28 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; t=1522792948; cv=none;
        d=google.com; s=arc-20160816;
        b=g6AAckCGT8H+0uxQ6rIeBa/UE60sfb99YYVGV2EJfDpRQqQKEBT7tJKrIo63llqY4C
         opEuMNb4PILx6rjhgVZBVAyofP/uocZh+yUHwhr2r0HyPQCoaZrVg1cD0Io63pfCmYCE
         VngZL9IkZ5HWlLs3bHDdx3AYE01Ed1LFd6Q9ZfMu0Pykoqy0WYokxlKSfvZO5iTThkC3
         uzq31p78ZVUbXx5U+FRkcEA2C4EqMlb2GkRU5+Z9+Kvyhd36Xuaugerkjjyzi+phwSUW
         qUSbAJocHf0G5K7vGu1BMySKka/4rk7pqRwIC3PKngXB8Ko8cVEw0P/5Iasyqa1hCrOT
         Kdpg==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;
        h=to:subject:message-id:date:from:references:in-reply-to:mime-version
         :dkim-signature:arc-authentication-results;
        bh=1095VFto7UvtdaEQnT8X2j2syl/VuGyYijJsaKk8FC4=;
        b=m6Ug/zAfWi8q2DJ9cdTgPEAVyfd9ltxdCdgDncrmVs5S3nwwmdVu6QyVAOgEjy4ZsL
         exz7eq6KbabtrOoL1BTW0sDuUMcNVdDZVz5yCJu64MvWIjLCSI8m2q4mYgUnnuCBpJJY
         xdcGMlNq/MawZW3yagFVfAaNmEdfjZW3U8TTWgOtcfnHPh932ijC+34kugTnpRYJwe6I
         5l/ZzH1JEu4potcEgiT2J1izdXIuwCDa8NtVeD82GYfRTrBx6NDhqDwb4cTMQjPoMxRY
         jFsJvcqxsxSvGWVSTlidHTLvsc3aT8TG/XR4mJXev+MuE38cD5XfGuFkvJ//j5q3IDHG
         iSOw==
ARC-Authentication-Results: i=1; mx.google.com;
       dkim=pass head...@gmail.com header.s=20161025 header.b=FopEnKTu;
       spf=pass (google.com: domain of gmku...@gmail.com designates 209.85.220.174 as permitted sender) smtp.mailfrom=gmku...@gmail.com
Return-Path: <gmku...@gmail.com>
Received: from fe4.lbl.gov (fe4.lbl.gov. [128.3.41.71])
        by mx.google.com with ESMTP id l27si2919437pfb.69.2018.04.03.15.02.26
        for <singu...@lbl.gov>;
        Tue, 03 Apr 2018 15:02:27 -0700 (PDT)
Received-SPF: pass (google.com: domain of gmku...@gmail.com designates 209.85.220.174 as permitted sender) client-ip=209.85.220.174;
Authentication-Results: mx.google.com;
       dkim=pass head...@gmail.com header.s=20161025 header.b=FopEnKTu;
       spf=pass (google.com: domain of gmku...@gmail.com designates 209.85.220.174 as permitted sender) smtp.mailfrom=gmku...@gmail.com
X-Ironport-SBRS: 3.4
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A2FNAABZ+cNahq7cVdFdHgEGDIMXTwE8b?=
 =?us-ascii?q?ygKg08GgR2TaIF0AoENgWeQbhSBLDgCIwEKCIECTYMJAoQ8ByE0GAECAQEBAQE?=
 =?us-ascii?q?BAgECEAEBAQgLCwgoIwyCNQUCAxoGCUspAy4BAQEBAQEBAQEBAQEBAQEBGgIrB?=
 =?us-ascii?q?A8SARoBAgIBIx0BDQ4eAwELBgULLQEJAgIhAQEOAwEFARwGCAcEAQcVBIMVgT4?=
 =?us-ascii?q?BAw0IBQqiGDyLBYF/BQEXgm8Fg08KGSYNVFeCHQIGEodQVIE/gQyCVi6CTzcLB?=
 =?us-ascii?q?IEnAQwGAYMfglQCjFOKPCwIAoVQhWGCfIEwOoV4hFWJFTsBRoJwAYJmEh6BBAw?=
 =?us-ascii?q?QbC5xcE8xghIJgWckDA4Jg0WBf2WIDR8wEItsDhcwgW8BAQ?=
X-IronPort-AV: E=Sophos;i="5.48,403,1517904000"; 
   d="scan'208,217";a="18693757"
Received: from mail-qk0-f174.google.com ([209.85.220.174])
  by fe4.lbl.gov with ESMTP; 03 Apr 2018 15:02:23 -0700
Received: by mail-qk0-f174.google.com with SMTP id o64so20405701qkl.7
        for <singu...@lbl.gov>; Tue, 03 Apr 2018 15:02:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20161025;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to;
        bh=1095VFto7UvtdaEQnT8X2j2syl/VuGyYijJsaKk8FC4=;
        b=FopEnKTuaTOZa7NQzVUcYTCdsaKaoc+RbpJ2lINjdDPeL/l19k0sZ4bHT/wCip4YFx
         0xASBjctem3+4XEY4x7nrJ/3q5+3bYxekgjqsdfMZDFVBwppKlyjgaO3UqDjrLNaVmcG
         EAa/r7lg6G3K2tBDzc2EFhh4+HlJCnwVqvySSLQMiHoMjH6sWwWp7MlyYckPDgHjWE8h
         8FMXlAIJBSVO5xhDcxAQnZxV645JaGoNJUd+zZtWwZgqx/SKnwGA8U8uNGIXX21QEppG
         tBjOgENlsf0Xf42dlTAkKuQMh1BQjttLFAMqdNQRB0fe5v79Pd+ldizJ1DFMzp6C6yPW
         Sd9w==
X-Gm-Message-State: ALQs6tCRMyd9GsKv2zQQAXGhacmdHSbHahVdTCjcD2Drb/Q8090FLl6q
	UX7N3d4UzYPgMA/7TD6FQIrw17CfW1kjgjfazWw=
X-Received: by 10.55.77.207 with SMTP id a198mr9907020qkb.241.1522792943184;
 Tue, 03 Apr 2018 15:02:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.12.233.4 with HTTP; Tue, 3 Apr 2018 15:02:22 -0700 (PDT)
In-Reply-To: <414c2f29-9ef6-4212-a950-9b21600c1215@lbl.gov>
References: <414c2f29-9ef6-4212-a950-9b21600c1215@lbl.gov>
From: "Gregory M. Kurtzer" <gmku...@gmail.com>
Date: Tue, 3 Apr 2018 15:02:22 -0700
Message-ID: <CAApQTTjUa8CYqyio-_h2K6UL_NoNPB9HGLzzwCodfOpBEmWKUQ@mail.gmail.com>
Subject: Re: [Singularity] Error on HPC compute nodes, but not head node
To: singularity <singu...@lbl.gov>
Content-Type: multipart/alternative; boundary="001a114a8a5071f0b20568f8dc6f"

--001a114a8a5071f0b20568f8dc6f
Content-Type: text/plain; charset="UTF-8"

It seems like your shared file system where you installed it to is not
allowing it to run with proper privileges. Is it blocking SETUID by chance?

My own personal note/comment.... Singularity is a system package, and
should be installed into the operating system, not on a shared file system
with modules. This is because typically that usage model is really good for
when you have lots of different versions of applications installed and the
user can pick which one they want. In general, you don't want to do this
with any SETUID enabled codebase. RPM/DEB packages are your friend here,
and if you need/want access to prebuilt, tested, and signed versions
available via YUM, go here: http://www.sylabs.io/singularity

On Tue, Apr 3, 2018 at 11:43 AM, Steve <skbi...@gmail.com> wrote:

> When I try to use Singluarity (version 2.4.2) on the head node of our HPC
> (running CentOS 6.8), it works fine:
>
> $ module load singularity/2.4.2; singularity shell stevekm_ngs580-nf_base-
> 2018-03-15-ea494a9472a4.img
>
>
> However, when I try to run the same thing on our compute nodes, it fails:
>
> $ module load singularity/2.4.2; singularity shell stevekm_ngs580-nf_base-
> 2018-03-15-ea494a9472a4.img
> ERROR  : Singularity is not running with appropriate privileges!
> ERROR  : Check installation path is not mounted with 'nosuid', and/or
> consult manual.
> ABORT  : Retval = 255
>
>
> The compute nodes are supposed to be running with the exact same software
> configuration as the head node, so we are kinda stumped as to what might be
> causing this.
>
> I saw there are details about the config here:
> http://singularity.lbl.gov/docs-config#parameters
>
> And I checked the contents of our config file but it all looks like the
> default values:
>
> $ cat /local/apps/singularity/2.4.2/etc/singularity/singularity.conf
> # SINGULARITY.CONF
> # This is the global configuration file for Singularity. This file controls
> # what the container is allowed to do on a particular host, and as a result
> # this file must be owned by root.
>
>
> # ALLOW SETUID: [BOOL]
> # DEFAULT: yes
> # Should we allow users to utilize the setuid program flow within
> Singularity?
> # note1: This is the default mode, and to utilize all features, this option
> # will need to be enabled.
> # note2: If this option is disabled, it will rely on the user namespace
> # exclusively which has not been integrated equally between the different
> # Linux distributions.
> allow setuid = yes
>
>
> # MAX LOOP DEVICES: [INT]
> # DEFAULT: 256
> # Set the maximum number of loop devices that Singularity should ever
> attempt
> # to utilize.
> max loop devices = 256
>
>
> # ALLOW PID NS: [BOOL]
> # DEFAULT: yes
> # Should we allow users to request the PID namespace? Note that for some
> HPC
> # resources, the PID namespace may confuse the resource manager and break
> how
> # some MPI implementations utilize shared memory. (note, on some older
> # systems, the PID namespace is always used)
> allow pid ns = yes
>
>
> # CONFIG PASSWD: [BOOL]
> # DEFAULT: yes
> # If /etc/passwd exists within the container, this will automatically
> append
> # an entry for the calling user.
> config passwd = yes
>
>
> # CONFIG GROUP: [BOOL]
> # DEFAULT: yes
> # If /etc/group exists within the container, this will automatically append
> # group entries for the calling user.
> config group = yes
>
>
> # CONFIG RESOLV_CONF: [BOOL]
> # DEFAULT: yes
> # If there is a bind point within the container, use the host's
> # /etc/resolv.conf.
> config resolv_conf = yes
>
>
> # MOUNT PROC: [BOOL]
> # DEFAULT: yes
> # Should we automatically bind mount /proc within the container?
> mount proc = yes
>
>
> # MOUNT SYS: [BOOL]
> # DEFAULT: yes
> # Should we automatically bind mount /sys within the container?
> mount sys = yes
>
>
> # MOUNT DEV: [yes/no/minimal]
> # DEFAULT: yes
> # Should we automatically bind mount /dev within the container? If
> 'minimal'
> # is chosen, then only 'null', 'zero', 'random', 'urandom', and 'shm' will
> # be included (the same effect as the --contain options)
> mount dev = yes
>
>
> # MOUNT DEVPTS: [BOOL]
> # DEFAULT: yes
> # Should we mount a new instance of devpts if there is a 'minimal'
> # /dev, or -C is passed?  Note, this requires that your kernel was
> # configured with CONFIG_DEVPTS_MULTIPLE_INSTANCES=y, or that you're
> # running kernel 4.7 or newer.
> mount devpts = yes
>
>
> # MOUNT HOME: [BOOL]
> # DEFAULT: yes
> # Should we automatically determine the calling user's home directory and
> # attempt to mount it's base path into the container? If the --contain
> option
> # is used, the home directory will be created within the session directory
> or
> # can be overridden with the SINGULARITY_HOME or SINGULARITY_WORKDIR
> # environment variables (or their corresponding command line options).
> mount home = yes
>
>
> # MOUNT TMP: [BOOL]
> # DEFAULT: yes
> # Should we automatically bind mount /tmp and /var/tmp into the container?
> If
> # the --contain option is used, both tmp locations will be created in the
> # session directory or can be specified via the  SINGULARITY_WORKDIR
> # environment variable (or the --workingdir command line option).
> mount tmp = yes
>
>
> # MOUNT HOSTFS: [BOOL]
> # DEFAULT: no
> # Probe for all mounted file systems that are mounted on the host, and bind
> # those into the container?
> mount hostfs = no
>
>
> # BIND PATH: [STRING]
> # DEFAULT: Undefined
> # Define a list of files/directories that should be made available from
> within
> # the container. The file or directory must exist within the container on
> # which to attach to. you can specify a different source and destination
> # path (respectively) with a colon; otherwise source and dest are the same.
> #bind path = /etc/singularity/default-nsswitch.conf:/etc/nsswitch.conf
> #bind path = /opt
> #bind path = /scratch
> bind path = /etc/localtime
> bind path = /etc/hosts
>
>
> # USER BIND CONTROL: [BOOL]
> # DEFAULT: yes
> # Allow users to influence and/or define bind points at runtime? This will
> allow
> # users to specify bind points, scratch and tmp locations. (note: User bind
> # control is only allowed if the host also supports PR_SET_NO_NEW_PRIVS)
> user bind control = yes
>
>
> # ENABLE OVERLAY: [yes/no/try]
> # DEFAULT: try
> # Enabling this option will make it possible to specify bind paths to
> locations
> # that do not currently exist within the container.  If 'try' is chosen,
> # overlayfs will be tried but if it is unavailable it will be silently
> ignored.
> enable overlay = try
>
>
> # MOUNT SLAVE: [BOOL]
> # DEFAULT: yes
> # Should we automatically propagate file-system changes from the host?
> # This should be set to 'yes' when autofs mounts in the system should
> # show up in the container.
> mount slave = yes
>
>
> # SESSIONDIR MAXSIZE: [STRING]
> # DEFAULT: 16
> # This specifies how large the default sessiondir should be (in MB) and it
> will
> # only affect users who use the "--contain" options and don't also specify
> a
> # location to do default read/writes to (e.g. "--workdir" or "--home").
> sessiondir max size = 16
>
>
> # LIMIT CONTAINER OWNERS: [STRING]
> # DEFAULT: NULL
> # Only allow containers to be used that are owned by a given user. If this
> # configuration is undefined (commented or set to NULL), all containers are
> # allowed to be used. This feature only applies when Singularity is
> running in
> # SUID mode and the user is non-root.
> #limit container owners = gmk, singularity, nobody
>
>
> # LIMIT CONTAINER PATHS: [STRING]
> # DEFAULT: NULL
> # Only allow containers to be used that are located within an allowed path
> # prefix. If this configuration is undefined (commented or set to NULL),
> # containers will be allowed to run from anywhere on the file system. This
> # feature only applies when Singularity is running in SUID mode and the
> user is
> # non-root.
> #limit container paths = /scratch, /tmp, /global
>
>
> # ALLOW CONTAINER ${TYPE}: [BOOL]
> # DEFAULT: yes
> # This feature limits what kind of containers that Singularity will allow
> # users to use (note this does not apply for root).
> allow container squashfs = yes
> allow container extfs = yes
> allow container dir = yes
>
>
> # AUTOFS BUG PATH: [STRING]
> # DEFAULT: Undefined
> # Define list of autofs directories which produces "Too many levels of
> symbolink links"
> # errors when accessed from container (typically bind mounts)
> #autofs bug path = /nfs
> #autofs bug path = /cifs-share
>
>
>
> Any ideas what might be happening?
>
>
>
> --
> You received this message because you are subscribed to the Google Groups
> "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an
> email to singu...@lbl.gov.
>



-- 
Gregory M. Kurtzer
CEO, Sylabs Inc.

--001a114a8a5071f0b20568f8dc6f
Content-Type: text/html; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">It seems like your shared file system where you installed =
it to is not allowing it to run with proper privileges. Is it blocking SETU=
ID by chance?<div><br></div><div>My own personal note/comment.... Singulari=
ty is a system package, and should be installed into the operating system, =
not on a shared file system with modules. This is because typically that us=
age model is really good for when you have lots of different versions of ap=
plications installed and the user can pick which one they want. In general,=
 you don&#39;t want to do this with any SETUID enabled codebase. RPM/DEB pa=
ckages are your friend here, and if you need/want access to prebuilt, teste=
d, and signed versions available via YUM, go here: <a href=3D"http://www.sy=
labs.io/singularity">http://www.sylabs.io/singularity</a></div></div><div c=
lass=3D"gmail_extra"><br><div class=3D"gmail_quote">On Tue, Apr 3, 2018 at =
11:43 AM, Steve <span dir=3D"ltr">&lt;<a href=3D"mailto:skbi...@gmail.com" =
target=3D"_blank">skbi...@gmail.com</a>&gt;</span> wrote:<br><blockquote cl=
ass=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;p=
adding-left:1ex"><div dir=3D"ltr">When I try to use Singluarity (version 2.=
4.2) on the head node of our HPC (running CentOS 6.8), it works fine:<br><b=
r><div style=3D"background-color:rgb(250,250,250);border-color:rgb(187,187,=
187);border-style:solid;border-width:1px" class=3D"m_1629669566963311771pre=
ttyprint"><code class=3D"m_1629669566963311771prettyprint"><div class=3D"m_=
1629669566963311771subprettyprint"><span style=3D"color:#000" class=3D"m_16=
29669566963311771styled-by-prettify">$ </span><span style=3D"color:#008" cl=
ass=3D"m_1629669566963311771styled-by-prettify">module</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> load singul=
arity</span><span style=3D"color:#660" class=3D"m_1629669566963311771styled=
-by-prettify">/</span><span style=3D"color:#066" class=3D"m_162966956696331=
1771styled-by-prettify">2.4</span><span style=3D"color:#660" class=3D"m_162=
9669566963311771styled-by-prettify">.</span><span style=3D"color:#066" clas=
s=3D"m_1629669566963311771styled-by-prettify">2</span><span style=3D"color:=
#660" class=3D"m_1629669566963311771styled-by-prettify">;</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> singular=
ity shell stevekm_ngs580</span><span style=3D"color:#660" class=3D"m_162966=
9566963311771styled-by-prettify">-</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify">nf_base</span><span style=3D"c=
olor:#660" class=3D"m_1629669566963311771styled-by-prettify">-</span><span =
style=3D"color:#066" class=3D"m_1629669566963311771styled-by-prettify">2018=
</span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-p=
rettify">-</span><span style=3D"color:#066" class=3D"m_1629669566963311771s=
tyled-by-prettify">03</span><span style=3D"color:#660" class=3D"m_162966956=
6963311771styled-by-prettify"><wbr>-</span><span style=3D"color:#066" class=
=3D"m_1629669566963311771styled-by-prettify">15</span><span style=3D"color:=
#660" class=3D"m_1629669566963311771styled-by-prettify">-</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify">ea494a947=
2a4</span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-b=
y-prettify">.</span><span style=3D"color:#000" class=3D"m_16296695669633117=
71styled-by-prettify">img<br><br></span></div></code></div><br>However, whe=
n I try to run the same thing on our compute nodes, it fails:<br><br><div s=
tyle=3D"background-color:rgb(250,250,250);border-color:rgb(187,187,187);bor=
der-style:solid;border-width:1px" class=3D"m_1629669566963311771prettyprint=
"><code class=3D"m_1629669566963311771prettyprint"><div class=3D"m_16296695=
66963311771subprettyprint"><span style=3D"color:#000" class=3D"m_1629669566=
963311771styled-by-prettify">$ </span><span style=3D"color:#008" class=3D"m=
_1629669566963311771styled-by-prettify">module</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"> load singularity</s=
pan><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-pret=
tify">/</span><span style=3D"color:#066" class=3D"m_1629669566963311771styl=
ed-by-prettify">2.4</span><span style=3D"color:#660" class=3D"m_16296695669=
63311771styled-by-prettify">.</span><span style=3D"color:#066" class=3D"m_1=
629669566963311771styled-by-prettify">2</span><span style=3D"color:#660" cl=
ass=3D"m_1629669566963311771styled-by-prettify">;</span><span style=3D"colo=
r:#000" class=3D"m_1629669566963311771styled-by-prettify"> singularity shel=
l stevekm_ngs580</span><span style=3D"color:#660" class=3D"m_16296695669633=
11771styled-by-prettify">-</span><span style=3D"color:#000" class=3D"m_1629=
669566963311771styled-by-prettify">nf_base</span><span style=3D"color:#660"=
 class=3D"m_1629669566963311771styled-by-prettify">-</span><span style=3D"c=
olor:#066" class=3D"m_1629669566963311771styled-by-prettify">2018</span><sp=
an style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">-=
</span><span style=3D"color:#066" class=3D"m_1629669566963311771styled-by-p=
rettify">03</span><span style=3D"color:#660" class=3D"m_1629669566963311771=
styled-by-prettify"><wbr>-</span><span style=3D"color:#066" class=3D"m_1629=
669566963311771styled-by-prettify">15</span><span style=3D"color:#660" clas=
s=3D"m_1629669566963311771styled-by-prettify">-</span><span style=3D"color:=
#000" class=3D"m_1629669566963311771styled-by-prettify">ea494a9472a4</span>=
<span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify=
">.</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-b=
y-prettify">img<br>ERROR =C2=A0</span><span style=3D"color:#660" class=3D"m=
_1629669566963311771styled-by-prettify">:</span><span style=3D"color:#000" =
class=3D"m_1629669566963311771styled-by-prettify"> </span><span style=3D"co=
lor:#606" class=3D"m_1629669566963311771styled-by-prettify">Singularity</sp=
an><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prett=
ify"> </span><span style=3D"color:#008" class=3D"m_1629669566963311771style=
d-by-prettify">is</span><span style=3D"color:#000" class=3D"m_1629669566963=
311771styled-by-prettify"> </span><span style=3D"color:#008" class=3D"m_162=
9669566963311771styled-by-prettify">not</span><span style=3D"color:#000" cl=
ass=3D"m_1629669566963311771styled-by-prettify"> running </span><span style=
=3D"color:#008" class=3D"m_1629669566963311771styled-by-prettify">with</spa=
n><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pretti=
fy"> appropriate privileges</span><span style=3D"color:#660" class=3D"m_162=
9669566963311771styled-by-prettify">!</span><span style=3D"color:#000" clas=
s=3D"m_1629669566963311771styled-by-prettify"><br>ERROR =C2=A0</span><span =
style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">:</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"> </span><span style=3D"color:#606" class=3D"m_1629669566963311771styl=
ed-by-prettify">Check</span><span style=3D"color:#000" class=3D"m_162966956=
6963311771styled-by-prettify"> installation path </span><span style=3D"colo=
r:#008" class=3D"m_1629669566963311771styled-by-prettify">is</span><span st=
yle=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> </spa=
n><span style=3D"color:#008" class=3D"m_1629669566963311771styled-by-pretti=
fy">not</span><span style=3D"color:#000" class=3D"m_1629669566963311771styl=
ed-by-prettify"> mounted </span><span style=3D"color:#008" class=3D"m_16296=
69566963311771styled-by-prettify">with</span><span style=3D"color:#000" cla=
ss=3D"m_1629669566963311771styled-by-prettify"> </span><span style=3D"color=
:#080" class=3D"m_1629669566963311771styled-by-prettify">&#39;nosuid&#39;</=
span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-pre=
ttify">,</span><span style=3D"color:#000" class=3D"m_1629669566963311771sty=
led-by-prettify"> </span><span style=3D"color:#008" class=3D"m_162966956696=
3311771styled-by-prettify">and</span><span style=3D"color:#660" class=3D"m_=
1629669566963311771styled-by-prettify">/</span><span style=3D"color:#008" c=
lass=3D"m_1629669566963311771styled-by-prettify">or</span><span style=3D"co=
lor:#000" class=3D"m_1629669566963311771styled-by-prettify"> consult manual=
</span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-p=
rettify">.</span><span style=3D"color:#000" class=3D"m_1629669566963311771s=
tyled-by-prettify"><br>ABORT =C2=A0</span><span style=3D"color:#660" class=
=3D"m_1629669566963311771styled-by-prettify">:</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"> </span><span style=
=3D"color:#606" class=3D"m_1629669566963311771styled-by-prettify">Retval</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"> </span><span style=3D"color:#660" class=3D"m_1629669566963311771styl=
ed-by-prettify">=3D</span><span style=3D"color:#000" class=3D"m_16296695669=
63311771styled-by-prettify"> </span><span style=3D"color:#066" class=3D"m_1=
629669566963311771styled-by-prettify">255</span><span style=3D"color:#000" =
class=3D"m_1629669566963311771styled-by-prettify"><br><br></span></div></co=
de></div><br>The compute nodes are supposed to be running with the exact sa=
me software configuration as the head node, so we are kinda stumped as to w=
hat might be causing this. <br><br>I saw there are details about the config=
 here:<br><a href=3D"http://singularity.lbl.gov/docs-config#parameters" tar=
get=3D"_blank">http://singularity.lbl.gov/<wbr>docs-config#parameters</a><b=
r><br>And I checked the contents of our config file but it all looks like t=
he default values:<br><div style=3D"background-color:rgb(250,250,250);borde=
r-color:rgb(187,187,187);border-style:solid;border-width:1px" class=3D"m_16=
29669566963311771prettyprint"><code class=3D"m_1629669566963311771prettypri=
nt"><div class=3D"m_1629669566963311771subprettyprint"><span style=3D"color=
:#000" class=3D"m_1629669566963311771styled-by-prettify"><br>$ cat </span><=
span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify"=
>/</span><span style=3D"color:#008" class=3D"m_1629669566963311771styled-by=
-prettify">local</span><span style=3D"color:#660" class=3D"m_16296695669633=
11771styled-by-prettify">/</span><span style=3D"color:#000" class=3D"m_1629=
669566963311771styled-by-prettify">apps</span><span style=3D"color:#660" cl=
ass=3D"m_1629669566963311771styled-by-prettify">/</span><span style=3D"colo=
r:#000" class=3D"m_1629669566963311771styled-by-prettify">singularity</span=
><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettif=
y">/</span><span style=3D"color:#066" class=3D"m_1629669566963311771styled-=
by-prettify">2.4</span><span style=3D"color:#660" class=3D"m_16296695669633=
11771styled-by-prettify">.</span><span style=3D"color:#066" class=3D"m_1629=
669566963311771styled-by-prettify">2</span><span style=3D"color:#660" class=
=3D"m_1629669566963311771styled-by-prettify">/</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"><wbr>etc</span><span=
 style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">/</=
span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pre=
ttify">singularity</span><span style=3D"color:#660" class=3D"m_162966956696=
3311771styled-by-prettify">/</span><span style=3D"color:#000" class=3D"m_16=
29669566963311771styled-by-prettify">singularity</span><span style=3D"color=
:#660" class=3D"m_1629669566963311771styled-by-prettify">.</span><span styl=
e=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify">co<wbr>n=
f<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled=
-by-prettify"># SINGULARITY.CONF</span><span style=3D"color:#000" class=3D"=
m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#8=
00" class=3D"m_1629669566963311771styled-by-prettify"># This is the global =
configuration file for Singularity. This file controls</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><=
span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"=
># what the container is allowed to do on a particular host, and as a resul=
t</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-=
prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311=
771styled-by-prettify"># this file must be owned by root.</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><br><=
br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-b=
y-prettify"># ALLOW SETUID: [BOOL]</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"colo=
r:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: yes</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771s=
tyled-by-prettify"># Should we allow users to utilize the setuid program fl=
ow within Singularity?</span><span style=3D"color:#000" class=3D"m_16296695=
66963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=
=3D"m_1629669566963311771styled-by-prettify"># note1: This is the default m=
ode, and to utilize all features, this option</span><span style=3D"color:#0=
00" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span styl=
e=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># will n=
eed to be enabled.</span><span style=3D"color:#000" class=3D"m_162966956696=
3311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m=
_1629669566963311771styled-by-prettify"># note2: If this option is disabled=
, it will rely on the user namespace</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"colo=
r:#800" class=3D"m_1629669566963311771styled-by-prettify"># exclusively whi=
ch has not been integrated equally between the different</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></spa=
n><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pretti=
fy"># Linux distributions.</span><span style=3D"color:#000" class=3D"m_1629=
669566963311771styled-by-prettify"><br>allow setuid </span><span style=3D"c=
olor:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span><spa=
n style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> y=
es<br><br><br></span><span style=3D"color:#800" class=3D"m_1629669566963311=
771styled-by-prettify"># MAX LOOP DEVICES: [INT]</span><span style=3D"color=
:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span s=
tyle=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEF=
AULT: 256</span><span style=3D"color:#000" class=3D"m_1629669566963311771st=
yled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_16296695=
66963311771styled-by-prettify"># Set the maximum number of loop devices tha=
t Singularity should ever attempt</span><span style=3D"color:#000" class=3D=
"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#=
800" class=3D"m_1629669566963311771styled-by-prettify"># to utilize.</span>=
<span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify=
"><br>max loop devices </span><span style=3D"color:#660" class=3D"m_1629669=
566963311771styled-by-prettify">=3D</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"> </span><span style=3D"color:#=
066" class=3D"m_1629669566963311771styled-by-prettify">256</span><span styl=
e=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><br>=
<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-=
by-prettify"># ALLOW PID NS: [BOOL]</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"colo=
r:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: yes</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771s=
tyled-by-prettify"># Should we allow users to request the PID namespace? No=
te that for some HPC</span><span style=3D"color:#000" class=3D"m_1629669566=
963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D=
"m_1629669566963311771styled-by-prettify"># resources, the PID namespace ma=
y confuse the resource manager and break how</span><span style=3D"color:#00=
0" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># some MP=
I implementations utilize shared memory. (note, on some older</span><span s=
tyle=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><=
/span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pr=
ettify"># systems, the PID namespace is always used)</span><span style=3D"c=
olor:#000" class=3D"m_1629669566963311771styled-by-prettify"><br>allow pid =
ns </span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-b=
y-prettify">=3D</span><span style=3D"color:#000" class=3D"m_162966956696331=
1771styled-by-prettify"> yes<br><br><br></span><span style=3D"color:#800" c=
lass=3D"m_1629669566963311771styled-by-prettify"># CONFIG PASSWD: [BOOL]</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771s=
tyled-by-prettify"># DEFAULT: yes</span><span style=3D"color:#000" class=3D=
"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#=
800" class=3D"m_1629669566963311771styled-by-prettify"># If /etc/passwd exi=
sts within the container, this will automatically append</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></spa=
n><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pretti=
fy"># an entry for the calling user.</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br>config passwd </span><span=
 style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D=
</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-p=
rettify"> yes<br><br><br></span><span style=3D"color:#800" class=3D"m_16296=
69566963311771styled-by-prettify"># CONFIG GROUP: [BOOL]</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></spa=
n><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pretti=
fy"># DEFAULT: yes</span><span style=3D"color:#000" class=3D"m_162966956696=
3311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m=
_1629669566963311771styled-by-prettify"># If /etc/group exists within the c=
ontainer, this will automatically append</span><span style=3D"color:#000" c=
lass=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"=
color:#800" class=3D"m_1629669566963311771styled-by-prettify"># group entri=
es for the calling user.</span><span style=3D"color:#000" class=3D"m_162966=
9566963311771styled-by-prettify"><br>config </span><span style=3D"color:#00=
8" class=3D"m_1629669566963311771styled-by-prettify">group</span><span styl=
e=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> </span>=
<span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify=
">=3D</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled=
-by-prettify"> yes<br><br><br></span><span style=3D"color:#800" class=3D"m_=
1629669566963311771styled-by-prettify"># CONFIG RESOLV_CONF: [BOOL]</span><=
span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"=
><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled=
-by-prettify"># DEFAULT: yes</span><span style=3D"color:#000" class=3D"m_16=
29669566963311771styled-by-prettify"><br></span><span style=3D"color:#800" =
class=3D"m_1629669566963311771styled-by-prettify"># If there is a bind poin=
t within the container, use the host&#39;s</span><span style=3D"color:#000"=
 class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># /etc/re=
solv.conf.</span><span style=3D"color:#000" class=3D"m_1629669566963311771s=
tyled-by-prettify"><br>config resolv_conf </span><span style=3D"color:#660"=
 class=3D"m_1629669566963311771styled-by-prettify">=3D</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> yes<br><br>=
<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-=
by-prettify"># MOUNT PROC: [BOOL]</span><span style=3D"color:#000" class=3D=
"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#=
800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: yes</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styl=
ed-by-prettify"># Should we automatically bind mount /proc within the conta=
iner?</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled=
-by-prettify"><br>mount proc </span><span style=3D"color:#660" class=3D"m_1=
629669566963311771styled-by-prettify">=3D</span><span style=3D"color:#000" =
class=3D"m_1629669566963311771styled-by-prettify"> yes<br><br><br></span><s=
pan style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify">=
# MOUNT SYS: [BOOL]</span><span style=3D"color:#000" class=3D"m_16296695669=
63311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"=
m_1629669566963311771styled-by-prettify"># DEFAULT: yes</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></spa=
n><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pretti=
fy"># Should we automatically bind mount /sys within the container?</span><=
span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"=
><br>mount sys </span><span style=3D"color:#660" class=3D"m_162966956696331=
1771styled-by-prettify">=3D</span><span style=3D"color:#000" class=3D"m_162=
9669566963311771styled-by-prettify"> yes<br><br><br></span><span style=3D"c=
olor:#800" class=3D"m_1629669566963311771styled-by-prettify"># MOUNT DEV: [=
yes/no/minimal]</span><span style=3D"color:#000" class=3D"m_162966956696331=
1771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_16=
29669566963311771styled-by-prettify"># DEFAULT: yes</span><span style=3D"co=
lor:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><spa=
n style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># =
Should we automatically bind mount /dev within the container? If &#39;minim=
al&#39;</span><span style=3D"color:#000" class=3D"m_1629669566963311771styl=
ed-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566=
963311771styled-by-prettify"># is chosen, then only &#39;null&#39;, &#39;ze=
ro&#39;, &#39;random&#39;, &#39;urandom&#39;, and &#39;shm&#39; will</span>=
<span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify=
"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771style=
d-by-prettify"># be included (the same effect as the --contain options)</sp=
an><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prett=
ify"><br>mount dev </span><span style=3D"color:#660" class=3D"m_16296695669=
63311771styled-by-prettify">=3D</span><span style=3D"color:#000" class=3D"m=
_1629669566963311771styled-by-prettify"> yes<br><br><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># MOUNT D=
EVPTS: [BOOL]</span><span style=3D"color:#000" class=3D"m_16296695669633117=
71styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629=
669566963311771styled-by-prettify"># DEFAULT: yes</span><span style=3D"colo=
r:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span =
style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># Sh=
ould we mount a new instance of devpts if there is a &#39;minimal&#39;</spa=
n><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pretti=
fy"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771sty=
led-by-prettify"># /dev, or -C is passed?=C2=A0 Note, this requires that yo=
ur kernel was</span><span style=3D"color:#000" class=3D"m_16296695669633117=
71styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629=
669566963311771styled-by-prettify"># configured with CONFIG_DEVPTS_MULTIPLE=
_<wbr>INSTANCES=3Dy, or that you&#39;re</span><span style=3D"color:#000" cl=
ass=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"c=
olor:#800" class=3D"m_1629669566963311771styled-by-prettify"># running kern=
el 4.7 or newer.</span><span style=3D"color:#000" class=3D"m_16296695669633=
11771styled-by-prettify"><br>mount devpts </span><span style=3D"color:#660"=
 class=3D"m_1629669566963311771styled-by-prettify">=3D</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> yes<br><br>=
<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-=
by-prettify"># MOUNT HOME: [BOOL]</span><span style=3D"color:#000" class=3D=
"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#=
800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: yes</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styl=
ed-by-prettify"># Should we automatically determine the calling user&#39;s =
home directory and</span><span style=3D"color:#000" class=3D"m_162966956696=
3311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m=
_1629669566963311771styled-by-prettify"># attempt to mount it&#39;s base pa=
th into the container? If the --contain option</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span sty=
le=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># is us=
ed, the home directory will be created within the session directory or</spa=
n><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pretti=
fy"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771sty=
led-by-prettify"># can be overridden with the SINGULARITY_HOME or SINGULARI=
TY_WORKDIR</span><span style=3D"color:#000" class=3D"m_1629669566963311771s=
tyled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669=
566963311771styled-by-prettify"># environment variables (or their correspon=
ding command line options).</span><span style=3D"color:#000" class=3D"m_162=
9669566963311771styled-by-prettify"><br>mount home </span><span style=3D"co=
lor:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span><span=
 style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> ye=
s<br><br><br></span><span style=3D"color:#800" class=3D"m_16296695669633117=
71styled-by-prettify"># MOUNT TMP: [BOOL]</span><span style=3D"color:#000" =
class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D=
"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: y=
es</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by=
-prettify"><br></span><span style=3D"color:#800" class=3D"m_162966956696331=
1771styled-by-prettify"># Should we automatically bind mount /tmp and /var/=
tmp into the container? If</span><span style=3D"color:#000" class=3D"m_1629=
669566963311771styled-by-prettify"><br></span><span style=3D"color:#800" cl=
ass=3D"m_1629669566963311771styled-by-prettify"># the --contain option is u=
sed, both tmp locations will be created in the</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span sty=
le=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># sessi=
on directory or can be specified via the =C2=A0SINGULARITY_WORKDIR</span><s=
pan style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify">=
<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-=
by-prettify"># environment variable (or the --workingdir command line optio=
n).</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-b=
y-prettify"><br>mount tmp </span><span style=3D"color:#660" class=3D"m_1629=
669566963311771styled-by-prettify">=3D</span><span style=3D"color:#000" cla=
ss=3D"m_1629669566963311771styled-by-prettify"> yes<br><br><br></span><span=
 style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># M=
OUNT HOSTFS: [BOOL]</span><span style=3D"color:#000" class=3D"m_16296695669=
63311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"=
m_1629669566963311771styled-by-prettify"># DEFAULT: no</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><=
span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"=
># Probe for all mounted file systems that are mounted on the host, and bin=
d</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-=
prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311=
771styled-by-prettify"># those into the container?</span><span style=3D"col=
or:#000" class=3D"m_1629669566963311771styled-by-prettify"><br>mount hostfs=
 </span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-=
prettify">=3D</span><span style=3D"color:#000" class=3D"m_16296695669633117=
71styled-by-prettify"> </span><span style=3D"color:#008" class=3D"m_1629669=
566963311771styled-by-prettify">no</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br><br><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># BIND PA=
TH: [STRING]</span><span style=3D"color:#000" class=3D"m_162966956696331177=
1styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_16296=
69566963311771styled-by-prettify"># DEFAULT: Undefined</span><span style=3D=
"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><=
span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"=
># Define a list of files/directories that should be made available from wi=
thin</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-=
by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963=
311771styled-by-prettify"># the container. The file or directory must exist=
 within the container on</span><span style=3D"color:#000" class=3D"m_162966=
9566963311771styled-by-prettify"><br></span><span style=3D"color:#800" clas=
s=3D"m_1629669566963311771styled-by-prettify"># which to attach to. you can=
 specify a different source and destination</span><span style=3D"color:#000=
" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># path (r=
espectively) with a colon; otherwise source and dest are the same.</span><s=
pan style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify">=
<br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-=
by-prettify">#bind path =3D /etc/singularity/default-<wbr>nsswitch.conf:/et=
c/nsswitch.<wbr>conf</span><span style=3D"color:#000" class=3D"m_1629669566=
963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D=
"m_1629669566963311771styled-by-prettify">#bind path =3D /opt</span><span s=
tyle=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><=
/span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pr=
ettify">#bind path =3D /scratch</span><span style=3D"color:#000" class=3D"m=
_1629669566963311771styled-by-prettify"><br>bind path </span><span style=3D=
"color:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span><s=
pan style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify">=
 </span><span style=3D"color:#080" class=3D"m_1629669566963311771styled-by-=
prettify">/etc/</span><span style=3D"color:#000" class=3D"m_162966956696331=
1771styled-by-prettify">localtime<br>bind path </span><span style=3D"color:=
#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span><span sty=
le=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> </span=
><span style=3D"color:#080" class=3D"m_1629669566963311771styled-by-prettif=
y">/etc/</span><span style=3D"color:#000" class=3D"m_1629669566963311771sty=
led-by-prettify">hosts<br><br><br></span><span style=3D"color:#800" class=
=3D"m_1629669566963311771styled-by-prettify"># USER BIND CONTROL: [BOOL]</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771s=
tyled-by-prettify"># DEFAULT: yes</span><span style=3D"color:#000" class=3D=
"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"color:#=
800" class=3D"m_1629669566963311771styled-by-prettify"># Allow users to inf=
luence and/or define bind points at runtime? This will allow</span><span st=
yle=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></=
span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pre=
ttify"># users to specify bind points, scratch and tmp locations. (note: Us=
er bind</span><span style=3D"color:#000" class=3D"m_1629669566963311771styl=
ed-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566=
963311771styled-by-prettify"># control is only allowed if the host also sup=
ports PR_SET_NO_NEW_PRIVS)</span><span style=3D"color:#000" class=3D"m_1629=
669566963311771styled-by-prettify"><br>user bind control </span><span style=
=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"> yes<br><br><br></span><span style=3D"color:#800" class=3D"m_16296695669=
63311771styled-by-prettify"># ENABLE OVERLAY: [yes/no/try]</span><span styl=
e=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></sp=
an><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prett=
ify"># DEFAULT: try</span><span style=3D"color:#000" class=3D"m_16296695669=
63311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"=
m_1629669566963311771styled-by-prettify"># Enabling this option will make i=
t possible to specify bind paths to locations</span><span style=3D"color:#0=
00" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span styl=
e=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># that d=
o not currently exist within the container.=C2=A0 If &#39;try&#39; is chose=
n,</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by=
-prettify"><br></span><span style=3D"color:#800" class=3D"m_162966956696331=
1771styled-by-prettify"># overlayfs will be tried but if it is unavailable =
it will be silently ignored.</span><span style=3D"color:#000" class=3D"m_16=
29669566963311771styled-by-prettify"><br>enable overlay </span><span style=
=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"> </span><span style=3D"color:#008" class=3D"m_1629669566963311771styled-=
by-prettify">try</span><span style=3D"color:#000" class=3D"m_16296695669633=
11771styled-by-prettify"><br><br><br></span><span style=3D"color:#800" clas=
s=3D"m_1629669566963311771styled-by-prettify"># MOUNT SLAVE: [BOOL]</span><=
span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"=
><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled=
-by-prettify"># DEFAULT: yes</span><span style=3D"color:#000" class=3D"m_16=
29669566963311771styled-by-prettify"><br></span><span style=3D"color:#800" =
class=3D"m_1629669566963311771styled-by-prettify"># Should we automatically=
 propagate file-system changes from the host?</span><span style=3D"color:#0=
00" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span styl=
e=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># This s=
hould be set to &#39;yes&#39; when autofs mounts in the system should</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styl=
ed-by-prettify"># show up in the container.</span><span style=3D"color:#000=
" class=3D"m_1629669566963311771styled-by-prettify"><br>mount slave </span>=
<span style=3D"color:#660" class=3D"m_1629669566963311771styled-by-prettify=
">=3D</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled=
-by-prettify"> yes<br><br><br></span><span style=3D"color:#800" class=3D"m_=
1629669566963311771styled-by-prettify"># SESSIONDIR MAXSIZE: [STRING]</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styl=
ed-by-prettify"># DEFAULT: 16</span><span style=3D"color:#000" class=3D"m_1=
629669566963311771styled-by-prettify"><br></span><span style=3D"color:#800"=
 class=3D"m_1629669566963311771styled-by-prettify"># This specifies how lar=
ge the default sessiondir should be (in MB) and it will</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></spa=
n><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pretti=
fy"># only affect users who use the &quot;--contain&quot; options and don&#=
39;t also specify a</span><span style=3D"color:#000" class=3D"m_16296695669=
63311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"=
m_1629669566963311771styled-by-prettify"># location to do default read/writ=
es to (e.g. &quot;--workdir&quot; or &quot;--home&quot;).</span><span style=
=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br>sessi=
ondir max size </span><span style=3D"color:#660" class=3D"m_162966956696331=
1771styled-by-prettify">=3D</span><span style=3D"color:#000" class=3D"m_162=
9669566963311771styled-by-prettify"> </span><span style=3D"color:#066" clas=
s=3D"m_1629669566963311771styled-by-prettify">16</span><span style=3D"color=
:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><br><br></span=
><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettif=
y"># LIMIT CONTAINER OWNERS: [STRING]</span><span style=3D"color:#000" clas=
s=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"col=
or:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: NULL<=
/span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pr=
ettify"><br></span><span style=3D"color:#800" class=3D"m_162966956696331177=
1styled-by-prettify"># Only allow containers to be used that are owned by a=
 given user. If this</span><span style=3D"color:#000" class=3D"m_1629669566=
963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D=
"m_1629669566963311771styled-by-prettify"># configuration is undefined (com=
mented or set to NULL), all containers are</span><span style=3D"color:#000"=
 class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># allowed=
 to be used. This feature only applies when Singularity is running in</span=
><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettif=
y"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styl=
ed-by-prettify"># SUID mode and the user is non-root.</span><span style=3D"=
color:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><s=
pan style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify">=
#limit container owners =3D gmk, singularity, nobody</span><span style=3D"c=
olor:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><br><br></=
span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-pre=
ttify"># LIMIT CONTAINER PATHS: [STRING]</span><span style=3D"color:#000" c=
lass=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"=
color:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: NU=
LL</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by=
-prettify"><br></span><span style=3D"color:#800" class=3D"m_162966956696331=
1771styled-by-prettify"># Only allow containers to be used that are located=
 within an allowed path</span><span style=3D"color:#000" class=3D"m_1629669=
566963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=
=3D"m_1629669566963311771styled-by-prettify"># prefix. If this configuratio=
n is undefined (commented or set to NULL),</span><span style=3D"color:#000"=
 class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># contain=
ers will be allowed to run from anywhere on the file system. This</span><sp=
an style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"><=
br></span><span style=3D"color:#800" class=3D"m_1629669566963311771styled-b=
y-prettify"># feature only applies when Singularity is running in SUID mode=
 and the user is</span><span style=3D"color:#000" class=3D"m_16296695669633=
11771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1=
629669566963311771styled-by-prettify"># non-root.</span><span style=3D"colo=
r:#000" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span =
style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify">#lim=
it container paths =3D /scratch, /tmp, /global</span><span style=3D"color:#=
000" class=3D"m_1629669566963311771styled-by-prettify"><br><br><br></span><=
span style=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"=
># ALLOW CONTAINER ${TYPE}: [BOOL]</span><span style=3D"color:#000" class=
=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=3D"colo=
r:#800" class=3D"m_1629669566963311771styled-by-prettify"># DEFAULT: yes</s=
pan><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pret=
tify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771s=
tyled-by-prettify"># This feature limits what kind of containers that Singu=
larity will allow</span><span style=3D"color:#000" class=3D"m_1629669566963=
311771styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_=
1629669566963311771styled-by-prettify"># users to use (note this does not a=
pply for root).</span><span style=3D"color:#000" class=3D"m_162966956696331=
1771styled-by-prettify"><br>allow container squashfs </span><span style=3D"=
color:#660" class=3D"m_1629669566963311771styled-by-prettify">=3D</span><sp=
an style=3D"color:#000" class=3D"m_1629669566963311771styled-by-prettify"> =
yes<br>allow container extfs </span><span style=3D"color:#660" class=3D"m_1=
629669566963311771styled-by-prettify">=3D</span><span style=3D"color:#000" =
class=3D"m_1629669566963311771styled-by-prettify"> yes<br>allow container d=
ir </span><span style=3D"color:#660" class=3D"m_1629669566963311771styled-b=
y-prettify">=3D</span><span style=3D"color:#000" class=3D"m_162966956696331=
1771styled-by-prettify"> yes<br><br><br></span><span style=3D"color:#800" c=
lass=3D"m_1629669566963311771styled-by-prettify"># AUTOFS BUG PATH: [STRING=
]</span><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-=
prettify"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311=
771styled-by-prettify"># DEFAULT: Undefined</span><span style=3D"color:#000=
" class=3D"m_1629669566963311771styled-by-prettify"><br></span><span style=
=3D"color:#800" class=3D"m_1629669566963311771styled-by-prettify"># Define =
list of autofs directories which produces &quot;Too many levels of symbolin=
k links&quot;</span><span style=3D"color:#000" class=3D"m_16296695669633117=
71styled-by-prettify"><br></span><span style=3D"color:#800" class=3D"m_1629=
669566963311771styled-by-prettify"># errors when accessed from container (t=
ypically bind mounts)</span><span style=3D"color:#000" class=3D"m_162966956=
6963311771styled-by-prettify"><br></span><span style=3D"color:#800" class=
=3D"m_1629669566963311771styled-by-prettify">#autofs bug path =3D /nfs</spa=
n><span style=3D"color:#000" class=3D"m_1629669566963311771styled-by-pretti=
fy"><br></span><span style=3D"color:#800" class=3D"m_1629669566963311771sty=
led-by-prettify">#autofs bug path =3D /cifs-share</span><span style=3D"colo=
r:#000" class=3D"m_1629669566963311771styled-by-prettify"><br><br></span></=
div></code></div><br><br>Any ideas what might be happening? <br><span class=
=3D"HOEnZb"><font color=3D"#888888"><br><br><br></font></span></div><span c=
lass=3D"HOEnZb"><font color=3D"#888888">

<p></p>

-- <br>
You received this message because you are subscribed to the Google Groups &=
quot;singularity&quot; group.<br>
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank">singularity+u=
nsubscribe@lbl.<wbr>gov</a>.<br>
</font></span></blockquote></div><br><br clear=3D"all"><div><br></div>-- <b=
r><div class=3D"gmail_signature" data-smartmail=3D"gmail_signature"><div di=
r=3D"ltr"><div><div dir=3D"ltr"><div><div dir=3D"ltr"><div><div dir=3D"ltr"=
><div><div dir=3D"ltr"><div>Gregory M. Kurtzer</div><div>CEO, Sylabs Inc.</=
div></div></div></div></div></div></div></div></div></div></div>
</div>

--001a114a8a5071f0b20568f8dc6f--
