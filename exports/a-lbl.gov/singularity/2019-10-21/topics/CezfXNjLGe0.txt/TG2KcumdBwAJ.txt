X-Received: by 10.66.160.9 with SMTP id xg9mr61981358pab.7.1470324035234;
        Thu, 04 Aug 2016 08:20:35 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.107.59.78 with SMTP id i75ls1645992ioa.28.gmail; Thu, 04 Aug
 2016 08:20:34 -0700 (PDT)
X-Received: by 10.66.189.199 with SMTP id gk7mr128668412pac.158.1470324034618;
        Thu, 04 Aug 2016 08:20:34 -0700 (PDT)
Return-Path: <richard...@gmail.com>
Received: from fe3.lbl.gov (fe3.lbl.gov. [128.3.41.68])
        by mx.google.com with ESMTP id xq3si15054295pac.194.2016.08.04.08.20.34
        for <singu...@lbl.gov>;
        Thu, 04 Aug 2016 08:20:34 -0700 (PDT)
Received-SPF: pass (google.com: domain of richard...@gmail.com designates 209.85.192.193 as permitted sender) client-ip=209.85.192.193;
Authentication-Results: mx.google.com;
       dkim=pass head...@gmail.com;
       spf=pass (google.com: domain of richard...@gmail.com designates 209.85.192.193 as permitted sender) smtp.mailfrom=richard...@gmail.com
X-Ironport-SBRS: 1.6
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A2E+AQC2XKNXdMHAVdFdhBt8gz+kOokuhn12gT0aJiaBbFSBXEsBgQ8CgUg4FAEBAQEBAQEDDwEKCwwIFzGCUzkKBisBAQEBAQEBAQEhAg0eBBYLGwEBBAESCAEIHQENDh0BAwELBgULDSABBgMCAiECDgMBBQELEQ4HBAEcBAGHdAEDDwgFCaEdgTI+MYs7gWqCWgWGNgoZJw1Ug0QBAQEBAQEEAQEBAQEBAQEBAQEUAgYQiBKBUoEDgkOBTxEBSIJVK4IvBYFFhEeCEgdghRILaj+JNTSGGoJ8gnNDgjaBaxc3hw0OI4VJiCyEBYI4MIEPDw+CSByBbE4BAQEBA4YQgTYBAQE
X-IPAS-Result: A2E+AQC2XKNXdMHAVdFdhBt8gz+kOokuhn12gT0aJiaBbFSBXEsBgQ8CgUg4FAEBAQEBAQEDDwEKCwwIFzGCUzkKBisBAQEBAQEBAQEhAg0eBBYLGwEBBAESCAEIHQENDh0BAwELBgULDSABBgMCAiECDgMBBQELEQ4HBAEcBAGHdAEDDwgFCaEdgTI+MYs7gWqCWgWGNgoZJw1Ug0QBAQEBAQEEAQEBAQEBAQEBAQEUAgYQiBKBUoEDgkOBTxEBSIJVK4IvBYFFhEeCEgdghRILaj+JNTSGGoJ8gnNDgjaBaxc3hw0OI4VJiCyEBYI4MIEPDw+CSByBbE4BAQEBA4YQgTYBAQE
X-IronPort-AV: E=Sophos;i="5.28,470,1464678000"; 
   d="scan'208,217";a="32299591"
Received: from mail-pf0-f193.google.com ([209.85.192.193])
  by fe3.lbl.gov with ESMTP; 04 Aug 2016 08:20:32 -0700
Received: by mail-pf0-f193.google.com with SMTP id y134so18399242pfg.3
        for <singu...@lbl.gov>; Thu, 04 Aug 2016 08:20:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:subject:from:in-reply-to:date:cc:message-id:references
         :to;
        bh=vdGbuvmHyfVMNNf5oDTeOmVz/FAghR0efznBrcW1qMU=;
        b=ue1qYxuczeF0S2JjfsM6UTvUqotU/JhARiRyw8yoWHvrJLzzuy85dUbk+zf7GRFGqq
         MZYMZQxoktXp2GD+MAAqhmV19Yival36EWBMcBOPxDZnRw1lasDLQ0zs7jnEzdBlMVHR
         md6J1XVyfJnIjNNsc+YA8kqvZtmjMSKEbpg04vvqJDO6/BgW+tOystFf26adqiej5MqV
         YZjZ7pyV5JgLK0magPDJWtD1yCE2szpfymSQFATwf0bHYMQZ7JwBYwQq0zBrGR4cgh1E
         Ktzg+wqDL17ovWy2eFhLsh6npQyrK4U29nvTfMzhntebnV872X2hMj+JZcgp3mPAHL1l
         EmuA==
X-Gm-Message-State: AEkoouvoAjrVr0ETCM/PUSC9B4hwikXMGSQyHmFPDrGaNh3X+5wU1o5Wug5gLgnwhXPLNQ==
X-Received: by 10.98.57.90 with SMTP id g87mr127021933pfa.106.1470324031317;
        Thu, 04 Aug 2016 08:20:31 -0700 (PDT)
Return-Path: <richard...@gmail.com>
Received: from [10.207.132.212] ([67.142.235.252])
        by smtp.gmail.com with ESMTPSA id y200sm21220418pfb.13.2016.08.04.08.18.10
        (version=TLS1 cipher=ECDHE-RSA-AES128-SHA bits=128/128);
        Thu, 04 Aug 2016 08:20:30 -0700 (PDT)
Content-Type: multipart/alternative; boundary="Apple-Mail=_2971EE55-98A1-4350-AD6B-9C4DE084EB78"
Mime-Version: 1.0 (Mac OS X Mail 8.2 \(2104\))
Subject: Re: [Singularity] How to use GPU in singularity?
From: Rick Wagner <richard...@gmail.com>
In-Reply-To: <CAMfmYegA2BbQ6V-ZmUDRgm35GSoBXiMh82K7bAhZLvynGce7Cw@mail.gmail.com>
Date: Thu, 4 Aug 2016 08:18:00 -0700
Cc: Mahidhar Tatineni <mahi...@sdsc.edu>
Message-Id: <90C1F3B7-11CF-403C-AA00-66076BFA919C@gmail.com>
References: <02b27dd5-dcc4-4800-97f6-7dcfcc85afd8@lbl.gov> <CAA8GL6Bsyt5oHK8O9GrDS6F=USv-aP0K9a+m8Q+jfOJ8kpxrhA@mail.gmail.com>
 <CAA8GL6DP3KhfbWV7nK5JGxNn4S+=M0=vEV0mACsoRrd6Ag2GpQ@mail.gmail.com>
 <718cb7c4-524f-4b08-bde9-3a36013fba59@lbl.gov> <4e52c56a-5475-4075-a3c7-2ae22191b544@lbl.gov>
 <CAA8GL6BdE1TRBaPD-oM7qcj8QK1cBsmJsUzYyrvkRPBP9CX+hQ@mail.gmail.com>
 <CAMfmYehdPLtiouQqMGqOx4ZbEXFbbPRL5QOxsP_vQo0us1QLuA@mail.gmail.com>
 <B927B7F6-3CFB-452D-92AB-866F9B8024E4@gmail.com> <CAMfmYeiSvcReO4jvSGJkavnex64wGZ8Phxva2kAxJ7pcp48YiA@mail.gmail.com>
 <CAMfmYeiaTxVQSNqwprHe5ckcDHPcJXy3imdepiRL+KkDh12TCQ@mail.gmail.com>
 <65CD778F-6CD1-4DB4-9668-4D89839B7053@gmail.com> <CAMfmYeg_pnJcyKGetK7WVChToaWCgGYH-nrYY9v=2+RSkuWZuQ@mail.gmail.com>
 <C5AE54CB-2BA1-4E59-88FC-D20224A46086@gmail.com> <CAMfmYeg2rR9-U-zyviCeDXRt_QgKv_K0p9pf-+qgoGPQAjxjXA@mail.gmail.com>
 <95039222-908B-4AE8-8844-551646C9733C@gmail.com> <CAMfmYeh9m_Z7N5KQy5f5ocumCrG7bX33OjpsT4jh9KgOekWcWg@mail.gmail.com>
 <CAMfmYegA2BbQ6V-ZmUDRgm35GSoBXiMh82K7bAhZLvynGce7Cw@mail.gmail.com>
To: singularity@lbl.gov
X-Mailer: Apple Mail (2.2104)

--Apple-Mail=_2971EE55-98A1-4350-AD6B-9C4DE084EB78
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8

Hi Igor,

Thank you so much for taking the time to do this! We=E2=80=99ll test things=
 on Comet right away and help with any feedback we have.

Regarding the drivers, we=E2=80=99ll need to talk with some of our team wit=
h in-depth GPU experience and get back to you.

=E2=80=94Rick

> On Aug 4, 2016, at 7:34 AM, Igor Yakushin <igor...@gmail.com> wrote:
>=20
> Hi Rick,
>=20
> The scripts are attached. The driver script that calls others is build.sh=
. I found it the easiest to work with Scientific Linux 7, I had some issues=
 with Ubuntu and CentOS containers. Several Nvidia drivers and cuda must be=
 put in the same directory as the scripts for them to work.
> Once the image is build, you can choose which driver to use by executing:
> source /usr/local/nvidia.sh <driver version>
> inside the container. See /usr/local/NVIDIA* which drivers are provided b=
ut you can easily extend the script to any drivers.
> The container is built under singularity 2.1.
> I'll publish the image somewhere later today.
> The image contains a lot of other things not needed for TensorFlow.
> I tested it on my laptop (GeForce GTX 960M, 361.42) and on a few nodes on=
 the cluster (Tesla K40m, K80 driver versions 352.55, 346.47). At first gla=
nce TensorFlow works but I do not know it well enough to try all the featur=
es.
> One thing that is still not clear to me: how does Nvidia distinguish driv=
ers for different hardware? My guess is by version number since otherwise t=
he names are the same for consumer cards and Tesla but when you try to down=
load a driver from Nvidia some drivers support only Tesla and some only con=
sumer cards.
>=20
> Igor
>=20
> On Mon, Aug 1, 2016 at 9:21 PM, Igor Yakushin <igor...@gmail.com <mailto:=
igor...@gmail.com>> wrote:
> Hi Rick,
> 0) Don't use *.deb either for NVIDIA or cuda, use *.run.
> 1) Get the same version of NVIDIA as on the host and extract it (there is=
 an option for that) into a single directory in /usr/local without installi=
ng. Also pay attention to get NVIDIA*.run for your hardware. Apparently Tes=
la cards require different driver  than consumer cards.
> 2) Set both PATH and LD_LIBRARY_PATH to the same directory where NVIDIA i=
s unpacked. After that nvidia-smi should work on the singularity shell.
> 3) Get latest cuda 7.5  *.run file and install only cuda and not the driv=
er (there is an option for that; by default it would install driver as well=
 which would most likely be a different version than what you need and woul=
d conflict the version extracted from NVIDIA file)
> 4) cuda by default will also be installed into /usr/local; set LD_LIBRARY=
_PATH to point there
> 5) install the latest gpu enabled tensorflow with pip getting it from the=
ir website
> I'll try to put all this into *def file
> There might be some important prerequisite *deb files that I installed to=
 make all this work and forgot about them, so I would need to try to reprod=
uce it from scratch to rediscover them.
> Thank you,
> Igor
>=20
>=20
> On Mon, Aug 1, 2016 at 12:43 AM, Rick Wagner <richard...@gmail.com <mailt=
o:richard...@gmail.com>> wrote:
> Igor,
>=20
> If you had a chance to post your definition file or the steps you took, I=
 know several of us would appreciate it. Getting TensorFlow running on Cent=
OS was a huge effort for our support staff. And that's just one of many GPU=
-enabled applications.
>=20
> --Rick
>=20
> On Jul 31, 2016, at 10:20 PM, Igor Yakushin <igor...@gmail.com <mailto:ig=
or...@gmail.com>> wrote:
>=20
>> Thank you, Nathan. It finally works!
>>=20
>> On Sun, Jul 31, 2016 at 5:17 PM, Nathan Lin <nathan...@gmail.com <mailto=
:nathan...@gmail.com>> wrote:
>> Yes I do
>>=20
>> On Jul 31, 2016, at 5:03 PM, Igor Yakushin <igor...@gmail.com <mailto:ig=
or...@gmail.com>> wrote:
>>=20
>>> Nathan,
>>> When you import tensorflow in python, does it tell you what cuda librar=
ies it is loading or not?
>>> Do you see these messages:
>>> =3D=3D=3D=3D=3D=3D
>>> >>> import tensorflow as tf=20
>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUD=
A library libcublas.so locally=20
>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUD=
A library libcudnn.so locally=20
>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUD=
A library libcufft.so locally=20
>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUD=
A library libcuda.so locally=20
>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CUD=
A library libcurand.so locally=20
>>> =3D=3D=3D=3D=3D=3D
>>> Thank you,
>>> Igor
>>>=20
>>> On Sun, Jul 31, 2016 at 1:26 PM, Nathan Lin <nathan...@gmail.com <mailt=
o:nathan...@gmail.com>> wrote:
>>> Hi Igor,
>>>=20
>>> In regards to your first questions, the OS/drivers of your building com=
puter should not matter. I built an Ubuntu 14.04 image on my RHEL 7 box for=
 our RHEL 6 cluster. I'm not sure that the toolkit is that version specific=
, my image seems to work fine and it's running 353.63. There is one thing t=
hat I do that may be helpful. I read it somewhere online and am not actuall=
y sure if it does anything, but I've included it in my image definitions ju=
st in case. Apparently there is something about initializing the CUDA Toolk=
it. As part of my definition file I run 'make' on the CUDA sample 'deviceQu=
ery'. Maybe that will help?
>>>=20
>>> Best,
>>> Nathan
>>>=20
>>> On Jul 31, 2016, at 1:51 PM, Igor Yakushin <igor...@gmail.com <mailto:i=
gor...@gmail.com>> wrote:
>>>=20
>>>> Hi Nathan,
>>>> I got a little bit further: nvidia-smi is working now but tensorflow s=
till complains:
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>>=20
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>> Singularity/ubuntu_14.04.img> nvidia-smi=20
>>>> Sun Jul 31 17:33:44 2016       =20
>>>> +------------------------------------------------------+              =
         =20
>>>> | NVIDIA-SMI 352.55     Driver Version: 352.55         |              =
         =20
>>>> |-------------------------------+----------------------+--------------=
--------+=20
>>>> | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Unco=
rr. ECC |=20
>>>> | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Com=
pute M. |=20
>>>> |=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D|=20
>>>> |   0  Tesla K40m          Off  | 0000:20:00.0     Off |              =
      0 |=20
>>>> | N/A   45C    P0    79W / 235W |    158MiB / 11519MiB |     45%      =
Default |=20
>>>> +-------------------------------+----------------------+--------------=
--------+=20
>>>> |   1  Tesla K40m          Off  | 0000:8B:00.0     Off |              =
      0 |=20
>>>> | N/A   23C    P8    18W / 235W |     61MiB / 11519MiB |      0%      =
Default |=20
>>>> +-------------------------------+----------------------+--------------=
--------+=20
>>>>                                                                       =
        =20
>>>> +---------------------------------------------------------------------=
--------+=20
>>>> | Processes:                                                       GPU=
 Memory |=20
>>>> |  GPU       PID  Type  Process name                               Usa=
ge      |=20
>>>> |=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D|=20
>>>> +---------------------------------------------------------------------=
--------+=20
>>>> Singularity/ubuntu_14.04.img> python=20
>>>> Python 2.7.6 (default, Mar 22 2014, 22:59:56) =20
>>>> [GCC 4.8.2] on linux2=20
>>>> Type "help", "copyright", "credits" or "license" for more information.=
=20
>>>> >>> import tensorflow=20
>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CU=
DA library libcublas.so locally=20
>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CU=
DA library libcudnn.so locally=20
>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CU=
DA library libcufft.so locally=20
>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CU=
DA library libcuda.so.1 locally=20
>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened CU=
DA library libcurand.so locally=20
>>>> >>> ss =3D tensorflow.Session()=20
>>>> E tensorflow/stream_executor/cuda/cuda_driver.cc:491] failed call to c=
uInit: CUDA_ERROR_NO_DEVICE=20
>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:153] retrieving =
CUDA diagnostic information for host: midway-l34-02=20
>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:160] hostname: m=
idway-l34-02=20
>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:185] libcuda rep=
orted version is: 352.93.0=20
>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:356] driver vers=
ion file contents: """NVRM version: NVIDIA UNIX x86_64 Kernel Module  352.5=
5  Thu Oct  8 15:18:00 PDT 2015=20
>>>> GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) =20
>>>> """=20
>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] kernel repo=
rted version is: 352.55.0=20
>>>> E tensorflow/stream_executor/cuda/cuda_diagnostics.cc:296] kernel vers=
ion 352.55.0 does not match DSO version 352.93.0 -- cannot find working dev=
ices in this configuration=20
>>>> I tensorflow/core/common_runtime/gpu/gpu_init.cc:81] No GPU devices av=
ailable on machine.=20
>>>> >>>=20
>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>> As far as I understand the problem is that cuda-7.5 was built or relie=
s on nvidia 352.93 while I have NVIDIA driver 352.55 both on the host and c=
ontainer. So far I could not find cuda-7.5 built with 352.55.
>>>> cuda-7.5 has stabs directory in which there is libcuda.so. The problem=
 is probably coming from there. However, I doubt I can just replace libcuda=
.so in the stubs directory by a different version or turn it into symbolic =
link to a different version in the driver? Because its size is much smaller=
 than the size of the real libcuda.so in the driver. So I suspect, it is re=
ally only some kind of interface to the real library?
>>>>=20
>>>> Thank you,
>>>> Igor
>>>>=20
>>>>=20
>>>> On Sun, Jul 31, 2016 at 9:36 AM, Igor Yakushin <igor...@gmail.com <mai=
lto:igor...@gmail.com>> wrote:
>>>> Hi Nathan,
>>>> When installing cuda libraries and tensorflow into the singularity ima=
ge, is it important to be on the same host with the same version of CUDA/OS=
 on which you are going to run later?
>>>> I do not have root on the machine I am going to run later and prepare =
the image on a different machine with a different version of nvidia driver =
and a different flavor of Linux.
>>>> Thank you,
>>>> Igor
>>>>=20
>>>>=20
>>>> On Sun, Jul 31, 2016 at 8:39 AM, Nathan Lin <nathan...@gmail.com <mail=
to:nathan...@gmail.com>> wrote:
>>>> Hi Igor,
>>>>=20
>>>> I don't necessarily have a great answer for you. If seems like you are=
 doing everything right, yet it is still not working. In my case, yes nvidi=
a-smi as well as TensorFlow both work correctly. I feel like your error sti=
ll has to do with the version of libcuda.so you are using. Notice how Pytho=
n seems to correctly load libcuda.so, yet there is later an error that is u=
nable to find libcuda.so. My first suspicion is that there is still a versi=
on mismatch between the drivers installed on the image and on the host. If =
you are sure that is not true, it may be possible that the version of the d=
river that is installed on the machine isn't new enough for the GPU. That a=
ctually occurred on our cluster, and after a sysadmin updated the driver, i=
t worked. Barring that I am not too sure. Maybe if you provide me with the =
full details of your installation (the versions of the packages that you ha=
ve installed, the OS of your image and host), I might be able to think abou=
t something, but my suspicion is that the driver version on your host machi=
ne may not be new enough.=20
>>>>=20
>>>> Best,
>>>> Nathan=20
>>>>=20
>>>> On Jul 31, 2016, at 12:17 AM, Igor Yakushin <igor...@gmail.com <mailto=
:igor...@gmail.com>> wrote:
>>>>=20
>>>>> Hi Nathan,
>>>>>=20
>>>>> I have found exactly the same version of NVIDIA driver and extracted =
from it the libraries and nvidia executables and copied them in /usr/lib64/=
nvidia and /usr/bin and created the corresponding symbolic links. However, =
I still cannot use GPU inside singularity: nvidia-smi says "GPU access bloc=
ked by the operating system" (does it work in your case?) and when tensorfl=
ow session starts it also complains that "No GPU devices available on machi=
ne". However, notice that tensorflow seems to think that a different versio=
n of NVIDIA driver is used. Not sure where it is coming from. The machine o=
n which the image was built has version 361.42
>>>>>=20
>>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>>> Python 2.7.12 (default, Jul  1 2016, 15:12:24) =20
>>>>> [GCC 5.4.0 20160609] on linux2=20
>>>>> Type "help", "copyright", "credits" or "license" for more information=
.=20
>>>>> >>> import tensorflow=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcublas.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcudnn.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcufft.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcuda.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcurand.so locally=20
>>>>> >>> ss =3D tensorflow.Session()=20
>>>>> E tensorflow/stream_executor/cuda/cuda_driver.cc:491] failed call to =
cuInit: CUDA_ERROR_UNKNOWN=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:153] retrieving=
 CUDA diagnostic information for host: midway230=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:160] hostname: =
midway230=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:185] libcuda re=
ported version is: Not found: was unable to find libcuda.so DSO loaded into=
 this program=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:347] driver ver=
sion file contents: """NVRM version: NVIDIA UNIX x86_64 Kernel Module  352.=
55  Thu Oct  8 15:18:00 PDT 2015=20
>>>>> GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) =20
>>>>> """=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] kernel rep=
orted version is: 352.55.0=20
>>>>> I tensorflow/core/common_runtime/gpu/gpu_init.cc:81] No GPU devices a=
vailable on machine.=20
>>>>> >>> =20
>>>>> Singularity/tensorflow_0.9.img> nvidia-smi=20
>>>>> Failed to initialize NVML: GPU access blocked by the operating system
>>>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>>>>=20
>>>>> Thank you,
>>>>> Igor
>>>>>=20
>>>>>=20
>>>>> On Thu, Jul 28, 2016 at 9:34 PM, Nathan Lin <nathan...@gmail.com <mai=
lto:nathan...@gmail.com>> wrote:
>>>>> I am not sure how to find the correct driver version, but from my tes=
ting, the version must match exactly. I will admit that I have had problems=
 finding specific versions of the driver from NVIDIA's website. I had to as=
k a sysadmin for the installer that they used. In order to extract the file=
s, you need to use the --extract-only option. For instance, you will have t=
o run something like ' sh /NVIDIA-Linux-x86_64-352.63.run --extract-only'/ =
. You will then be given a directory with all the libraries that would have=
 been installed. You will need to copy the libcuda.so.###.## library (and y=
ou can copy any NVIDIA executables that you want such as nvidia-smi). Good =
luck!
>>>>>=20
>>>>> On Thu, Jul 28, 2016 at 8:51 PM, Igor <igor...@gmail.com <mailto:igor=
...@gmail.com>> wrote:
>>>>> I mean I am using this file from NVIDIA website cuda_7.5.18_linux.run=
 to install the driver, opengl, cuda. Driver installation fails, cuda succe=
eds.=20
>>>>> Also, when I run=20
>>>>> sh cuda_7.5.18_linux.run
>>>>> I am offered to install the driver version 352.39 while on the host i=
t is 346.47. I cannot upgrade the host. Any idea where I can get 346.17?
>>>>> I tried using the same link just substitute 18 for something else but=
 have not found the files:
>>>>> wget http://developer.download.nvidia.com/compute/cuda/7.5/Prod/local=
_installers/cuda_7.5.1X_linux.run <http://developer.download.nvidia.com/com=
pute/cuda/7.5/Prod/local_installers/cuda_7.5.1X_linux.run>
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> On Thursday, July 28, 2016 at 7:34:55 PM UTC-5, Igor wrote:
>>>>> Hi Nathan,
>>>>> When I try to install the driver by running NVIDIA*.run script inside=
 the image, it fails, probably because it tries to modify kernel that belon=
gs to host?
>>>>> How do I extract just libcuda.so.345.67 without installing the driver=
 (which is obviously problematic) and why would copying the library from th=
e host would not work?
>>>>> Thank you,
>>>>> Igor
>>>>>=20
>>>>> On Thursday, July 28, 2016 at 7:18:26 PM UTC-5, Nathan Lin wrote:
>>>>> Also if you are using the binary installation of TensorFlow you need =
CUDA toolkit 7.5 and cuDNN v4. These only need to be installed on our image=
. As I mentioned earlier you will need the libcuda.so.###.## library on you=
r image. It is very important that this is the same version of the NVIDIA d=
river as you have on your nose (seemingly 346.67 for you). I should've have=
 also mentioned that you want the libcuda.so.345.67 library that you get fr=
om extracting the NVIDIA installer. It will not work if you try to copy the=
 libcuda.so library that from you node.=20
>>>>>=20
>>>>> Let me know if you have any more questions.=20
>>>>>=20
>>>>> Best,
>>>>> Nathan
>>>>>=20
>>>>> On Thursday, July 28, 2016, Nathan Lin <nat...@gmail.com <>> wrote:
>>>>> Hello,
>>>>>=20
>>>>> Yes you are correct. The NVIDIA driver must be installed on your imag=
e as well. However, you honestly only need the libcuda.so.###.## library an=
d the appropriate links for that library. Once you have those installed in =
your image, it should work.=20
>>>>>=20
>>>>> Best,
>>>>> Nathan=20
>>>>>=20
>>>>> On Thursday, July 28, 2016, Igor <igor...@gmail.com <>> wrote:
>>>>> Hi All,
>>>>>=20
>>>>> I am trying to use GPU-enabled tensorflow and it cannot find GPU card=
 from inside the container.
>>>>>=20
>>>>> On the host:
>>>>> $ lspci | grep -i nvidia=20
>>>>> 20:00.0 3D controller: NVIDIA Corporation GK110BGL [Tesla K40m] (rev =
a1)=20
>>>>> 8b:00.0 3D controller: NVIDIA Corporation GK110BGL [Tesla K40m] (rev =
a1)
>>>>>=20
>>>>> $ nvidia-smi=20
>>>>> Thu Jul 28 19:01:42 2016       =20
>>>>> +------------------------------------------------------+             =
          =20
>>>>> | NVIDIA-SMI 346.47     Driver Version: 346.47         |             =
          =20
>>>>> |-------------------------------+----------------------+-------------=
---------+=20
>>>>> | GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Unc=
orr. ECC |=20
>>>>> | Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Co=
mpute M. |=20
>>>>> |=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D|=20
>>>>> |   0  Tesla K40m          Off  | 0000:20:00.0     Off |             =
       0 |=20
>>>>> | N/A   30C    P8    20W / 235W |     66MiB / 11519MiB |      0%     =
 Default |=20
>>>>> +-------------------------------+----------------------+-------------=
---------+=20
>>>>> |   1  Tesla K40m          Off  | 0000:8B:00.0     Off |             =
       0 |=20
>>>>> | N/A   26C    P8    19W / 235W |     60MiB / 11519MiB |      0%     =
 Default |=20
>>>>> +-------------------------------+----------------------+-------------=
---------+=20
>>>>>                                                                      =
         =20
>>>>> +--------------------------------------------------------------------=
---------+=20
>>>>> | Processes:                                                       GP=
U Memory |=20
>>>>> |  GPU       PID  Type  Process name                               Us=
age      |=20
>>>>> |=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D|=20
>>>>> |    0     11671    G   /usr/bin/X                                   =
    9MiB |=20
>>>>> |    1     11671    G   /usr/bin/X                                   =
    3MiB |
>>>>>=20
>>>>>=20
>>>>> Inside singularity:
>>>>> $ singularity shell /software/src/singularity_images/tensorflow_0.9.i=
mg
>>>>>=20
>>>>> Singularity/tensorflow_0.9.img> lspci | grep -i nvidia=20
>>>>> bash: lspci: command not found=20
>>>>> Singularity/tensorflow_0.9.img> nvidia-smi=20
>>>>> bash: nvidia-smi: command not found=20
>>>>> Singularity/tensorflow_0.9.img> python=20
>>>>> Python 2.7.12 (default, Jul  1 2016, 15:12:24) =20
>>>>> [GCC 5.4.0 20160609] on linux2=20
>>>>> Type "help", "copyright", "credits" or "license" for more information=
.=20
>>>>> >>> import tensorflow as tf=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcublas.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcudnn.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcufft.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcuda.so locally=20
>>>>> I tensorflow/stream_executor/dso_loader.cc:108] successfully opened C=
UDA library libcurand.so locally=20
>>>>> >>> sess =3D tf.Session()=20
>>>>> E tensorflow/stream_executor/cuda/cuda_driver.cc:491] failed call to =
cuInit: CUDA_ERROR_UNKNOWN=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:153] retrieving=
 CUDA diagnostic information for host: midway-l34-01=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:160] hostname: =
midway-l34-01=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:185] libcuda re=
ported version is: Not found: was unable to find libcuda.so DSO loaded into=
 this program=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:347] driver ver=
sion file contents: """NVRM version: NVIDIA UNIX x86_64 Kernel Module  346.=
47  Thu Feb 19 18:56:03 PST 2015=20
>>>>> GCC version:  gcc version 4.4.7 20120313 (Red Hat 4.4.7-11) (GCC) =20
>>>>> """=20
>>>>> I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:189] kernel rep=
orted version is: 346.47.0=20
>>>>> I tensorflow/core/common_runtime/gpu/gpu_init.cc:81] No GPU devices a=
vailable on machine.
>>>>>=20
>>>>> Must there be nvidia driver installed inside the container? Outside? =
The container shares the same kernel with the host and nvidia kernel module=
 needs to be loaded... How this is handled? Any requirements on nvidia driv=
er and cuda versions inside and outside of the container?
>>>>>=20
>>>>> Thank you,
>>>>> Igor
>>>>>=20
>>>>>=20
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <>.
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>>=20
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>>=20
>>>>>=20
>>>>> --=20
>>>>> You received this message because you are subscribed to the Google Gr=
oups "singularity" group.
>>>>> To unsubscribe from this group and stop receiving emails from it, sen=
d an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>=20
>>>>=20
>>>> --=20
>>>> You received this message because you are subscribed to the Google Gro=
ups "singularity" group.
>>>> To unsubscribe from this group and stop receiving emails from it, send=
 an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>>=20
>>>>=20
>>>>=20
>>>> --=20
>>>> You received this message because you are subscribed to the Google Gro=
ups "singularity" group.
>>>> To unsubscribe from this group and stop receiving emails from it, send=
 an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>=20
>>>=20
>>> --=20
>>> You received this message because you are subscribed to the Google Grou=
ps "singularity" group.
>>> To unsubscribe from this group and stop receiving emails from it, send =
an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>>=20
>>>=20
>>> --=20
>>> You received this message because you are subscribed to the Google Grou=
ps "singularity" group.
>>> To unsubscribe from this group and stop receiving emails from it, send =
an email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>=20
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>>=20
>>=20
>> --=20
>> You received this message because you are subscribed to the Google Group=
s "singularity" group.
>> To unsubscribe from this group and stop receiving emails from it, send a=
n email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
> <build.sh><links.sh><nvidia.sh><sl7.def>


--Apple-Mail=_2971EE55-98A1-4350-AD6B-9C4DE084EB78
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html charset=
=3Dutf-8"></head><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: s=
pace; -webkit-line-break: after-white-space;" class=3D""><div class=3D"">Hi=
 Igor,</div><div class=3D""><br class=3D""></div><div class=3D"">Thank you =
so much for taking the time to do this! We=E2=80=99ll test things on Comet =
right away and help with any feedback we have.</div><div class=3D""><br cla=
ss=3D""></div><div class=3D"">Regarding the drivers, we=E2=80=99ll need to =
talk with some of our team with in-depth GPU experience and get back to you=
.</div><div class=3D""><br class=3D""></div><div class=3D"">=E2=80=94Rick</=
div><br class=3D""><div><blockquote type=3D"cite" class=3D""><div class=3D"=
">On Aug 4, 2016, at 7:34 AM, Igor Yakushin &lt;<a href=3D"mailto:igor...@g=
mail.com" class=3D"">igor...@gmail.com</a>&gt; wrote:</div><br class=3D"App=
le-interchange-newline"><div class=3D""><div dir=3D"ltr" class=3D"">Hi Rick=
,<div class=3D""><br class=3D""><div class=3D"">The scripts are attached. T=
he driver script that calls others is build.sh. I found it the easiest to w=
ork with Scientific Linux 7, I had some issues with Ubuntu and CentOS conta=
iners. Several Nvidia drivers and cuda must be put in the same directory as=
 the scripts for them to work.</div><div class=3D"">Once the image is build=
, you can choose which driver to use by executing:</div><div class=3D"">sou=
rce /usr/local/nvidia.sh &lt;driver version&gt;</div><div class=3D"">inside=
 the container. See /usr/local/NVIDIA* which drivers are provided but you c=
an easily extend the script to any drivers.</div><div class=3D"">The contai=
ner is built under singularity 2.1.</div><div class=3D"">I'll publish the i=
mage somewhere later today.</div><div class=3D"">The image contains a lot o=
f other things not needed for TensorFlow.</div><div class=3D"">I tested it =
on my laptop (<span style=3D"font-family: monospace;" class=3D"">GeForce GT=
X 960M,&nbsp;</span><font face=3D"monospace" class=3D"">361.42</font><span =
style=3D"font-family: monospace;" class=3D"">)&nbsp;</span>and on a few nod=
es on the cluster (Tesla K40m, K80 driver versions 352.55, 346.47). At firs=
t glance TensorFlow works but I do not know it well enough to try all the f=
eatures.</div><div class=3D"">One thing that is still not clear to me: how =
does Nvidia distinguish drivers for different hardware? My guess is by vers=
ion number since otherwise the names are the same for consumer cards and Te=
sla but when you try to download a driver from Nvidia some drivers support =
only Tesla and some only consumer cards.</div><div class=3D""><br class=3D"=
"></div><div class=3D"">Igor</div></div></div><div class=3D"gmail_extra"><b=
r class=3D""><div class=3D"gmail_quote">On Mon, Aug 1, 2016 at 9:21 PM, Igo=
r Yakushin <span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:igor...@gmail=
.com" target=3D"_blank" class=3D"">igor...@gmail.com</a>&gt;</span> wrote:<=
br class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;=
border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr" class=3D"">Hi=
 Rick,<div class=3D"">0) Don't use *.deb either for NVIDIA or cuda, use *.r=
un.</div><div class=3D"">1) Get the same version of NVIDIA as on the host a=
nd extract it (there is an option for that) into a single directory in /usr=
/local without installing. Also pay attention to get NVIDIA*.run for your h=
ardware. Apparently Tesla cards require different driver &nbsp;than consume=
r cards.</div><div class=3D"">2) Set both PATH and LD_LIBRARY_PATH to the s=
ame directory where NVIDIA is unpacked. After that nvidia-smi should work o=
n the singularity shell.</div><div class=3D"">3) Get latest cuda 7.5 &nbsp;=
*.run file and install only cuda and not the driver (there is an option for=
 that; by default it would install driver as well which would most likely b=
e a different version than what you need and would conflict the version ext=
racted from NVIDIA file)</div><div class=3D"">4) cuda by default will also =
be installed into /usr/local; set LD_LIBRARY_PATH to point there</div><div =
class=3D"">5) install the latest gpu enabled tensorflow with pip getting it=
 from their website</div><div class=3D"">I'll try to put all this into *def=
 file</div><div class=3D"">There might be some important prerequisite *deb =
files that I installed to make all this work and forgot about them, so I wo=
uld need to try to reproduce it from scratch to rediscover them.</div><div =
class=3D"">Thank you,</div><div class=3D"">Igor</div><div class=3D""><br cl=
ass=3D""></div></div><div class=3D"HOEnZb"><div class=3D"h5"><div class=3D"=
gmail_extra"><br class=3D""><div class=3D"gmail_quote">On Mon, Aug 1, 2016 =
at 12:43 AM, Rick Wagner <span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto=
:richard...@gmail.com" target=3D"_blank" class=3D"">richard...@gmail.com</a=
>&gt;</span> wrote:<br class=3D""><blockquote class=3D"gmail_quote" style=
=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=
=3D"auto" class=3D""><div class=3D""></div><div class=3D"">Igor,</div><div =
class=3D""><br class=3D""></div><div class=3D"">If you had a chance to post=
 your definition file or the steps you took, I know several of us would app=
reciate it. Getting TensorFlow running on CentOS was a huge effort for our =
support staff. And that's just one of many GPU-enabled applications.</div><=
span class=3D""><font color=3D"#888888" class=3D""><div class=3D""><br clas=
s=3D""></div><div class=3D"">--Rick</div></font></span><div class=3D""><div=
 class=3D""><div class=3D""><br class=3D"">On Jul 31, 2016, at 10:20 PM, Ig=
or Yakushin &lt;<a href=3D"mailto:igor...@gmail.com" target=3D"_blank" clas=
s=3D"">igor...@gmail.com</a>&gt; wrote:<br class=3D""><br class=3D""></div>=
<blockquote type=3D"cite" class=3D""><div class=3D""><div dir=3D"ltr" class=
=3D"">Thank you, Nathan. It finally works!</div><div class=3D"gmail_extra">=
<br class=3D""><div class=3D"gmail_quote">On Sun, Jul 31, 2016 at 5:17 PM, =
Nathan Lin <span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:nathan...@gma=
il.com" target=3D"_blank" class=3D"">nathan...@gmail.com</a>&gt;</span> wro=
te:<br class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .=
8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"auto" class=3D=
""><div class=3D""></div><div class=3D"">Yes I do</div><div class=3D""><div=
 class=3D""><div class=3D""><br class=3D"">On Jul 31, 2016, at 5:03 PM, Igo=
r Yakushin &lt;<a href=3D"mailto:igor...@gmail.com" target=3D"_blank" class=
=3D"">igor...@gmail.com</a>&gt; wrote:<br class=3D""><br class=3D""></div><=
blockquote type=3D"cite" class=3D""><div class=3D""><div dir=3D"ltr" class=
=3D"">Nathan,<div class=3D"">When you import tensorflow in python, does it =
tell you what cuda libraries it is loading or not?</div><div class=3D"">Do =
you see these messages:</div><div class=3D"">=3D=3D=3D=3D=3D=3D</div><div c=
lass=3D""><div class=3D"">&gt;&gt;&gt; import tensorflow as tf&nbsp;</div><=
div class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcublas.so locally&nbsp;</div><div c=
lass=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:108] s=
uccessfully opened CUDA library libcudnn.so locally&nbsp;</div><div class=
=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:108] succe=
ssfully opened CUDA library libcufft.so locally&nbsp;</div><div class=3D"">=
I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:108] successfull=
y opened CUDA library libcuda.so locally&nbsp;</div><div class=3D"">I tenso=
rflow/stream_executor/<wbr class=3D"">dso_loader.cc:108] successfully opene=
d CUDA library libcurand.so locally&nbsp;</div></div><div class=3D"">=3D=3D=
=3D=3D=3D=3D</div><div class=3D"">Thank you,</div><div class=3D"">Igor</div=
></div><div class=3D"gmail_extra"><br class=3D""><div class=3D"gmail_quote"=
>On Sun, Jul 31, 2016 at 1:26 PM, Nathan Lin <span dir=3D"ltr" class=3D"">&=
lt;<a href=3D"mailto:nathan...@gmail.com" target=3D"_blank" class=3D"">nath=
an...@gmail.com</a>&gt;</span> wrote:<br class=3D""><blockquote class=3D"gm=
ail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-le=
ft:1ex"><div dir=3D"auto" class=3D""><div class=3D""></div><div class=3D"">=
Hi Igor,</div><div class=3D""><br class=3D""></div><div class=3D"">In regar=
ds to your first questions, the OS/drivers of your building computer should=
 not matter. I built an Ubuntu 14.04 image on my RHEL 7 box for our RHEL 6 =
cluster. I'm not sure that the toolkit is that version specific, my image s=
eems to work fine and it's running 353.63. There is one thing that I do tha=
t may be helpful. I read it somewhere online and am not actually sure if it=
 does anything, but I've included it in my image definitions just in case. =
Apparently there is something about initializing the CUDA Toolkit. As part =
of my definition file I run 'make' on the CUDA sample 'deviceQuery'. Maybe =
that will help?</div><div class=3D""><br class=3D""></div><div class=3D"">B=
est,</div><div class=3D"">Nathan</div><div class=3D""><div class=3D""><div =
class=3D""><br class=3D"">On Jul 31, 2016, at 1:51 PM, Igor Yakushin &lt;<a=
 href=3D"mailto:igor...@gmail.com" target=3D"_blank" class=3D"">igor...@gma=
il.com</a>&gt; wrote:<br class=3D""><br class=3D""></div><blockquote type=
=3D"cite" class=3D""><div class=3D""><div dir=3D"ltr" class=3D"">Hi Nathan,=
<div class=3D"">I got a little bit further: nvidia-smi is working now but t=
ensorflow still complains:</div><div class=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=
</div><div class=3D""><br class=3D""></div><div class=3D"">=3D=3D=3D=3D=3D=
=3D=3D=3D=3D</div><div class=3D""><span style=3D"font-family:monospace" cla=
ss=3D""><span style=3D"" class=3D"">Singularity/ubuntu_14.04.img&gt; nvidia=
-smi
</span><br class=3D"">Sun Jul 31 17:33:44 2016 &nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;<br class=3D"">+-----------------------------<wbr class=3D"">=
-------------------------+ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;<br class=3D"">| NVIDIA-SMI 352.55 &nbsp;&nbsp;&nbsp;&nbsp;D=
river Version: 352.55 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br class=3D"">=
|-----------------------------<wbr class=3D"">--+----------------------+---=
-<wbr class=3D"">------------------+
<br class=3D"">| GPU &nbsp;Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P=
ersistence-M| Bus-Id &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disp.A | Vol=
atile Uncorr. ECC |
<br class=3D"">| Fan &nbsp;Temp &nbsp;Perf &nbsp;Pwr:Usage/Cap| &nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory-Usage | GPU-Util &nbsp;Compute =
M. |
<br class=3D"">|=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=3D"">=3D=3D+=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D<wbr class=3D"">=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D|
<br class=3D"">| &nbsp;&nbsp;0 &nbsp;Tesla K40m &nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;Off &nbsp;| 0000:20:00.0 &nbsp;&nbsp;&nbsp;&nbsp=
;Off | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 |
<br class=3D"">| N/A &nbsp;&nbsp;45C &nbsp;&nbsp;&nbsp;P0 &nbsp;&nbsp;&nbsp=
;79W / 235W | &nbsp;&nbsp;&nbsp;158MiB / 11519MiB | &nbsp;&nbsp;&nbsp;&nbsp=
;45% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default |
<br class=3D"">+-----------------------------<wbr class=3D"">--+-----------=
-----------+----<wbr class=3D"">------------------+
<br class=3D"">| &nbsp;&nbsp;1 &nbsp;Tesla K40m &nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;Off &nbsp;| 0000:8B:00.0 &nbsp;&nbsp;&nbsp;&nbsp=
;Off | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 |
<br class=3D"">| N/A &nbsp;&nbsp;23C &nbsp;&nbsp;&nbsp;P8 &nbsp;&nbsp;&nbsp=
;18W / 235W | &nbsp;&nbsp;&nbsp;&nbsp;61MiB / 11519MiB | &nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;0% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default |
<br class=3D"">+-----------------------------<wbr class=3D"">--+-----------=
-----------+----<wbr class=3D"">------------------+
<br class=3D""> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;<wbr class=3D"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br=
 class=3D"">+-----------------------------<wbr class=3D"">-----------------=
-------------<wbr class=3D"">------------------+
<br class=3D"">| Processes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GPU Mem=
ory |
<br class=3D"">| &nbsp;GPU &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PID &nbsp;Ty=
pe &nbsp;Process name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">Usage &=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
<br class=3D"">|=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=
=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D|
<br class=3D"">+-----------------------------<wbr class=3D"">--------------=
----------------<wbr class=3D"">------------------+
<br class=3D"">Singularity/ubuntu_14.04.img&gt; python
<br class=3D"">Python 2.7.6 (default, Mar 22 2014, 22:59:56) &nbsp;<br clas=
s=3D"">[GCC 4.8.2] on linux2
<br class=3D"">Type "help", "copyright", "credits" or "license" for more in=
formation.
<br class=3D"">&gt;&gt;&gt; import tensorflow
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcublas.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcudnn.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcufft.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcuda.so.1 locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcurand.so locally
<br class=3D"">&gt;&gt;&gt; ss =3D tensorflow.Session()
<br class=3D"">E tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_drive=
r.cc:491] failed call to cuInit: CUDA_ERROR_NO_DEVICE
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:153] retrieving CUDA diagnostic information for host: midway-l34-=
02
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:160] hostname: midway-l34-02
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:185] libcuda reported version is: 352.93.0
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:356] driver version file contents: """NVRM version: NVIDIA UNIX x=
86_64 Kernel Module &nbsp;352.55 &nbsp;Thu Oct &nbsp;8 15:18:00 PDT 2015
<br class=3D"">GCC version: &nbsp;gcc version 4.4.7 20120313 (Red Hat 4.4.7=
-16) (GCC) &nbsp;<br class=3D"">"""
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:189] kernel reported version is: 352.55.0
<br class=3D"">E tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:296] kernel version 352.55.0 does not match DSO version 352.93.0 =
-- cannot find working devices in this configuration
<br class=3D"">I tensorflow/core/common_<wbr class=3D"">runtime/gpu/gpu_ini=
t.cc:81] No GPU devices available on machine.
<br class=3D"">&gt;&gt;&gt; <br class=3D"">
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</span></div><div class=
=3D""><span style=3D"font-family:monospace" class=3D"">As far as I understa=
nd the problem is that cuda-7.5 was built or relies on nvidia 352.93 while =
I have NVIDIA driver 352.55 both on the host and container. So far I could =
not find cuda-7.5 built with 352.55.</span></div><div class=3D""><span styl=
e=3D"font-family:monospace" class=3D"">cuda-7.5 has stabs directory in whic=
h there is libcuda.so. The problem is probably coming from there. However, =
I doubt I can just replace libcuda.so in the stubs directory by a different=
 version or turn it into symbolic link to a different version in the driver=
? Because its size is much smaller than the size of the real libcuda.so in =
the driver. So I suspect, it is really only some kind of interface to the r=
eal library?</span></div><div class=3D""><span style=3D"font-family:monospa=
ce" class=3D""><br class=3D""></span></div><div class=3D""><span style=3D"f=
ont-family:monospace" class=3D"">Thank you,</span></div><div class=3D""><sp=
an style=3D"font-family:monospace" class=3D"">Igor</span></div><div class=
=3D""><span style=3D"font-family:monospace" class=3D""><br class=3D""></spa=
n></div></div><div class=3D"gmail_extra"><br class=3D""><div class=3D"gmail=
_quote">On Sun, Jul 31, 2016 at 9:36 AM, Igor Yakushin <span dir=3D"ltr" cl=
ass=3D"">&lt;<a href=3D"mailto:igor...@gmail.com" target=3D"_blank" class=
=3D"">igor...@gmail.com</a>&gt;</span> wrote:<br class=3D""><blockquote cla=
ss=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;pa=
dding-left:1ex"><div dir=3D"ltr" class=3D"">Hi Nathan,<div class=3D"">When =
installing cuda libraries and tensorflow into the singularity image, is it =
important to be on the same host with the same version of CUDA/OS on which =
you are going to run later?</div><div class=3D"">I do not have root on the =
machine I am going to run later and prepare the image on a different machin=
e with a different version of nvidia driver and a different flavor of Linux=
.</div><div class=3D"">Thank you,</div><div class=3D"">Igor</div><div class=
=3D""><br class=3D""></div></div><div class=3D""><div class=3D""><div class=
=3D"gmail_extra"><br class=3D""><div class=3D"gmail_quote">On Sun, Jul 31, =
2016 at 8:39 AM, Nathan Lin <span dir=3D"ltr" class=3D"">&lt;<a href=3D"mai=
lto:nathan...@gmail.com" target=3D"_blank" class=3D"">nathan...@gmail.com</=
a>&gt;</span> wrote:<br class=3D""><blockquote class=3D"gmail_quote" style=
=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=
=3D"auto" class=3D""><div class=3D""></div><div class=3D"">Hi Igor,</div><d=
iv class=3D""><br class=3D""></div><div class=3D"">I don't necessarily have=
 a great answer for you. If seems like you are doing everything right, yet =
it is still not working. In my case, yes nvidia-smi as well as TensorFlow b=
oth work correctly. I feel like your error still has to do with the version=
 of libcuda.so you are using. Notice how Python seems to correctly load lib=
cuda.so, yet there is later an error that is unable to find libcuda.so. My =
first suspicion is that there is still a version mismatch between the drive=
rs installed on the image and on the host. If you are sure that is not true=
, it may be possible that the version of the driver that is installed on th=
e machine isn't new enough for the GPU. That actually occurred on our clust=
er, and after a sysadmin updated the driver, it worked. Barring that I am n=
ot too sure. Maybe if you provide me with the full details of your installa=
tion (the versions of the packages that you have installed, the OS of your =
image and host), I might be able to think about something, but my suspicion=
 is that the driver version on your host machine may not be new enough.&nbs=
p;</div><div class=3D""><br class=3D""></div><div class=3D"">Best,</div><di=
v class=3D"">Nathan&nbsp;</div><div class=3D""><div class=3D""><div class=
=3D""><br class=3D"">On Jul 31, 2016, at 12:17 AM, Igor Yakushin &lt;<a hre=
f=3D"mailto:igor...@gmail.com" target=3D"_blank" class=3D"">igor...@gmail.c=
om</a>&gt; wrote:<br class=3D""><br class=3D""></div><blockquote type=3D"ci=
te" class=3D""><div class=3D""><div dir=3D"ltr" class=3D""><div class=3D"">=
<span style=3D"font-family:monospace" class=3D"">Hi Nathan,</span></div><di=
v class=3D""><span style=3D"font-family:monospace" class=3D""><br class=3D"=
"></span></div><div class=3D""><span style=3D"font-family:monospace" class=
=3D"">I have found exactly the same version of NVIDIA driver and extracted =
from it the libraries and nvidia executables and copied them in /usr/lib64/=
nvidia and /usr/bin and created the corresponding symbolic links. However, =
I still cannot use GPU inside singularity: nvidia-smi says "GPU access bloc=
ked by the operating system" (does it work in your case?) and when tensorfl=
ow session starts it also complains that "No GPU devices available on machi=
ne". However, notice that tensorflow seems to think that a different versio=
n of NVIDIA driver is used. Not sure where it is coming from. The machine o=
n which the image was built has version&nbsp;</span><span style=3D"font-fam=
ily: monospace;" class=3D"">361.42</span></div><span style=3D"font-family:m=
onospace" class=3D""><span style=3D"" class=3D""><div class=3D""><span styl=
e=3D"font-family:monospace" class=3D""><span style=3D"" class=3D""><br clas=
s=3D""></span></span></div><div class=3D""><span style=3D"font-family:monos=
pace" class=3D""><span style=3D"" class=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D</span></span></div>Python 2.7.12 (default, Jul &nbsp;1 2016, 15:12:2=
4) &nbsp;</span><br class=3D"">[GCC 5.4.0 20160609] on linux2
<br class=3D"">Type "help", "copyright", "credits" or "license" for more in=
formation.
<br class=3D"">&gt;&gt;&gt; import tensorflow
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcublas.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcudnn.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcufft.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcuda.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcurand.so locally
<br class=3D"">&gt;&gt;&gt; ss =3D tensorflow.Session()
<br class=3D"">E tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_drive=
r.cc:491] failed call to cuInit: CUDA_ERROR_UNKNOWN
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:153] retrieving CUDA diagnostic information for host: midway230
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:160] hostname: midway230
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:185] libcuda reported version is: Not found: was unable to find l=
ibcuda.so DSO loaded into this program
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:347] driver version file contents: """NVRM version: NVIDIA UNIX x=
86_64 Kernel Module &nbsp;352.55 &nbsp;Thu Oct &nbsp;8 15:18:00 PDT 2015
<br class=3D"">GCC version: &nbsp;gcc version 4.4.7 20120313 (Red Hat 4.4.7=
-16) (GCC) &nbsp;<br class=3D"">"""
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:189] kernel reported version is: 352.55.0
<br class=3D"">I tensorflow/core/common_<wbr class=3D"">runtime/gpu/gpu_ini=
t.cc:81] No GPU devices available on machine.
<br class=3D"">&gt;&gt;&gt; &nbsp;<br class=3D"">Singularity/tensorflow_0.9=
.<wbr class=3D"">img&gt; nvidia-smi
<br class=3D"">Failed to initialize NVML: GPU access blocked by the operati=
ng system<br class=3D"">
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D</span><div class=3D""><span style=3D"font=
-family:monospace" class=3D""><br class=3D""></span></div><div class=3D""><=
span style=3D"font-family:monospace" class=3D"">Thank you,</span></div><div=
 class=3D""><span style=3D"font-family:monospace" class=3D"">Igor</span></d=
iv><div class=3D""><span style=3D"font-family:monospace" class=3D""><br cla=
ss=3D""></span></div></div><div class=3D"gmail_extra"><br class=3D""><div c=
lass=3D"gmail_quote">On Thu, Jul 28, 2016 at 9:34 PM, Nathan Lin <span dir=
=3D"ltr" class=3D"">&lt;<a href=3D"mailto:nathan...@gmail.com" target=3D"_b=
lank" class=3D"">nathan...@gmail.com</a>&gt;</span> wrote:<br class=3D""><b=
lockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px =
#ccc solid;padding-left:1ex"><div dir=3D"ltr" class=3D"">I am no<font face=
=3D"arial, helvetica, sans-serif" class=3D"">t sure how to find the correct=
 driver version, but from my testing, the version must match exactly. I wil=
l admit that I have had problems finding specific versions of the driver fr=
om NVIDIA's website. I had to ask a sysadmin for the installer that they us=
ed. In order to extract the files, you need to use the --extract-only optio=
n. For instance, you will have to run something like '

















sh /NVIDIA-Linux-x86_64-352.63.<wbr class=3D"">run
--extract-only'/ . You will then be given a directory with all the librarie=
s that would have been installed. You will need to copy the libcuda.so.###.=
## library (and you can copy any NVIDIA executables that you want such as n=
vidia-smi). Good luck!</font></div><div class=3D""><div class=3D""><div cla=
ss=3D"gmail_extra"><br class=3D""><div class=3D"gmail_quote">On Thu, Jul 28=
, 2016 at 8:51 PM, Igor <span dir=3D"ltr" class=3D"">&lt;<a href=3D"mailto:=
igor...@gmail.com" target=3D"_blank" class=3D"">igor...@gmail.com</a>&gt;</=
span> wrote:<br class=3D""><blockquote class=3D"gmail_quote" style=3D"margi=
n:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr" =
class=3D""><span style=3D"font-family:monospace" class=3D"">I mean I am usi=
ng this file from NVIDIA website cuda_7.5.18_linux.run to install the drive=
r, opengl, cuda. Driver installation fails, cuda succeeds.&nbsp;</span><div=
 class=3D""><span style=3D"font-family:monospace" class=3D"">Also, when I r=
un&nbsp;</span></div><div class=3D""><span style=3D"font-family:monospace" =
class=3D"">sh&nbsp;</span><font face=3D"monospace" class=3D"">cuda_7.5.18_l=
inux.run</font></div><div class=3D""><span style=3D"font-family:monospace" =
class=3D"">I am offered to install the driver version&nbsp;</span><span sty=
le=3D"font-family:monospace" class=3D"">352.39 while on the host it is&nbsp=
;</span><span style=3D"font-family:monospace" class=3D"">346.47. I cannot u=
pgrade the host. Any idea where I can get 346.17?</span></div><div class=3D=
""><span style=3D"font-family:monospace" class=3D"">I tried using the same =
link just substitute 18 for something else but have not found the files:</s=
pan></div><div class=3D""><span style=3D"font-family:monospace" class=3D"">=
<span style=3D"" class=3D"">wget <a href=3D"http://developer.download.nvidi=
a.com/compute/cuda/7.5/Prod/local_installers/cuda_7.5.1X_linux.run" target=
=3D"_blank" class=3D"">http://developer.download.<wbr class=3D"">nvidia.com=
/compute/cuda/7.5/<wbr class=3D"">Prod/local_installers/cuda_7.<wbr class=
=3D"">5.1X_linux.run</a></span><br class=3D""></span><br class=3D""></div><=
div class=3D""><div class=3D""><div class=3D""><br class=3D""></div><div cl=
ass=3D""><br class=3D""></div><div class=3D"">On Thursday, July 28, 2016 at=
 7:34:55 PM UTC-5, Igor wrote:<blockquote class=3D"gmail_quote" style=3D"ma=
rgin:0;margin-left:0.8ex;border-left:1px #ccc solid;padding-left:1ex"><div =
dir=3D"ltr" class=3D"">Hi Nathan,<div class=3D"">When I try to install the =
driver by running NVIDIA*.run script inside the image, it fails, probably b=
ecause it tries to modify kernel that belongs to host?</div><div class=3D""=
>How do I extract just libcuda.so.345.67 without installing the driver (whi=
ch is obviously problematic) and why would copying the library from the hos=
t would not work?</div><div class=3D"">Thank you,</div><div class=3D"">Igor=
<br class=3D""><br class=3D"">On Thursday, July 28, 2016 at 7:18:26 PM UTC-=
5, Nathan Lin wrote:<blockquote class=3D"gmail_quote" style=3D"margin:0;mar=
gin-left:0.8ex;border-left:1px #ccc solid;padding-left:1ex">Also if you are=
 using the binary installation of TensorFlow you need CUDA toolkit 7.5 and =
cuDNN v4. These only need to be installed on our image. As I mentioned earl=
ier you will need the libcuda.so.###.## library on your image. It is very i=
mportant that this is the same version of the NVIDIA driver as you have on =
your nose (seemingly 346.67 for you). I should've have also mentioned that =
you want the libcuda.so.345.67 library that you get from extracting the NVI=
DIA installer. It will not work if you try to copy&nbsp;the libcuda.so libr=
ary that from you node.&nbsp;<div class=3D""><br class=3D""></div><div clas=
s=3D"">Let me know if you have any more questions.&nbsp;</div><div class=3D=
""><br class=3D""></div><div class=3D"">Best,</div><div class=3D"">Nathan<s=
pan class=3D""></span><br class=3D""><br class=3D"">On Thursday, July 28, 2=
016, Nathan Lin &lt;<a rel=3D"nofollow" class=3D"">nat...@gmail.com</a>&gt;=
 wrote:<br class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0=
 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hello,<div class=3D"">=
<br class=3D""></div><div class=3D"">Yes you are correct. The NVIDIA driver=
 must be installed on your image as well. However, you honestly only need t=
he libcuda.so.###.## library and the appropriate links for that library. On=
ce you have those installed in your image, it should work.&nbsp;</div><div =
class=3D""><br class=3D""></div><div class=3D"">Best,</div><div class=3D"">=
Nathan&nbsp;<span class=3D""></span><br class=3D""><br class=3D"">On Thursd=
ay, July 28, 2016, Igor &lt;<a class=3D"">igor...@gmail.com</a>&gt; wrote:<=
br class=3D""><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;=
border-left:1px #ccc solid;padding-left:1ex"><div dir=3D"ltr" class=3D"">Hi=
 All,<div class=3D""><br class=3D""><div class=3D"">I am trying to use GPU-=
enabled tensorflow and it cannot find GPU card from inside the container.</=
div><div class=3D""><br class=3D""></div><div class=3D"">On the host:</div>=
<div class=3D""><span style=3D"font-family:monospace" class=3D""><span styl=
e=3D"" class=3D"">$ lspci | grep -i nvidia
</span><br class=3D"">20:00.0 3D controller: NVIDIA Corporation GK110BGL [T=
esla K40m] (rev a1)
<br class=3D"">8b:00.0 3D controller: NVIDIA Corporation GK110BGL [Tesla K4=
0m] (rev a1)<br class=3D"">
<br class=3D""></span></div><div class=3D""><span style=3D"font-family:mono=
space" class=3D""><span style=3D"" class=3D"">$ nvidia-smi
</span><br class=3D"">Thu Jul 28 19:01:42 2016 &nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;<br class=3D"">+-----------------------------<wbr class=3D"">=
-------------------------+ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;<br class=3D"">| NVIDIA-SMI 346.47 &nbsp;&nbsp;&nbsp;&nbsp;D=
river Version: 346.47 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br class=3D"">=
|-----------------------------<wbr class=3D"">--+----------------------+---=
-<wbr class=3D"">------------------+
<br class=3D"">| GPU &nbsp;Name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P=
ersistence-M| Bus-Id &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Disp.A | Vol=
atile Uncorr. ECC |
<br class=3D"">| Fan &nbsp;Temp &nbsp;Perf &nbsp;Pwr:Usage/Cap| &nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memory-Usage | GPU-Util &nbsp;Compute =
M. |
<br class=3D"">|=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=3D"">=3D=3D+=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D+=3D=3D=3D=3D<wbr class=3D"">=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D|
<br class=3D"">| &nbsp;&nbsp;0 &nbsp;Tesla K40m &nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;Off &nbsp;| 0000:20:00.0 &nbsp;&nbsp;&nbsp;&nbsp=
;Off | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 |
<br class=3D"">| N/A &nbsp;&nbsp;30C &nbsp;&nbsp;&nbsp;P8 &nbsp;&nbsp;&nbsp=
;20W / 235W | &nbsp;&nbsp;&nbsp;&nbsp;66MiB / 11519MiB | &nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;0% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default |
<br class=3D"">+-----------------------------<wbr class=3D"">--+-----------=
-----------+----<wbr class=3D"">------------------+
<br class=3D"">| &nbsp;&nbsp;1 &nbsp;Tesla K40m &nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;Off &nbsp;| 0000:8B:00.0 &nbsp;&nbsp;&nbsp;&nbsp=
;Off | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 |
<br class=3D"">| N/A &nbsp;&nbsp;26C &nbsp;&nbsp;&nbsp;P8 &nbsp;&nbsp;&nbsp=
;19W / 235W | &nbsp;&nbsp;&nbsp;&nbsp;60MiB / 11519MiB | &nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;0% &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default |
<br class=3D"">+-----------------------------<wbr class=3D"">--+-----------=
-----------+----<wbr class=3D"">------------------+
<br class=3D""> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;<wbr class=3D"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br=
 class=3D"">+-----------------------------<wbr class=3D"">-----------------=
-------------<wbr class=3D"">------------------+
<br class=3D"">| Processes: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GPU Mem=
ory |
<br class=3D"">| &nbsp;GPU &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PID &nbsp;Ty=
pe &nbsp;Process name &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=3D"">Usage &=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
<br class=3D"">|=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr class=
=3D"">=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D|
<br class=3D"">| &nbsp;&nbsp;&nbsp;0 &nbsp;&nbsp;&nbsp;&nbsp;11671 &nbsp;&n=
bsp;&nbsp;G &nbsp;&nbsp;/usr/bin/X &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=
=3D"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9MiB |
<br class=3D"">| &nbsp;&nbsp;&nbsp;1 &nbsp;&nbsp;&nbsp;&nbsp;11671 &nbsp;&n=
bsp;&nbsp;G &nbsp;&nbsp;/usr/bin/X &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr class=
=3D"">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3MiB |<br class=3D"">
<br class=3D""></span></div></div><div class=3D""><font face=3D"monospace" =
class=3D""><br class=3D""></font></div><div class=3D""><font face=3D"monosp=
ace" class=3D"">Inside singularity:</font></div><div class=3D""><span style=
=3D"font-family:monospace" class=3D""><span style=3D"" class=3D"">$ singula=
rity shell /software/src/singularity_<wbr class=3D"">images/tensorflow_0.9.=
img</span><br class=3D""></span></div><div class=3D""><span style=3D"font-f=
amily:monospace" class=3D""><br class=3D""></span></div><div class=3D""><sp=
an style=3D"font-family:monospace" class=3D""><span style=3D"" class=3D"">S=
ingularity/tensorflow_0.9.<wbr class=3D"">img&gt; lspci | grep -i nvidia
</span><br class=3D"">bash: lspci: command not found
<br class=3D"">Singularity/tensorflow_0.9.<wbr class=3D"">img&gt; nvidia-sm=
i
<br class=3D"">bash: nvidia-smi: command not found
<br class=3D"">Singularity/tensorflow_0.9.<wbr class=3D"">img&gt; python
<br class=3D"">Python 2.7.12 (default, Jul &nbsp;1 2016, 15:12:24) &nbsp;<b=
r class=3D"">[GCC 5.4.0 20160609] on linux2
<br class=3D"">Type "help", "copyright", "credits" or "license" for more in=
formation.
<br class=3D"">&gt;&gt;&gt; import tensorflow as tf
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcublas.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcudnn.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcufft.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcuda.so locally
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">dso_loader.cc:1=
08] successfully opened CUDA library libcurand.so locally
<br class=3D"">&gt;&gt;&gt; sess =3D tf.Session()
<br class=3D"">E tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_drive=
r.cc:491] failed call to cuInit: CUDA_ERROR_UNKNOWN
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:153] retrieving CUDA diagnostic information for host: midway-l34-=
01
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:160] hostname: midway-l34-01
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:185] libcuda reported version is: Not found: was unable to find l=
ibcuda.so DSO loaded into this program
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:347] driver version file contents: """NVRM version: NVIDIA UNIX x=
86_64 Kernel Module &nbsp;346.47 &nbsp;Thu Feb 19 18:56:03 PST 2015
<br class=3D"">GCC version: &nbsp;gcc version 4.4.7 20120313 (Red Hat 4.4.7=
-11) (GCC) &nbsp;<br class=3D"">"""
<br class=3D"">I tensorflow/stream_executor/<wbr class=3D"">cuda/cuda_diagn=
ostics.cc:189] kernel reported version is: 346.47.0
<br class=3D"">I tensorflow/core/common_<wbr class=3D"">runtime/gpu/gpu_ini=
t.cc:81] No GPU devices available on machine.<br class=3D"">
<br class=3D""></span></div><div class=3D""><span style=3D"font-family:mono=
space" class=3D"">Must there be nvidia driver installed inside the containe=
r? Outside? The container shares the same kernel with the host and nvidia k=
ernel module needs to be loaded... How this is handled? Any requirements on=
 nvidia driver and cuda versions inside and outside of the container?</span=
></div><div class=3D""><span style=3D"font-family:monospace" class=3D""><br=
 class=3D""></span></div><div class=3D""><span style=3D"font-family:monospa=
ce" class=3D"">Thank you,</span></div><div class=3D""><span style=3D"font-f=
amily:monospace" class=3D"">Igor</span></div><div class=3D""><span style=3D=
"font-family:monospace" class=3D""><br class=3D""></span></div><div class=
=3D""><font face=3D"monospace" class=3D""><br class=3D""></font></div></div=
><div class=3D""><br class=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a class=3D"">singularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<=
br class=3D"">
</blockquote></div>
</blockquote></div>
</blockquote></div></div></blockquote></div></div></div></div><div class=3D=
""><div class=3D""><div class=3D""><br class=3D"webkit-block-placeholder"><=
/div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></blockquote></div></div></div><div class=3D""><div class=3D""><div c=
lass=3D""><br class=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div>
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></blockquote></div></div></div><div class=3D""><div class=3D""><div c=
lass=3D""><br class=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></blockquote></div></div></div><div class=3D""><div class=3D""><div c=
lass=3D""><br class=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></blockquote></div></div></div><div class=3D""><div class=3D""><div c=
lass=3D""><br class=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" class=3D"">si=
ngularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"">
</div></div></blockquote></div><br class=3D""></div>
</div></div></blockquote></div><br class=3D""></div><div class=3D""><br cla=
ss=3D"webkit-block-placeholder"></div>

-- <br class=3D"">
You received this message because you are subscribed to the Google Groups "=
singularity" group.<br class=3D"">
To unsubscribe from this group and stop receiving emails from it, send an e=
mail to <a href=3D"mailto:singu...@lbl.gov" class=3D"">singu...@lbl.gov</a>=
.<br class=3D"">
<span id=3D"cid:05239B56-574F-46FB-A68C-22D0D3B4EF24">&lt;build.sh&gt;</spa=
n><span id=3D"cid:392D8ADD-9204-42D6-90BA-CC210D7ADC07">&lt;links.sh&gt;</s=
pan><span id=3D"cid:82A21516-D231-4423-8D4B-538B40E88D10">&lt;nvidia.sh&gt;=
</span><span id=3D"cid:24F78DF3-08FC-4823-82E4-273A7D1B2A59">&lt;sl7.def&gt=
;</span></div></blockquote></div><br class=3D""></body></html>
--Apple-Mail=_2971EE55-98A1-4350-AD6B-9C4DE084EB78--
