Date: Tue, 9 May 2017 15:11:42 -0700 (PDT)
From: M Noon <saad...@gmail.com>
To: singularity <singu...@lbl.gov>
Message-Id: <9c7d3165-0f78-4ba7-8ac5-0a57c5ef68ba@lbl.gov>
In-Reply-To: <CAGfAqt_ejXKuq7TpAQjANAdjorKZ90zkpUEomuzRvX5_QkGFaw@mail.gmail.com>
References: <9c275bb2-1dd9-49ee-b7b3-25d6ff146607@lbl.gov> <db862cf4-c3ad-4453-8ac5-54c81e092c61@lbl.gov>
 <CAM=pu+JiEAL87uZ0TMoUyem62D2Vu-rg0DX6Nbueu=2rpdJFBw@mail.gmail.com> <42547cd7-56d6-42ff-9d97-9f4006fe66b2@lbl.gov>
 <CAGfAqt_ejXKuq7TpAQjANAdjorKZ90zkpUEomuzRvX5_QkGFaw@mail.gmail.com>
Subject: Re: [Singularity] Re: Cant find or run installed APP from within
 the container
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_2177_1119059268.1494367902136"

------=_Part_2177_1119059268.1494367902136
Content-Type: multipart/alternative; 
	boundary="----=_Part_2178_236931932.1494367902138"

------=_Part_2178_236931932.1494367902138
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Hi Jason, 

its on my path: 

echo $PATH

/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin/STAR/bin/Linux_x86_64



The problem is that I cant find it here "/bin/STAR/" or any other directory 
in the path.. I dont understand this behavior.. this is could be something 
very very trivial that I am missing.


Thanks,

M

On Tuesday, May 9, 2017 at 2:16:45 PM UTC-7, Jason Stover wrote:
>
> Hi, 
>
> > + STAR --version 
> > /.test: line 5: STAR: command not found 
>
> What is your $PATH value, and is the location of the STAR binary included? 
>
> -J 
>
>
> On Tue, May 9, 2017 at 4:02 PM, M Noon <sa...@gmail.com <javascript:>> 
> wrote: 
> > Hi Vanessa, 
> > 
> > I tried from scratch, created a new img and so on: I still get the same 
> > error: 
> > 
> > g++ -c  -O3 -pipe -Wall -Wextra  bam_cat.c 
> > 
> > g++ -o STAR  -O3 -pipe -std=c++11 -Wall -Wextra -fopenmp 
> > -D'COMPILATION_TIME_PLACE="Tue May 9 06:18:22 UTC 2017 :/STAR/source"' 
> > SharedMemory.o PackedArray.o SuffixArrayFuns.o STAR.o Parameters.o 
> > InOutStreams.o SequenceFuns.o Genome.o Chain.o Stats.o Transcript.o 
> > Transcript_alignScore.o ReadAlign.o ReadAlign_storeAligns.o 
> > ReadAlign_stitchPieces.o ReadAlign_multMapSelect.o 
> ReadAlign_mapOneRead.o 
> > readLoad.o ReadAlignChunk.o ReadAlignChunk_processChunks.o 
> > ReadAlignChunk_mapChunk.o OutSJ.o outputSJ.o blocksOverlap.o 
> ThreadControl.o 
> > sysRemoveDir.o ReadAlign_maxMappableLength2strands.o binarySearch2.o 
> > ReadAlign_outputAlignments.o ReadAlign_outputTranscriptSAM.o 
> > ReadAlign_outputTranscriptSJ.o ReadAlign_outputTranscriptCIGARp.o 
> > ReadAlign_createExtendWindowsWithAlign.o ReadAlign_assignAlignToWindow.o 
> > ReadAlign_oneRead.o ReadAlign_stitchWindowSeeds.o 
> > ReadAlign_chimericDetection.o stitchWindowAligns.o extendAlign.o 
> > stitchAlignToTranscript.o alignSmithWaterman.o genomeGenerate.o 
> > genomeParametersWrite.o genomeScanFastaFiles.o genomeSAindex.o 
> > Genome_insertSequences.o insertSeqSA.o funCompareUintAndSuffixes.o 
> > sortSuffixesBucket.o funCompareUintAndSuffixesMemcmp.o TimeFunctions.o 
> > ErrorWarning.o loadGTF.o streamFuns.o stringSubstituteAll.o 
> Transcriptome.o 
> > Transcriptome_quantAlign.o ReadAlign_quantTranscriptome.o 
> Quantifications.o 
> > Transcriptome_geneCountsAddAlign.o sjdbLoadFromFiles.o 
> sjdbLoadFromStream.o 
> > sjdbPrepare.o sjdbBuildIndex.o sjdbInsertJunctions.o mapThreadsSpawn.o 
> > Parameters_openReadsFiles.cpp Parameters_closeReadsFiles.cpp BAMoutput.o 
> > BAMfunctions.o ReadAlign_alignBAM.o BAMbinSortByCoordinate.o 
> signalFromBAM.o 
> > bamRemoveDuplicates.o BAMbinSortUnmapped.o bam_cat.o GlobalVariables.cpp 
> > -pthread -Lhtslib -Bstatic -lhts -Bdynamic -lz -lrt 
> > 
> > Parameters_openReadsFiles.cpp: In member function 'void 
> > Parameters::openReadsFiles()': 
> > 
> > Parameters_openReadsFiles.cpp:30:20: warning: variable 'imate' might be 
> > clobbered by 'longjmp' or 'vfork' [-Wclobbered] 
> > 
> >           for (uint imate=0;imate<readNmates;imate++) {//open readIn 
> files 
> > 
> >                     ^ 
> > 
> > + mkdir -p /extra/mnoon 
> > 
> > + mkdir -p /rsgrps/zarnescu/ 
> > 
> > Adding environment to container 
> > 
> > Adding deffile section labels to container 
> > 
> > Running test scriptlet 
> > 
> > + python --version 
> > 
> > Python 2.7.5 
> > 
> > + STAR --version 
> > 
> > /.test: line 5: STAR: command not found 
> > 
> > ERROR: Aborting with RETVAL=255 
> > 
> > 
> > 
> > On Tuesday, May 9, 2017 at 1:42:25 PM UTC-7, vanessa wrote: 
> >> 
> >> Hey M Noon, 
> >> 
> >> It's telling you STAR already exists, which tells me that you are 
> trying 
> >> to bootstrap again (on a failed image) without re-creating the image. 
> >> Generally when you try things for a second time, you want to start with 
> a 
> >> new image, because the git clone is going to fail when it sees the old 
> STAR 
> >> directory is already there. 
> >> 
> >> Best, 
> >> 
> >> Vanessa 
> >> 
> >> On Tue, May 9, 2017 at 4:29 PM, M Noon <sa...@gmail.com> wrote: 
> >>> 
> >>> No, It didn't help. I comment out both mkdir commands. 
> >>> 
> >>> sudo singularity bootstrap starMPI.img starMPI.def 
> >>> 
> >>> [sudo] password for mnoon: 
> >>> 
> >>> Sanitizing environment 
> >>> 
> >>> Building from bootstrap definition recipe 
> >>> 
> >>> Adding base Singularity environment to container 
> >>> 
> >>> Docker image path: index.docker.io/library/centos:7 
> >>> 
> >>> Cache folder set to /root/.singularity/docker 
> >>> 
> >>> Exploding layer: 
> >>> 
> sha256:93857f76ae30d903bbdad13fbf7fad95ce1c0b52b7d5644651e01c6c7a906312.tar.gz 
>
> >>> 
> >>> Exploding layer: 
> >>> 
> sha256:9326ff949485e53c2403126b5422ad659cb2176bddbc511461da81c10703a50c.tar.gz 
>
> >>> 
> >>> User defined %runscript found! Taking priority. 
> >>> 
> >>> Running post scriptlet 
> >>> 
> >>> + yum -y groupinstall 'Development Tools' 
> >>> 
> >>> Loaded plugins: fastestmirror, ovl 
> >>> 
> >>> Loading mirror speeds from cached hostfile 
> >>> 
> >>>  * base: repo1.sea.innoscale.net 
> >>> 
> >>>  * extras: centos.firehosted.com 
> >>> 
> >>>  * updates: mirrors.sonic.net 
> >>> 
> >>> Maybe run: yum groups mark install (see man yum) 
> >>> 
> >>> No packages in any requested group available to install or update 
> >>> 
> >>> + yum -y install zlib-devel 
> >>> 
> >>> Loaded plugins: fastestmirror, ovl 
> >>> 
> >>> Loading mirror speeds from cached hostfile 
> >>> 
> >>>  * base: repo1.sea.innoscale.net 
> >>> 
> >>>  * extras: centos.firehosted.com 
> >>> 
> >>>  * updates: mirrors.sonic.net 
> >>> 
> >>> Resolving Dependencies 
> >>> 
> >>> --> Running transaction check 
> >>> 
> >>> ---> Package zlib-devel.x86_64 0:1.2.7-17.el7 will be installed 
> >>> 
> >>> --> Finished Dependency Resolution 
> >>> 
> >>> 
> >>> Dependencies Resolved 
> >>> 
> >>> 
> >>> 
> >>> 
> ============================================================================================================================================================== 
>
> >>> 
> >>>  Package                                Arch 
> >>> Version                                     Repository 
> >>> Size 
> >>> 
> >>> 
> >>> 
> ============================================================================================================================================================== 
>
> >>> 
> >>> Installing: 
> >>> 
> >>>  zlib-devel                             x86_64 
> >>> 1.2.7-17.el7                                base 
> >>> 50 k 
> >>> 
> >>> 
> >>> Transaction Summary 
> >>> 
> >>> 
> >>> 
> ============================================================================================================================================================== 
>
> >>> 
> >>> Install  1 Package 
> >>> 
> >>> 
> >>> Total download size: 50 k 
> >>> 
> >>> Installed size: 132 k 
> >>> 
> >>> Downloading packages: 
> >>> 
> >>> warning: 
> >>> 
> /var/cache/yum/x86_64/7/base/packages/zlib-devel-1.2.7-17.el7.x86_64.rpm: 
> >>> Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY 
> >>> 
> >>> Public key for zlib-devel-1.2.7-17.el7.x86_64.rpm is not installed 
> >>> 
> >>> zlib-devel-1.2.7-17.el7.x86_64.rpm 
> >>> |  50 kB  00:00:00 
> >>> 
> >>> Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 
> >>> 
> >>> Importing GPG key 0xF4A80EB5: 
> >>> 
> >>>  Userid     : "CentOS-7 Key (CentOS 7 Official Signing Key) 
> >>> <se...@centos.org>" 
> >>> 
> >>>  Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5 
> >>> 
> >>>  Package    : centos-release-7-3.1611.el7.centos.x86_64 (@CentOS) 
> >>> 
> >>>  From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 
> >>> 
> >>> Running transaction check 
> >>> 
> >>> Running transaction test 
> >>> 
> >>> Transaction test succeeded 
> >>> 
> >>> Running transaction 
> >>> 
> >>>   Installing : zlib-devel-1.2.7-17.el7.x86_64 
> >>> 1/1 
> >>> 
> >>>   Verifying  : zlib-devel-1.2.7-17.el7.x86_64 
> >>> 1/1 
> >>> 
> >>> 
> >>> Installed: 
> >>> 
> >>>   zlib-devel.x86_64 0:1.2.7-17.el7 
> >>> 
> >>> 
> >>> Complete! 
> >>> 
> >>> + cd / 
> >>> 
> >>> + git clone https://github.com/alexdobin/STAR.git 
> >>> 
> >>> fatal: destination path 'STAR' already exists and is not an empty 
> >>> directory. 
> >>> 
> >>> ERROR: Aborting with RETVAL=255 
> >>> 
> >>> 
> >>> 
> >>> On Monday, May 8, 2017 at 5:05:07 PM UTC-7, M Noon wrote: 
> >>>> 
> >>>> Hi team, 
> >>>> 
> >>>> I am in the stage of getting familiarized with Singularity and don't 
> >>>> know many details about it. I am trying to build a container with MPI 
> >>>> libraries and genome aligner (STAR) that could be tested on HPC. 
> >>>> After facing many errors, I succeeded to install both MPI libraries 
> and 
> >>>> STAR. I am using Centos7. I am git-cloning both tools within %POST. 
> >>>> Logically, both programs/executables should be at "/usr/local/bin". 
> >>>> Well, I do see mpi and it can be invoked when I am in shell mode. 
> Despite 
> >>>> great deal of efforts I couldn't find STAR executable or any folder 
> that 
> >>>> was/should have been cloned within the container. I may be missing 
> something 
> >>>> very trivial but I can't seem to work it out yet. 
> >>>> Here is my Definition file: 
> >>>> 
> >>>> 
> >>>> BootStrap: yum 
> >>>> 
> >>>> OSVersion: 7 
> >>>> 
> >>>> MirrorURL: 
> >>>> 
> http://mirror.centos.org/centos-%{OSVERSION}/%{OSVERSION}/os/$basearch/ 
> >>>> 
> >>>> Include: yum wget 
> >>>> 
> >>>> # best to build up container using kickstart mentality. 
> >>>> 
> >>>> # ie, to add more packages to image, 
> >>>> 
> >>>> # re-run bootstrap command again. 
> >>>> 
> >>>> # bootstrap on existing image will build on top of it, not 
> overwriting 
> >>>> it/restarting from scratch 
> >>>> 
> >>>> # singularity .def file is like kickstart file 
> >>>> 
> >>>> # unix commands can be run, but if there is any error, the bootstrap 
> >>>> process ends 
> >>>> 
> >>>> 
> >>>> 
> >>>> %setup 
> >>>> 
> >>>>    # commands to be executed on host outside container during 
> bootstrap 
> >>>> 
> >>>> 
> >>>> 
> >>>> %post 
> >>>> 
> >>>>     # commands to be executed inside container during bootstrap 
> >>>> 
> >>>>     yum -y groupinstall "Development Tools" 
> >>>> 
> >>>> 
> >>>> 
> >>>> #    # Clone the OpenMPI GitHub master branch in current directory 
> (on 
> >>>> host) 
> >>>> 
> >>>>     git clone https://github.com/open-mpi/ompi.git 
> >>>> 
> >>>>     cd ompi 
> >>>> 
> >>>> 
> >>>>     # Build OpenMPI in the working directory 
> >>>> 
> >>>>     ./autogen.pl 
> >>>> 
> >>>>     ./configure --prefix=/usr/local 
> >>>> 
> >>>>     make 
> >>>> 
> >>>>     make install 
> >>>> 
> >>>> # 
> >>>> 
> >>>> 
> >>>> 
> >>>>     # Instal "zlib1g" to aviod installation error 
> >>>> 
> >>>>     yum -y install zlib-devel 
> >>>> 
> >>>> 
> >>>> 
> >>>>     # Install STAR -  get STAR source using git 
> >>>> 
> >>>>     git clone https://github.com/alexdobin/STAR.git 
> >>>> 
> >>>>     cd STAR/source 
> >>>> 
> >>>> 
> >>>>     echo "Within STAR" 
> >>>> 
> >>>>     echo "pwd" 
> >>>> 
> >>>> 
> >>>>     # Build STAR 
> >>>> 
> >>>>     make STAR 
> >>>> 
> >>>> 
> >>>>     echo $PATH 
> >>>> 
> >>>>     STAR --version 
> >>>> 
> >>>> 
> >>>>     echo "OUT of Star Dir" 
> >>>> 
> >>>>     STAR --version 
> >>>> 
> >>>> 
> >>>>     /usr/bin/STAR --help 
> >>>> 
> >>>> 
> >>>> 
> >>>>     # create bind points for storage.  Replace netid as appropriate 
> >>>> 
> >>>>     mkdir /extra/mnoon /rsgrps/zarnescu/ 
> >>>> 
> >>>>     exit 0 
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>>  %runscript 
> >>>> 
> >>>>    # commands to be executed when the container runs 
> >>>> 
> >>>>    echo "Arguments received: $*" 
> >>>> 
> >>>>    exec /usr/bin/python "$@" 
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>>  %test 
> >>>> 
> >>>>    # commands to be executed within container at close of bootstrap 
> >>>> process 
> >>>> 
> >>>>    python --version 
> >>>> 
> >>>>    STAR --version 
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> 
> >>>> I also tried to install (git clone) STAR using this alternative 
> method, 
> >>>> below: 
> >>>> 
> >>>> sudo singularity exec -w centosMPI_star.img 
> >>>> 
> >>>> git clone https://github.com/alexdobin/STAR.git 
> >>>> 
> >>>> cd STAR/source/ 
> >>>> 
> >>>> singularity exec ../../centosMPI_star.img make STAR 
> >>>> 
> >>>> 
> >>>> When I do 
> >>>> 
> >>>> singularity shell centosMPI_star.img 
> >>>> 
> >>>> 
> >>>> I can't find STAR in any possible directory other than the clonned 
> >>>> version on /home/mnoon 
> >>>> 
> >>>> 
> >>>> Can you please tell me what am I doing wrong? Also, Where should the 
> >>>> installed tool/executable be located with the container? 
> >>>> 
> >>>> 
> >>>> Regards, 
> >>>> 
> >>>> M 
> >>>> 
> >>>> 
> >>> -- 
> >>> You received this message because you are subscribed to the Google 
> Groups 
> >>> "singularity" group. 
> >>> To unsubscribe from this group and stop receiving emails from it, send 
> an 
> >>> email to singu...@lbl.gov. 
> >> 
> >> 
> >> 
> >> 
> >> -- 
> >> Vanessa Villamia Sochat 
> >> Stanford University '16 
> >> (603) 321-0676 
> > 
> > -- 
> > You received this message because you are subscribed to the Google 
> Groups 
> > "singularity" group. 
> > To unsubscribe from this group and stop receiving emails from it, send 
> an 
> > email to singu...@lbl.gov <javascript:>. 
>

------=_Part_2178_236931932.1494367902138
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">Hi Jason,=C2=A0<div><br></div><div>its on my path:=20




<style type=3D"text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo}
span.s1 {font-variant-ligatures: no-common-ligatures}
</style>


<p class=3D"p1"><span class=3D"s1">echo $PATH</span></p>
<p class=3D"p1"><span class=3D"s1">/usr/local/sbin:/usr/local/bin:/usr/sbin=
:/usr/bin:/sbin:/bin/STAR/bin/Linux_x86_64</span></p><p class=3D"p1"><span =
class=3D"s1"><br></span></p><p class=3D"p1"><span class=3D"s1"><br></span><=
/p><p class=3D"p1"><span class=3D"s1">The problem is that I cant find it he=
re &quot;</span><span style=3D"font-variant-ligatures: no-common-ligatures;=
">/bin/STAR/</span><span style=3D"font-variant-ligatures: no-common-ligatur=
es;">&quot; or any other directory in the path.. I dont understand this beh=
avior.. this is could be something very very trivial that I am missing.</sp=
an></p><p class=3D"p1"><span style=3D"font-variant-ligatures: no-common-lig=
atures;"><br></span></p><p class=3D"p1"><span style=3D"font-variant-ligatur=
es: no-common-ligatures;">Thanks,</span></p><p class=3D"p1"><span style=3D"=
font-variant-ligatures: no-common-ligatures;">M</span></p><br>On Tuesday, M=
ay 9, 2017 at 2:16:45 PM UTC-7, Jason Stover wrote:<blockquote class=3D"gma=
il_quote" style=3D"margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid=
;padding-left: 1ex;">Hi,
<br>
<br>&gt; + STAR --version
<br>&gt; /.test: line 5: STAR: command not found
<br>
<br>What is your $PATH value, and is the location of the STAR binary includ=
ed?
<br>
<br>-J
<br>
<br>
<br>On Tue, May 9, 2017 at 4:02 PM, M Noon &lt;<a href=3D"javascript:" targ=
et=3D"_blank" gdf-obfuscated-mailto=3D"qvMvzdpgAAAJ" rel=3D"nofollow" onmou=
sedown=3D"this.href=3D&#39;javascript:&#39;;return true;" onclick=3D"this.h=
ref=3D&#39;javascript:&#39;;return true;">sa...@gmail.com</a>&gt; wrote:
<br>&gt; Hi Vanessa,
<br>&gt;
<br>&gt; I tried from scratch, created a new img and so on: I still get the=
 same
<br>&gt; error:
<br>&gt;
<br>&gt; g++ -c =C2=A0-O3 -pipe -Wall -Wextra =C2=A0bam_cat.c
<br>&gt;
<br>&gt; g++ -o STAR =C2=A0-O3 -pipe -std=3Dc++11 -Wall -Wextra -fopenmp
<br>&gt; -D&#39;COMPILATION_TIME_PLACE=3D&quot;Tue May 9 06:18:22 UTC 2017 =
:/STAR/source&quot;&#39;
<br>&gt; SharedMemory.o PackedArray.o SuffixArrayFuns.o STAR.o Parameters.o
<br>&gt; InOutStreams.o SequenceFuns.o Genome.o Chain.o Stats.o Transcript.=
o
<br>&gt; Transcript_alignScore.o ReadAlign.o ReadAlign_storeAligns.o
<br>&gt; ReadAlign_stitchPieces.o ReadAlign_multMapSelect.o ReadAlign_mapOn=
eRead.o
<br>&gt; readLoad.o ReadAlignChunk.o ReadAlignChunk_processChunks.o
<br>&gt; ReadAlignChunk_mapChunk.o OutSJ.o outputSJ.o blocksOverlap.o Threa=
dControl.o
<br>&gt; sysRemoveDir.o ReadAlign_<wbr>maxMappableLength2strands.o binarySe=
arch2.o
<br>&gt; ReadAlign_outputAlignments.o ReadAlign_outputTranscriptSAM.<wbr>o
<br>&gt; ReadAlign_outputTranscriptSJ.o ReadAlign_<wbr>outputTranscriptCIGA=
Rp.o
<br>&gt; ReadAlign_<wbr>createExtendWindowsWithAlign.o ReadAlign_assignAlig=
nToWindow.<wbr>o
<br>&gt; ReadAlign_oneRead.o ReadAlign_stitchWindowSeeds.o
<br>&gt; ReadAlign_chimericDetection.o stitchWindowAligns.o extendAlign.o
<br>&gt; stitchAlignToTranscript.o alignSmithWaterman.o genomeGenerate.o
<br>&gt; genomeParametersWrite.o genomeScanFastaFiles.o genomeSAindex.o
<br>&gt; Genome_insertSequences.o insertSeqSA.o funCompareUintAndSuffixes.o
<br>&gt; sortSuffixesBucket.o funCompareUintAndSuffixesMemcm<wbr>p.o TimeFu=
nctions.o
<br>&gt; ErrorWarning.o loadGTF.o streamFuns.o stringSubstituteAll.o Transc=
riptome.o
<br>&gt; Transcriptome_quantAlign.o ReadAlign_quantTranscriptome.o Quantifi=
cations.o
<br>&gt; Transcriptome_<wbr>geneCountsAddAlign.o sjdbLoadFromFiles.o sjdbLo=
adFromStream.o
<br>&gt; sjdbPrepare.o sjdbBuildIndex.o sjdbInsertJunctions.o mapThreadsSpa=
wn.o
<br>&gt; Parameters_openReadsFiles.cpp Parameters_closeReadsFiles.cpp BAMou=
tput.o
<br>&gt; BAMfunctions.o ReadAlign_alignBAM.o BAMbinSortByCoordinate.o signa=
lFromBAM.o
<br>&gt; bamRemoveDuplicates.o BAMbinSortUnmapped.o bam_cat.o GlobalVariabl=
es.cpp
<br>&gt; -pthread -Lhtslib -Bstatic -lhts -Bdynamic -lz -lrt
<br>&gt;
<br>&gt; Parameters_openReadsFiles.cpp: In member function &#39;void
<br>&gt; Parameters::openReadsFiles()&#39;:
<br>&gt;
<br>&gt; Parameters_openReadsFiles.cpp:<wbr>30:20: warning: variable &#39;i=
mate&#39; might be
<br>&gt; clobbered by &#39;longjmp&#39; or &#39;vfork&#39; [-Wclobbered]
<br>&gt;
<br>&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 for (uint imate=3D0;imate&lt;re=
adNmates;<wbr>imate++) {//open readIn files
<br>&gt;
<br>&gt; =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 ^
<br>&gt;
<br>&gt; + mkdir -p /extra/mnoon
<br>&gt;
<br>&gt; + mkdir -p /rsgrps/zarnescu/
<br>&gt;
<br>&gt; Adding environment to container
<br>&gt;
<br>&gt; Adding deffile section labels to container
<br>&gt;
<br>&gt; Running test scriptlet
<br>&gt;
<br>&gt; + python --version
<br>&gt;
<br>&gt; Python 2.7.5
<br>&gt;
<br>&gt; + STAR --version
<br>&gt;
<br>&gt; /.test: line 5: STAR: command not found
<br>&gt;
<br>&gt; ERROR: Aborting with RETVAL=3D255
<br>&gt;
<br>&gt;
<br>&gt;
<br>&gt; On Tuesday, May 9, 2017 at 1:42:25 PM UTC-7, vanessa wrote:
<br>&gt;&gt;
<br>&gt;&gt; Hey M Noon,
<br>&gt;&gt;
<br>&gt;&gt; It&#39;s telling you STAR already exists, which tells me that =
you are trying
<br>&gt;&gt; to bootstrap again (on a failed image) without re-creating the=
 image.
<br>&gt;&gt; Generally when you try things for a second time, you want to s=
tart with a
<br>&gt;&gt; new image, because the git clone is going to fail when it sees=
 the old STAR
<br>&gt;&gt; directory is already there.
<br>&gt;&gt;
<br>&gt;&gt; Best,
<br>&gt;&gt;
<br>&gt;&gt; Vanessa
<br>&gt;&gt;
<br>&gt;&gt; On Tue, May 9, 2017 at 4:29 PM, M Noon &lt;<a>sa...@gmail.com<=
/a>&gt; wrote:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; No, It didn&#39;t help. I comment out both mkdir commands.
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; sudo singularity bootstrap starMPI.img starMPI.def
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; [sudo] password for mnoon:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Sanitizing environment
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Building from bootstrap definition recipe
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Adding base Singularity environment to container
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Docker image path: <a href=3D"http://index.docker.io/libra=
ry/centos:7" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D=
&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Findex.docker.io%2Flibrary%=
2Fcentos%3A7\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFPHFCrCFlPYJG1kYWLuJO-=
ON1ULw&#39;;return true;" onclick=3D"this.href=3D&#39;http://www.google.com=
/url?q\x3dhttp%3A%2F%2Findex.docker.io%2Flibrary%2Fcentos%3A7\x26sa\x3dD\x2=
6sntz\x3d1\x26usg\x3dAFQjCNFPHFCrCFlPYJG1kYWLuJO-ON1ULw&#39;;return true;">=
index.docker.io/library/<wbr>centos:7</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Cache folder set to /root/.singularity/docker
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Exploding layer:
<br>&gt;&gt;&gt; sha256:<wbr>93857f76ae30d903bbdad13fbf7fad<wbr>95ce1c0b52b=
7d5644651e01c6c7a90<wbr>6312.tar.gz
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Exploding layer:
<br>&gt;&gt;&gt; sha256:<wbr>9326ff949485e53c2403126b5422ad<wbr>659cb2176bd=
dbc511461da81c10703<wbr>a50c.tar.gz
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; User defined %runscript found! Taking priority.
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Running post scriptlet
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; + yum -y groupinstall &#39;Development Tools&#39;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Loaded plugins: fastestmirror, ovl
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Loading mirror speeds from cached hostfile
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* base: <a href=3D"http://repo1.sea.innoscale.net" t=
arget=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://ww=
w.google.com/url?q\x3dhttp%3A%2F%2Frepo1.sea.innoscale.net\x26sa\x3dD\x26sn=
tz\x3d1\x26usg\x3dAFQjCNELn2-5uRkR5qld-Ol3xjnoOyRxrw&#39;;return true;" onc=
lick=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Frepo1.=
sea.innoscale.net\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNELn2-5uRkR5qld-Ol=
3xjnoOyRxrw&#39;;return true;">repo1.sea.innoscale.net</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* extras: <a href=3D"http://centos.firehosted.com" t=
arget=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://ww=
w.google.com/url?q\x3dhttp%3A%2F%2Fcentos.firehosted.com\x26sa\x3dD\x26sntz=
\x3d1\x26usg\x3dAFQjCNHz9rsAY7Hl5Zh5V7Hq2vFOLDUz2w&#39;;return true;" oncli=
ck=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fcentos.f=
irehosted.com\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHz9rsAY7Hl5Zh5V7Hq2vF=
OLDUz2w&#39;;return true;">centos.firehosted.com</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* updates: <a href=3D"http://mirrors.sonic.net" targ=
et=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.g=
oogle.com/url?q\x3dhttp%3A%2F%2Fmirrors.sonic.net\x26sa\x3dD\x26sntz\x3d1\x=
26usg\x3dAFQjCNHO-U8hEwCDZnvJ7Hzb6UiuP5btJw&#39;;return true;" onclick=3D"t=
his.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fmirrors.sonic.n=
et\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHO-U8hEwCDZnvJ7Hzb6UiuP5btJw&#39=
;;return true;">mirrors.sonic.net</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Maybe run: yum groups mark install (see man yum)
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; No packages in any requested group available to install or=
 update
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; + yum -y install zlib-devel
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Loaded plugins: fastestmirror, ovl
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Loading mirror speeds from cached hostfile
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* base: <a href=3D"http://repo1.sea.innoscale.net" t=
arget=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://ww=
w.google.com/url?q\x3dhttp%3A%2F%2Frepo1.sea.innoscale.net\x26sa\x3dD\x26sn=
tz\x3d1\x26usg\x3dAFQjCNELn2-5uRkR5qld-Ol3xjnoOyRxrw&#39;;return true;" onc=
lick=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Frepo1.=
sea.innoscale.net\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNELn2-5uRkR5qld-Ol=
3xjnoOyRxrw&#39;;return true;">repo1.sea.innoscale.net</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* extras: <a href=3D"http://centos.firehosted.com" t=
arget=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://ww=
w.google.com/url?q\x3dhttp%3A%2F%2Fcentos.firehosted.com\x26sa\x3dD\x26sntz=
\x3d1\x26usg\x3dAFQjCNHz9rsAY7Hl5Zh5V7Hq2vFOLDUz2w&#39;;return true;" oncli=
ck=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fcentos.f=
irehosted.com\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHz9rsAY7Hl5Zh5V7Hq2vF=
OLDUz2w&#39;;return true;">centos.firehosted.com</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0* updates: <a href=3D"http://mirrors.sonic.net" targ=
et=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.g=
oogle.com/url?q\x3dhttp%3A%2F%2Fmirrors.sonic.net\x26sa\x3dD\x26sntz\x3d1\x=
26usg\x3dAFQjCNHO-U8hEwCDZnvJ7Hzb6UiuP5btJw&#39;;return true;" onclick=3D"t=
his.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fmirrors.sonic.n=
et\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHO-U8hEwCDZnvJ7Hzb6UiuP5btJw&#39=
;;return true;">mirrors.sonic.net</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Resolving Dependencies
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; --&gt; Running transaction check
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; ---&gt; Package zlib-devel.x86_64 0:1.2.7-17.el7 will be i=
nstalled
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; --&gt; Finished Dependency Resolution
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Dependencies Resolved
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0Package =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0Arch
<br>&gt;&gt;&gt; Version =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 Repository
<br>&gt;&gt;&gt; Size
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Installing:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0zlib-devel =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 x86_64
<br>&gt;&gt;&gt; 1.2.7-17.el7 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0base
<br>&gt;&gt;&gt; 50 k
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Transaction Summary
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<wbr>=3D=3D=3D=3D=3D=3D=3D=3D
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Install =C2=A01 Package
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Total download size: 50 k
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Installed size: 132 k
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Downloading packages:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; warning:
<br>&gt;&gt;&gt; /var/cache/yum/x86_64/7/base/<wbr>packages/zlib-devel-1.2.=
7-17.<wbr>el7.x86_64.rpm:
<br>&gt;&gt;&gt; Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Public key for zlib-devel-1.2.7-17.el7.x86_<wbr>64.rpm is =
not installed
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; zlib-devel-1.2.7-17.el7.x86_<wbr>64.rpm
<br>&gt;&gt;&gt; | =C2=A050 kB =C2=A000:00:00
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Retrieving key from file:///etc/pki/rpm-gpg/RPM-<wbr>GPG-K=
EY-CentOS-7
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Importing GPG key 0xF4A80EB5:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0Userid =C2=A0 =C2=A0 : &quot;CentOS-7 Key (CentOS 7 =
Official Signing Key)
<br>&gt;&gt;&gt; &lt;<a>se...@centos.org</a>&gt;&quot;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7=
 f4a8 0eb5
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0Package =C2=A0 =C2=A0: centos-release-7-3.1611.el7.<=
wbr>centos.x86_64 (@CentOS)
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0From =C2=A0 =C2=A0 =C2=A0 : /etc/pki/rpm-gpg/RPM-GPG=
-KEY-<wbr>CentOS-7
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Running transaction check
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Running transaction test
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Transaction test succeeded
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Running transaction
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0 Installing : zlib-devel-1.2.7-17.el7.x86_64
<br>&gt;&gt;&gt; 1/1
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0 Verifying =C2=A0: zlib-devel-1.2.7-17.el7.x86_64
<br>&gt;&gt;&gt; 1/1
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Installed:
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; =C2=A0 zlib-devel.x86_64 0:1.2.7-17.el7
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; Complete!
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; + cd /
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; + git clone <a href=3D"https://github.com/alexdobin/STAR.g=
it" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http=
s://www.google.com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Falexdobin%2FSTAR.git=
\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFSIcANP_fuVBCs3obg1KggJVxIKw&#39;;=
return true;" onclick=3D"this.href=3D&#39;https://www.google.com/url?q\x3dh=
ttps%3A%2F%2Fgithub.com%2Falexdobin%2FSTAR.git\x26sa\x3dD\x26sntz\x3d1\x26u=
sg\x3dAFQjCNFSIcANP_fuVBCs3obg1KggJVxIKw&#39;;return true;">https://github.=
com/alexdobin/<wbr>STAR.git</a>
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; fatal: destination path &#39;STAR&#39; already exists and =
is not an empty
<br>&gt;&gt;&gt; directory.
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; ERROR: Aborting with RETVAL=3D255
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt;
<br>&gt;&gt;&gt; On Monday, May 8, 2017 at 5:05:07 PM UTC-7, M Noon wrote:
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; Hi team,
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; I am in the stage of getting familiarized with Singula=
rity and don&#39;t
<br>&gt;&gt;&gt;&gt; know many details about it. I am trying to build a con=
tainer with MPI
<br>&gt;&gt;&gt;&gt; libraries and genome aligner (STAR) that could be test=
ed on HPC.
<br>&gt;&gt;&gt;&gt; After facing many errors, I succeeded to install both =
MPI libraries and
<br>&gt;&gt;&gt;&gt; STAR. I am using Centos7. I am git-cloning both tools =
within %POST.
<br>&gt;&gt;&gt;&gt; Logically, both programs/executables should be at &quo=
t;/usr/local/bin&quot;.
<br>&gt;&gt;&gt;&gt; Well, I do see mpi and it can be invoked when I am in =
shell mode. Despite
<br>&gt;&gt;&gt;&gt; great deal of efforts I couldn&#39;t find STAR executa=
ble or any folder that
<br>&gt;&gt;&gt;&gt; was/should have been cloned within the container. I ma=
y be missing something
<br>&gt;&gt;&gt;&gt; very trivial but I can&#39;t seem to work it out yet.
<br>&gt;&gt;&gt;&gt; Here is my Definition file:
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; BootStrap: yum
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; OSVersion: 7
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; MirrorURL:
<br>&gt;&gt;&gt;&gt; <a href=3D"http://mirror.centos.org/centos-%%7BOSVERSI=
ON%7D/%%7BOSVERSION%7D/os/$basearch/" target=3D"_blank" rel=3D"nofollow" on=
mousedown=3D"this.href=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fm=
irror.centos.org%2Fcentos-%25%257BOSVERSION%257D%2F%25%257BOSVERSION%257D%2=
Fos%2F%24basearch%2F\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHfH2HjUXZK-hJj=
m03wlVLzlhIsAw&#39;;return true;" onclick=3D"this.href=3D&#39;http://www.go=
ogle.com/url?q\x3dhttp%3A%2F%2Fmirror.centos.org%2Fcentos-%25%257BOSVERSION=
%257D%2F%25%257BOSVERSION%257D%2Fos%2F%24basearch%2F\x26sa\x3dD\x26sntz\x3d=
1\x26usg\x3dAFQjCNHfH2HjUXZK-hJjm03wlVLzlhIsAw&#39;;return true;">http://mi=
rror.centos.org/<wbr>centos-%{OSVERSION}/%{<wbr>OSVERSION}/os/$basearch/</a=
>
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; Include: yum wget
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # best to build up container using kickstart mentality=
.
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # ie, to add more packages to image,
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # re-run bootstrap command again.
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # bootstrap on existing image will build on top of it,=
 not overwriting
<br>&gt;&gt;&gt;&gt; it/restarting from scratch
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # singularity .def file is like kickstart file
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # unix commands can be run, but if there is any error,=
 the bootstrap
<br>&gt;&gt;&gt;&gt; process ends
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; %setup
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0# commands to be executed on host outside=
 container during bootstrap
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; %post
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # commands to be executed inside contain=
er during bootstrap
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 yum -y groupinstall &quot;Development To=
ols&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; # =C2=A0 =C2=A0# Clone the OpenMPI GitHub master branc=
h in current directory (on
<br>&gt;&gt;&gt;&gt; host)
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 git clone <a href=3D"https://github.com/=
open-mpi/ompi.git" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.h=
ref=3D&#39;https://www.google.com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Fopen-=
mpi%2Fompi.git\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNHkJkIiHe57PQPH8fjCJd=
0WODJBdw&#39;;return true;" onclick=3D"this.href=3D&#39;https://www.google.=
com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Fopen-mpi%2Fompi.git\x26sa\x3dD\x26s=
ntz\x3d1\x26usg\x3dAFQjCNHkJkIiHe57PQPH8fjCJd0WODJBdw&#39;;return true;">ht=
tps://github.com/open-mpi/<wbr>ompi.git</a>
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 cd ompi
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # Build OpenMPI in the working directory
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 ./<a href=3D"http://autogen.pl" target=
=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;http://www.goo=
gle.com/url?q\x3dhttp%3A%2F%2Fautogen.pl\x26sa\x3dD\x26sntz\x3d1\x26usg\x3d=
AFQjCNGEYzu34evgRVViE--Qmz6RqdG5Lw&#39;;return true;" onclick=3D"this.href=
=3D&#39;http://www.google.com/url?q\x3dhttp%3A%2F%2Fautogen.pl\x26sa\x3dD\x=
26sntz\x3d1\x26usg\x3dAFQjCNGEYzu34evgRVViE--Qmz6RqdG5Lw&#39;;return true;"=
>autogen.pl</a>
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 ./configure --prefix=3D/usr/local
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 make
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 make install
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; #
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # Instal &quot;zlib1g&quot; to aviod ins=
tallation error
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 yum -y install zlib-devel
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # Install STAR - =C2=A0get STAR source u=
sing git
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 git clone <a href=3D"https://github.com/=
alexdobin/STAR.git" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.=
href=3D&#39;https://www.google.com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Falex=
dobin%2FSTAR.git\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFSIcANP_fuVBCs3obg=
1KggJVxIKw&#39;;return true;" onclick=3D"this.href=3D&#39;https://www.googl=
e.com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Falexdobin%2FSTAR.git\x26sa\x3dD\x=
26sntz\x3d1\x26usg\x3dAFQjCNFSIcANP_fuVBCs3obg1KggJVxIKw&#39;;return true;"=
>https://github.com/alexdobin/<wbr>STAR.git</a>
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 cd STAR/source
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 echo &quot;Within STAR&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 echo &quot;pwd&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # Build STAR
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 make STAR
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 echo $PATH
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 STAR --version
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 echo &quot;OUT of Star Dir&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 STAR --version
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 /usr/bin/STAR --help
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 # create bind points for storage. =C2=A0=
Replace netid as appropriate
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 mkdir /extra/mnoon /rsgrps/zarnescu/
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0 exit 0
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0%runscript
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0# commands to be executed when the contai=
ner runs
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0echo &quot;Arguments received: $*&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0exec /usr/bin/python &quot;$@&quot;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0%test
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0# commands to be executed within containe=
r at close of bootstrap
<br>&gt;&gt;&gt;&gt; process
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0python --version
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; =C2=A0 =C2=A0STAR --version
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; I also tried to install (git clone) STAR using this al=
ternative method,
<br>&gt;&gt;&gt;&gt; below:
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; sudo singularity exec -w centosMPI_star.img
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; git clone <a href=3D"https://github.com/alexdobin/STAR=
.git" target=3D"_blank" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;ht=
tps://www.google.com/url?q\x3dhttps%3A%2F%2Fgithub.com%2Falexdobin%2FSTAR.g=
it\x26sa\x3dD\x26sntz\x3d1\x26usg\x3dAFQjCNFSIcANP_fuVBCs3obg1KggJVxIKw&#39=
;;return true;" onclick=3D"this.href=3D&#39;https://www.google.com/url?q\x3=
dhttps%3A%2F%2Fgithub.com%2Falexdobin%2FSTAR.git\x26sa\x3dD\x26sntz\x3d1\x2=
6usg\x3dAFQjCNFSIcANP_fuVBCs3obg1KggJVxIKw&#39;;return true;">https://githu=
b.com/alexdobin/<wbr>STAR.git</a>
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; cd STAR/source/
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; singularity exec ../../centosMPI_star.img make STAR
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; When I do
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; singularity shell centosMPI_star.img
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; I can&#39;t find STAR in any possible directory other =
than the clonned
<br>&gt;&gt;&gt;&gt; version on /home/mnoon
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; Can you please tell me what am I doing wrong? Also, Wh=
ere should the
<br>&gt;&gt;&gt;&gt; installed tool/executable be located with the containe=
r?
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; Regards,
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt; M
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt;&gt;
<br>&gt;&gt;&gt; --
<br>&gt;&gt;&gt; You received this message because you are subscribed to th=
e Google Groups
<br>&gt;&gt;&gt; &quot;singularity&quot; group.
<br>&gt;&gt;&gt; To unsubscribe from this group and stop receiving emails f=
rom it, send an
<br>&gt;&gt;&gt; email to <a>singu...@lbl.gov</a>.
<br>&gt;&gt;
<br>&gt;&gt;
<br>&gt;&gt;
<br>&gt;&gt;
<br>&gt;&gt; --
<br>&gt;&gt; Vanessa Villamia Sochat
<br>&gt;&gt; Stanford University &#39;16
<br>&gt;&gt; (603) 321-0676
<br>&gt;
<br>&gt; --
<br>&gt; You received this message because you are subscribed to the Google=
 Groups
<br>&gt; &quot;singularity&quot; group.
<br>&gt; To unsubscribe from this group and stop receiving emails from it, =
send an
<br>&gt; email to <a href=3D"javascript:" target=3D"_blank" gdf-obfuscated-=
mailto=3D"qvMvzdpgAAAJ" rel=3D"nofollow" onmousedown=3D"this.href=3D&#39;ja=
vascript:&#39;;return true;" onclick=3D"this.href=3D&#39;javascript:&#39;;r=
eturn true;">singularity...@lbl.<wbr>gov</a>.
<br></blockquote></div></div>
------=_Part_2178_236931932.1494367902138--

------=_Part_2177_1119059268.1494367902136--
