X-Received: by 10.107.18.226 with SMTP id 95mr4013279ios.82.1476486885949;
        Fri, 14 Oct 2016 16:14:45 -0700 (PDT)
X-BeenThere: singularity@lbl.gov
Received: by 10.107.34.19 with SMTP id i19ls3580929ioi.46.gmail; Fri, 14 Oct
 2016 16:14:44 -0700 (PDT)
X-Received: by 10.99.163.1 with SMTP id s1mr5010702pge.126.1476486884541;
        Fri, 14 Oct 2016 16:14:44 -0700 (PDT)
Return-Path: <r...@open-mpi.org>
Received: from fe4.lbl.gov (fe4.lbl.gov. [128.3.41.71])
        by mx.google.com with ESMTP id i3si16834121paz.172.2016.10.14.16.14.43
        for <singu...@lbl.gov>;
        Fri, 14 Oct 2016 16:14:44 -0700 (PDT)
Received-SPF: neutral (google.com: 192.185.51.59 is neither permitted nor denied by best guess record for domain of r...@open-mpi.org) client-ip=192.185.51.59;
Authentication-Results: mx.google.com;
       dkim=temperror (no key for signature) head...@open-mpi.org;
       spf=neutral (google.com: 192.185.51.59 is neither permitted nor denied by best guess record for domain of r...@open-mpi.org) smtp.mailfrom=r...@open-mpi.org
IronPort-PHdr: 9a23:wHUNRh9ehVi9mP9uRHKM819IXTAuvvDOBiVQ1KB80+wcTK2v8tzYMVDF4r011RmSDN+dt60P0rqempujcFRI2YyGvnEGfc4EfD4+ouJSoTYdBtWYA1bwNv/gYn9yNs1DUFh44yPzahANS47AblHf6ke/8SQVUk2mc1EkfKKpRcWL34ye7KObw9XreQJGhT6wM/tZDS6dikHvjPQQmpZoMa0ryxHE8TNicuVSwn50dxrIx06vrvqq+NZf1wgY+7d8tp0IbKPhYq5tSLVZCCghYXs04sL2sRDZTBeepWYaSXgciRFSAgLIxBXwWtH+tTWpiu0owyicMtDyRKo1RSXqu7xqThD1jC4dNiIo2GXdjop/i7wN8zy7oBkqiZTUa6mSLPd4O6bFfJUdX2ULFpJLVydpBZuxac4KF+tHOvxX+dqu72ASpAezUFH/TNjkzSVF0zqr0A==
X-Ironport-SBRS: 0.9
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A0FrAABWZgFYbTszucBcHgYMgwc1AQEBAQEdV3yDP6B6glaFB4xbgUYbJAMdAQaBdIIwgVoCghg4FAEBAQEBAQEBAQEBAhALDQkHGy+CMgQCAQIRBQQBOQoGAQEBAQEBAQEBIgEBAQEBAQEBAQEBAQEBAQEaAggFHgQPAw8BGgEBAQECARoBCB0BAQwdDwQLCxggAQYDAgIhEBURBggHBAEcAgKIFwMPCAW1IGeESQEBBYQ6DYNvAQEBBwEBAQEBAQEYCYVBOAZ9gT6CWIJHHIE2EQFJglcsgi+IQWSGF4R0hSY1AYYnhkyEek6EGYMUI4VpiGWEARODfw8PXCyCPywPHIFzUgeGDkcxgSgBAQE
X-IPAS-Result: A0FrAABWZgFYbTszucBcHgYMgwc1AQEBAQEdV3yDP6B6glaFB4xbgUYbJAMdAQaBdIIwgVoCghg4FAEBAQEBAQEBAQEBAhALDQkHGy+CMgQCAQIRBQQBOQoGAQEBAQEBAQEBIgEBAQEBAQEBAQEBAQEBAQEaAggFHgQPAw8BGgEBAQECARoBCB0BAQwdDwQLCxggAQYDAgIhEBURBggHBAEcAgKIFwMPCAW1IGeESQEBBYQ6DYNvAQEBBwEBAQEBAQEYCYVBOAZ9gT6CWIJHHIE2EQFJglcsgi+IQWSGF4R0hSY1AYYnhkyEek6EGYMUI4VpiGWEARODfw8PXCyCPywPHIFzUgeGDkcxgSgBAQE
X-IronPort-AV: E=Sophos;i="5.31,495,1473145200"; 
   d="scan'208,217";a="43184062"
Received: from gateway24.websitewelcome.com ([192.185.51.59])
  by fe4.lbl.gov with ESMTP; 14 Oct 2016 16:14:41 -0700
Received: from cm7.websitewelcome.com (cm7.websitewelcome.com [108.167.139.20])
	by gateway24.websitewelcome.com (Postfix) with ESMTP id 9260D88A76507
	for <singu...@lbl.gov>; Fri, 14 Oct 2016 18:14:40 -0500 (CDT)
Received: from gator4098.hostgator.com ([192.185.4.110])
	by cm7.websitewelcome.com with 
	id vbEf1t00P2NRPAw01bEgs0; Fri, 14 Oct 2016 18:14:40 -0500
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=open-mpi.org; s=default; h=In-Reply-To:To:References:Date:Subject:
	Mime-Version:Message-Id:Content-Type:From:Sender:Reply-To:Cc:
	Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:
	Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Id:
	List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive;
	 bh=HdTdiXfk9yNcwfG/dvDNZb/GW0w4BqxneWgcSXp2Qbk=; b=pZ/a6nZAT/NIJPbkgWbXuxkuV
	vxTwCiGluCirQ501XOxIKd1b1TdBvB7/ViyjqleZGN+6OeCUCEOEdzq2TJwjmI5miGJ9aNHRFz7AY
	7Xj9ykPcS1UhP9LorHxdtO8MwqJLUz/0aV20NRMgFuyhGqWl5pBL5H3VExGeO9kVAUAHB/ntSmJDw
	VF8Ks3tBzZtdg71LfKbKM5eConb4HAESCRfCKUfvheuDA7D/1XhM60Mb5CzGRnMDziyw1EoeeNDMF
	Uujlb7NzLN2j1pCDelUSjBqDW/dV3FA+3nmg0qyD3gAF4+m0u0ha9Mbj1VhjlbKG8mADN9cF3/CIL
	/OChHDwWA==;
Received: from [208.100.172.177] (port=54322 helo=[192.168.0.17])
	by gator4098.hostgator.com with esmtpsa (TLSv1:ECDHE-RSA-AES256-SHA:256)
	(Exim 4.87)
	(envelope-from <r...@open-mpi.org>)
	id 1bvBgU-00030O-T9
	for singu...@lbl.gov; Fri, 14 Oct 2016 18:14:39 -0500
From: "r...@open-mpi.org" <r...@open-mpi.org>
Content-Type: multipart/alternative; boundary="Apple-Mail=_9C936175-F375-4C85-941B-4FA724684128"
Message-Id: <17D943D8-2CF1-4B6D-A0A3-AA9479256ED0@open-mpi.org>
Mime-Version: 1.0 (Mac OS X Mail 9.3 \(3124\))
Subject: Re: [Singularity] Using singularity with MPI jobs
Date: Fri, 14 Oct 2016 16:14:37 -0700
References: <04cccf38-72fb-49ef-b010-15fb80e71e8e@lbl.gov> <CAN7etTyY_+ytGXpY4Te-=xED4zHNzz4Pg7xkB4ULj2sZ=gk2WA@mail.gmail.com> <6e2a6338-f64e-4f2a-894b-d40f1f646113@lbl.gov> <CAN7etTzk47mf9bCo2S6Wp-9sYpS6u3JfwVgN2koRpKcamDtRWw@mail.gmail.com> <8689886f-9da7-4f40-8769-06dbfc0a547f@lbl.gov> <CAN7etTz0wBEjGweZXC_pcOzEULW7hmeBr7zY5ndtsXOL88jSdA@mail.gmail.com> <5cd8d8d2-44f5-47ab-8e02-838942890090@lbl.gov> <CAN7etTyWS+UGZa_EHc-J5at6ULUtFe=Jh3qPXksJNs4-dS5dVg@mail.gmail.com> <CAN7etTwDa1oYx6K7sRxhATxT-4w+Z5A5rmpZrO7MPSFmdv2GPA@mail.gmail.com> <dc6c4870-0f65-4f97-b38c-180052ea1020@lbl.gov> <CAN7etTyR-NKepOEGf3YAASPTZERTLNC-RP4vpHO+QZxpsT7HGQ@mail.gmail.com>
To: singularity <singu...@lbl.gov>
In-Reply-To: <CAN7etTyR-NKepOEGf3YAASPTZERTLNC-RP4vpHO+QZxpsT7HGQ@mail.gmail.com>
X-Mailer: Apple Mail (2.3124)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gator4098.hostgator.com
X-AntiAbuse: Original Domain - lbl.gov
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - open-mpi.org
X-BWhitelist: no
X-Source-IP: 208.100.172.177
X-Exim-ID: 1bvBgU-00030O-T9
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Source-Sender: ([192.168.0.17]) [208.100.172.177]:54322
X-Source-Auth: r...@open-mpi.org
X-Email-Count: 5
X-Source-Cap: b21waXRlYW07b21waXRlYW07Z2F0b3I0MDk4Lmhvc3RnYXRvci5jb20=

--Apple-Mail=_9C936175-F375-4C85-941B-4FA724684128
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8


> On Oct 13, 2016, at 3:48 PM, Gregory M. Kurtzer <gmku...@lbl.gov> wrote:
>=20
>=20
>=20
> On Thu, Oct 13, 2016 at 8:56 AM, Steve Mehlberg <sgmeh...@gmail.com <mail=
to:sgmeh...@gmail.com>> wrote:
> Gregory,
>=20
> I didn't set anything concerning /dev/shm, so I'm not sure why the openmp=
i stuff gets there.
>=20
> I did a bit of checking, and I think openmpi conditionally uses /dev/shm/=
 based on local configuration of /tmp.=20

This is correct - if /tmp is a shared file system, for example, or too smal=
l to hold the backing file

> =20
>=20
> Our group (Atos/Bull) is doing development on the slurm product so that i=
s why we are interested in sbatch/srun vs mpirun.  We haven't found anythin=
g amiss with the invocation using slurm - but something is different from m=
pirun that is causing this issue.
>=20
> I am not an expert on PMIx, but as I understand it, if you are invoking u=
sing PMIx via `srun`, you need to have the SLURM PMIx implementation also i=
nstalled within the container, or that the OMPI build itself has to include=
 the PMIx support.
>=20
> Just to reiterate, does it work as expected when executing via mpirun?

Are you using the latest version of SLURM that has PMIx in it? If not, then=
 did you build OMPI --with-pmi so the PMI support was built, and did you in=
clude Slurm=E2=80=99s PMI libraries in your container? Otherwise, your MPI =
application won=E2=80=99t find the PMI support, and there is no way it can =
run using srun as the launcher.

> =20
>=20
> I'm interested in your comment about singularity support for openmpi.  Ar=
e you saying there are changes in openmpi for singularity that are not in t=
he stable released versions but are in the master branch?  Are any of these=
 changes specific to pmi2 or pmix?
>=20
> Yes, there are but I'm not sure if those changes are critical to the fail=
ure you are seeing now.

Correct, on both counts - the changes make things easier/more transparent f=
or a user to run a Singularity job, but don=E2=80=99t affect the basic func=
tionality.

> =20
>=20
> How can I make sure I'm running with an openmpi that has the "required" s=
ingularity changes?
>=20
> I believe currently, my schizo/personality fixes are only in the master b=
ranch of OMPI on GitHub at present, and it will be included in the next rel=
ease... But, again, I don't think this is the cause of what you are seeing.=
 I think it is a PMIx issue in that the PMI support is lacking inside the c=
ontainer. I am CC'ing Ralph with the hope that he can chime in.

There is nothing =E2=80=9Crequired=E2=80=9D in those changes - as I said ab=
ove, they only make things more convenient. For example, we automatically d=
etect that an application is actually a Singularity container, and invoke =
=E2=80=9Csingularity=E2=80=9D to execute it (with the appropriate envars se=
t).

So Singularity will work with OMPI as-is - you just have to manually do the=
 cmd line.

>=20
> Greg
>=20
>=20
> =20
>=20
> -Steve
>=20
> On Wednesday, October 12, 2016 at 8:46:29 PM UTC-6, Gregory M. Kurtzer wr=
ote:
> Hi Steve,
>=20
> Did you mention that it works if you call it via mpirun? If so, why don't=
 you just launch with mpirun/mpiexec? I'm not sure the startup invocation i=
s the same for srun even via pmi.
>=20
> Additionally, you may need to use OMPI from the master branch from GitHub=
. I just heard from Ralph that proper Singularity support has not been part=
 of an OMPI release yet.
>=20
> Thanks and hope that helps!
>=20
> On Wed, Oct 12, 2016 at 2:37 PM, Gregory M. Kurtzer <gmku...@ <>lbl.gov <=
http://lbl.gov/>> wrote:
> Weird how openmpi is actually throwing the session directory in /dev/shm.=
 I thought it usually uses /tmp.=20
>=20
> Did you set that somewhere or am I confused?
>=20
>=20
>=20
>=20
> On Wednesday, October 12, 2016, Steve Mehlberg <sgmeh...@ <>gmail.com <ht=
tp://gmail.com/>> wrote:
> Gregory,
>=20
> Yes, I was able to create a file on the host (non-root uid) in /dev/shm/t=
est.it <http://test.it/> and then view it in the singularity shell.
>=20
> And, there is some stuff there too, is that normal?
>=20
> bash-4.2$ ls /dev/shm -la
> total 4
> drwxrwxrwt   4 root      root   100 Oct 12 17:34 .
> drwxr-xr-x  20 root      root  3580 Oct  7 22:04 ..
> -rwxr-xr-x   1 mehlberg  user   880 Oct 12 17:34 test.it <http://test.it/=
>
> drwx------  47 root      root   940 Sep 30 17:19 openmpi-sessions-0@node9=
_0
> drwx------ 561 mehlberg  user 11220 Oct 12 15:39 openmpi-sessions-50342@n=
ode9_0
>=20
>=20
> Steve
>=20
> On Wednesday, October 12, 2016 at 11:18:20 AM UTC-6, Gregory M. Kurtzer w=
rote:
> Can you create a file in /dev/shm/... on the host, and then start a Singu=
larity container and confirm that you can see that file from within the con=
tainer please?
>=20
> Thanks!
>=20
> On Wed, Oct 12, 2016 at 9:45 AM, Steve Mehlberg <sg...@gmail.com <>> wrot=
e:
> Wow, that was very interesting.  I indeed get the same problem with the s=
ingularity -n1 (srun - one task).  I created the strace, then wanted to com=
pare the output to a non-singularity run.  But when I change the non-singul=
arity run to use anything other than the required number of tasks I get the=
 same error!  That seems to indicate that in the singularity run (srun with=
 the correct number of tasks) for some reason the MPI processes can't commu=
nicate with one another.=20
>=20
> The strace doesn't show much - or at least not much that means something =
to me.  The program seems to be going along outputting data then aborts wit=
h exit 6:
>=20
> [pid 13573] write(27, "                    suppress iso"..., 56) =3D 56
> [pid 13573] write(27, "                    ------------"..., 56) =3D 56
> [pid 13573] write(27, "      no isolated ocean grid poi"..., 36) =3D 36
> [pid 13573] open("/opt/mpi/openmpi-icc/2.0.0/share/openmpi/help-mpi-error=
s.txt", O_RDONLY) =3D 28
> [pid 13573] ioctl(28, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVIC=
E or TCGETS, 0x7ffec31d4d80) =3D -1 ENOTTY (Inappropriate ioctl for device)
> [pid 13573] fstat(28, {st_mode=3DS_IFREG|0644, st_size=3D1506, ...}) =3D =
0
> [pid 13573] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYM=
OUS, -1, 0) =3D 0x7f4b65f45000
> [pid 13573] read(28, "# -*- text -*-\n#\n# Copyright (c)"..., 8192) =3D 1=
506
> [pid 13573] read(28, "", 4096)          =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] munmap(0x7f4b65f45000, 4096) =3D 0
> [pid 13573] write(1, "[node9:13573] *** An error occ"..., 361) =3D 361
> [pid 13573] stat("/dev/shm/openmpi-sessions-50342@node9_0/37255/1/0", {st=
_mode=3DS_IFDIR|0700, st_size=3D40, ...}) =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0/372=
55/1/0", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 2 entries */, 32768) =3D 48
> [pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0/372=
55/1/0", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 2 entries */, 32768) =3D 48
> [pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] rmdir("/dev/shm/openmpi-sessions-50342@node9_0/37255/1/0") =
=3D 0
> [pid 13573] stat("/dev/shm/openmpi-sessions-50342@node9_0/37255/1", {st_m=
ode=3DS_IFDIR|0700, st_size=3D40, ...}) =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0/372=
55/1", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 2 entries */, 32768) =3D 48
> [pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0/372=
55/1", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 2 entries */, 32768) =3D 48
> [pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] rmdir("/dev/shm/openmpi-sessions-50342@node9_0/37255/1") =3D =
0
> [pid 13573] stat("/dev/shm/openmpi-sessions-50342@node9_0", {st_mode=3DS_=
IFDIR|0700, st_size=3D11080, ...}) =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0", O=
_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 554 entries */, 32768) =3D 17424
> [pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0
> [pid 13573] close(28)                   =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0", O=
_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D 28
> [pid 13573] getdents(28, /* 554 entries */, 32768) =3D 17424
> [pid 13573] close(28)                   =3D 0
> [pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-50342@node9_0/372=
55/1/0", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) =3D -1 ENOENT (No such =
file or directory)
> [pid 13573] exit_group(6)               =3D ?
> [pid 13574] +++ exited with 6 +++
> +++ exited with 6 +++
> srun: error: node9: task 0: Exited with exit code 6
>=20
>=20
>=20
> On Wednesday, October 12, 2016 at 8:53:12 AM UTC-6, Gregory M. Kurtzer wr=
ote:
> Can you replicate the problem with a -np 1? If so can you strace it from =
within the container:
>=20
> mpirun -np 1 singularity exec container.img strace -ff /path/to/mpi.exe (=
opts)
>=20
> Yes you can try Singularity 2.2. Please install it to a different path so=
 we can test side by side if you don't mind (if really like to debug this).=
=20
>=20
> Thanks!
>=20
>=20
>=20
> On Wednesday, October 12, 2016, Steve Mehlberg <sg...@gmail.com <>> wrote=
:
> Greg,
>=20
> I put a bind to /opt in the singularity.conf file so that /opt/intel is a=
vailable in the container.
>=20
> All the tasks (16) immediately exit code 6.  The job exits after about 4 =
seconds.  It normally takes about 16 minutes to run with the configuration =
I'm using and I do see the start of some output.
>=20
> I am using openmpi 2.0.0.
>=20
> I tried an "export SINGULARITY_NO_NAMESPACE_PID=3D1" in the bash script t=
hat runs all of this for each process and I still get the problem.
>=20
> [node12:9779] *** An error occurred in MPI_Isend
> [node12:9779] *** reported by process [3025076225 <>,0]
> [node12:9779] *** on communicator MPI COMMUNICATOR 3 DUP FROM 0
> [node12:9779] *** MPI_ERR_RANK: invalid rank
> [node12:9779] *** MPI_ERRORS_ARE_FATAL (processes in this communicator wi=
ll now abort,
> [node12:9779] ***    and potentially your MPI job)
>=20
> I can try 2.2 - do you think it might behave differently?
>=20
> Thanks for the ideas and help.
>=20
> Regards,
>=20
> Steve
>=20
> On Tuesday, October 11, 2016 at 8:19:47 PM UTC-6, Gregory M. Kurtzer wrot=
e:
> Hi Steve,
>=20
> I'm not sure at first glance, but just to touch on the basics... Is /opt/=
intel available from within the container? Do all tasks exit code 6, or jus=
t some of them?
>=20
> What version of OMPI are you using?
>=20
> I wonder if the PID namespace is causing a problem here... I'm not sure i=
t gets effectively disabled when running via srun and pmi. Can you export t=
he environment variable "SINGULARITY_NO_NAMESPACE_PID=3D1" in a place where=
 Singularity will pick it up definitively by all ranks? That will ensure th=
at the PID namespace is not being exported.
>=20
> Additionally, you could try version 2.2. I just released it, and by defau=
lt it does not unshare() out the PID namespace. But... It is the first rele=
ase in the 2.2 series so it may bring with it other issues that still need =
resolving.... But we should debug those too! :)
>=20
> Greg
>=20
>=20
>=20
> On Tue, Oct 11, 2016 at 2:40 PM, Steve Mehlberg <sg...@gmail.com <>> wrot=
e:
> Does singularity support MPI PMI-2 jobs?  I've had mixed success testing =
benchmark applications using a singularity container. =20
>=20
> Currently I'm struggling to get the NEMO benchmark to run using slurm 16.=
05 and pmi2.  I can run the exact same executable on bare metal with the sa=
me slurm, but I get Rank errors when I run using "srun --mpi=3Dpmi2 singula=
rity...".  The application aborts with an exit code 6.
>=20
> I tried pmix too, but that gets mpi aborts for both bare metal and singul=
arity.
>=20
> The only way I could get the NEMO application to compile was to use the i=
ntel compilers and mpi:
>=20
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/compilerva=
rs.sh intel64
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/ifortvars.=
sh intel64
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/iccvars.sh=
 intel64
> source /opt/mpi/openmpi-icc/2.0.0/bin/mpivars.sh
>=20
> It runs fine when I use mpirun with or without singularity.
>=20
> Example run/error:
>=20
> sbatch ...
> srun --mpi=3Dpmi2 -n16 singularity exec c7.img run.it <http://run.it/> > =
out_now
>=20
> .......
> srun: error: node11: tasks 0-7: Exited with exit code 6
> srun: error: node12: tasks 8-15: Exited with exit code 6
>=20
> $ cat run.it <http://run.it/>
> #!/bin/sh
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/compilerva=
rs.sh intel64
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/ifortvars.=
sh intel64
> source /opt/intel/compilers_and_libraries_2016.3.210/linux/bin/iccvars.sh=
 intel64
> source /opt/mpi/openmpi-icc/2.0.0/bin/mpivars.sh
> source env_bench
> export PATH=3D/opt/mpi/openmpi-icc/2.0.0/bin:/opt/pmix/1.1.5/bin:$PATH
> export LD_LIBRARY_PATH=3D/opt/openmpi-icc/2.0.0/lib:/opt/pmix/1.1.5/lib:$=
LD_LIBRARY_PATH
> export OMPI_MCA_btl=3Dself,sm,openib
>=20
> ./opa_8_2 namelist >out_now
>=20
> $ cat out_now
> [node12:29725] *** An error occurred in MPI_Isend
> [node12:29725] *** reported by process [3865116673 <>,0]
> [node12:29725] *** on communicator MPI COMMUNICATOR 3 DUP FROM 0
> [node12:29725] *** MPI_ERR_RANK: invalid rank
> [node12:29725] *** MPI_ERRORS_ARE_FATAL (processes in this communicator w=
ill now abort,
> [node12:29725] ***    and potentially your MPI job)
>=20
> I am running singularity 2.1 - any ideas?
>=20
> -Steve
>=20
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <>.
>=20
>=20
>=20
> --=20
> Gregory M. Kurtzer
> HPC Systems Architect and Technology Developer
> Lawrence Berkeley National Laboratory HPCS
> University of California Berkeley Research IT
> Singularity Linux Containers (http://singularity.lbl.gov/ <http://singula=
rity.lbl.gov/>)
> Warewulf Cluster Management (http://warewulf.lbl.gov/ <http://warewulf.lb=
l.gov/>)
> GitHub: https://github.com/gmkurtzer <https://github.com/gmkurtzer>, Twit=
ter: https://twitter.com/gmkurtzer <https://twitter.com/gmkurtzer>
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <>.
>=20
>=20
> --=20
> Gregory M. Kurtzer
> HPC Systems Architect and Technology Developer
> Lawrence Berkeley National Laboratory HPCS
> University of California Berkeley Research IT
> Singularity Linux Containers (http://singularity.lbl.gov/ <http://singula=
rity.lbl.gov/>)
> Warewulf Cluster Management (http://warewulf.lbl.gov/ <http://warewulf.lb=
l.gov/>)
> GitHub: https://github.com/gmkurtzer <https://github.com/gmkurtzer>, Twit=
ter: https://twitter.com/gmkurtzer <https://twitter.com/gmkurtzer>
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <>.
>=20
>=20
>=20
> --=20
> Gregory M. Kurtzer
> HPC Systems Architect and Technology Developer
> Lawrence Berkeley National Laboratory HPCS
> University of California Berkeley Research IT
> Singularity Linux Containers (http://singularity.lbl.gov/ <http://singula=
rity.lbl.gov/>)
> Warewulf Cluster Management (http://warewulf.lbl.gov/ <http://warewulf.lb=
l.gov/>)
> GitHub: https://github.com/gmkurtzer <https://github.com/gmkurtzer>, Twit=
ter: https://twitter.com/gmkurtzer <https://twitter.com/gmkurtzer>
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <>.
>=20
>=20
>=20
> --=20
> Gregory M. Kurtzer
> HPC Systems Architect and Technology Developer
> Lawrence Berkeley National Laboratory HPCS
> University of California Berkeley Research IT
> Singularity Linux Containers (http://singularity.lbl.gov/ <http://singula=
rity.lbl.gov/>)
> Warewulf Cluster Management (http://warewulf.lbl.gov/ <http://warewulf.lb=
l.gov/>)
> GitHub: https://github.com/gmkurtzer <https://github.com/gmkurtzer>, Twit=
ter: https://twitter.com/gmkurtzer <https://twitter.com/gmkurtzer>
>=20
> --=20
> You received this message because you are subscribed to the Google Groups=
 "singularity" group.
> To unsubscribe from this group and stop receiving emails from it, send an=
 email to singu...@lbl.gov <mailto:singu...@lbl.gov>.
>=20
>=20
>=20
> --=20
> Gregory M. Kurtzer
> HPC Systems Architect and Technology Developer
> Lawrence Berkeley National Laboratory HPCS
> University of California Berkeley Research IT
> Singularity Linux Containers (http://singularity.lbl.gov/ <http://singula=
rity.lbl.gov/>)
> Warewulf Cluster Management (http://warewulf.lbl.gov/ <http://warewulf.lb=
l.gov/>)
> GitHub: https://github.com/gmkurtzer <https://github.com/gmkurtzer>, Twit=
ter: https://twitter.com/gmkurtzer <https://twitter.com/gmkurtzer>

--Apple-Mail=_9C936175-F375-4C85-941B-4FA724684128
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=utf-8

<html><head><meta http-equiv=3D"Content-Type" content=3D"text/html charset=
=3Dutf-8"></head><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: s=
pace; -webkit-line-break: after-white-space;" class=3D""><br class=3D""><di=
v><blockquote type=3D"cite" class=3D""><div class=3D"">On Oct 13, 2016, at =
3:48 PM, Gregory M. Kurtzer &lt;<a href=3D"mailto:gmku...@lbl.gov" class=3D=
"">gmku...@lbl.gov</a>&gt; wrote:</div><br class=3D"Apple-interchange-newli=
ne"><div class=3D""><br class=3D"Apple-interchange-newline"><br style=3D"fo=
nt-family: Helvetica; font-size: 12px; font-style: normal; font-variant-cap=
s: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text=
-align: start; text-indent: 0px; text-transform: none; white-space: normal;=
 widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" class=3D=
""><div class=3D"gmail_quote" style=3D"font-family: Helvetica; font-size: 1=
2px; font-style: normal; font-variant-caps: normal; font-weight: normal; le=
tter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; t=
ext-transform: none; white-space: normal; widows: auto; word-spacing: 0px; =
-webkit-text-stroke-width: 0px;">On Thu, Oct 13, 2016 at 8:56 AM, Steve Meh=
lberg<span class=3D"Apple-converted-space">&nbsp;</span><span dir=3D"ltr" c=
lass=3D"">&lt;<a href=3D"mailto:sgmeh...@gmail.com" target=3D"_blank" class=
=3D"">sgmeh...@gmail.com</a>&gt;</span><span class=3D"Apple-converted-space=
">&nbsp;</span>wrote:<br class=3D""><blockquote class=3D"gmail_quote" style=
=3D"margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-left-color: r=
gb(204, 204, 204); border-left-style: solid; padding-left: 1ex;"><div dir=
=3D"ltr" class=3D"">Gregory,<br class=3D""><br class=3D"">I didn't set anyt=
hing concerning /dev/shm, so I'm not sure why the openmpi stuff gets there.=
<br class=3D""></div></blockquote><div class=3D""><br class=3D""></div><div=
 class=3D"">I did a bit of checking, and I think openmpi conditionally uses=
 /dev/shm/ based on local configuration of /tmp.&nbsp;</div></div></div></b=
lockquote><div><br class=3D""></div>This is correct - if /tmp is a shared f=
ile system, for example, or too small to hold the backing file</div><div><b=
r class=3D""><blockquote type=3D"cite" class=3D""><div class=3D""><div clas=
s=3D"gmail_quote" style=3D"font-family: Helvetica; font-size: 12px; font-st=
yle: normal; font-variant-caps: normal; font-weight: normal; letter-spacing=
: normal; orphans: auto; text-align: start; text-indent: 0px; text-transfor=
m: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text=
-stroke-width: 0px;"><div class=3D"">&nbsp;</div><blockquote class=3D"gmail=
_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-=
left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex=
;"><div dir=3D"ltr" class=3D""><br class=3D"">Our group (Atos/Bull) is doin=
g development on the slurm product so that is why we are interested in sbat=
ch/srun vs mpirun.&nbsp; We haven't found anything amiss with the invocatio=
n using slurm - but something is different from mpirun that is causing this=
 issue.<br class=3D""></div></blockquote><div class=3D""><br class=3D""></d=
iv><div class=3D"">I am not an expert on PMIx, but as I understand it, if y=
ou are invoking using PMIx via `srun`, you need to have the SLURM PMIx impl=
ementation also installed within the container, or that the OMPI build itse=
lf has to include the PMIx support.</div><div class=3D""><br class=3D""></d=
iv><div class=3D"">Just to reiterate, does it work as expected when executi=
ng via mpirun?</div></div></div></blockquote><div><br class=3D""></div>Are =
you using the latest version of SLURM that has PMIx in it? If not, then did=
 you build OMPI --with-pmi so the PMI support was built, and did you includ=
e Slurm=E2=80=99s PMI libraries in your container? Otherwise, your MPI appl=
ication won=E2=80=99t find the PMI support, and there is no way it can run =
using srun as the launcher.</div><div><br class=3D""><blockquote type=3D"ci=
te" class=3D""><div class=3D""><div class=3D"gmail_quote" style=3D"font-fam=
ily: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: nor=
mal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align=
: start; text-indent: 0px; text-transform: none; white-space: normal; widow=
s: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div class=3D"=
">&nbsp;</div><blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0p=
x 0.8ex; border-left-width: 1px; border-left-color: rgb(204, 204, 204); bor=
der-left-style: solid; padding-left: 1ex;"><div dir=3D"ltr" class=3D""><br =
class=3D"">I'm interested in your comment about singularity support for ope=
nmpi.&nbsp; Are you saying there are changes in openmpi for singularity tha=
t are not in the stable released versions but are in the master branch?&nbs=
p; Are any of these changes specific to pmi2 or pmix?<br class=3D""></div><=
/blockquote><div class=3D""><br class=3D""></div><div class=3D"">Yes, there=
 are but I'm not sure if those changes are critical to the failure you are =
seeing now.</div></div></div></blockquote><div><br class=3D""></div>Correct=
, on both counts - the changes make things easier/more transparent for a us=
er to run a Singularity job, but don=E2=80=99t affect the basic functionali=
ty.</div><div><br class=3D""><blockquote type=3D"cite" class=3D""><div clas=
s=3D""><div class=3D"gmail_quote" style=3D"font-family: Helvetica; font-siz=
e: 12px; font-style: normal; font-variant-caps: normal; font-weight: normal=
; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0p=
x; text-transform: none; white-space: normal; widows: auto; word-spacing: 0=
px; -webkit-text-stroke-width: 0px;"><div class=3D"">&nbsp;</div><blockquot=
e class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-wid=
th: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; p=
adding-left: 1ex;"><div dir=3D"ltr" class=3D""><br class=3D"">How can I mak=
e sure I'm running with an openmpi that has the "required" singularity chan=
ges?<br class=3D""></div></blockquote><div class=3D""><br class=3D""></div>=
<div class=3D"">I believe currently, my schizo/personality fixes are only i=
n the master branch of OMPI on GitHub at present, and it will be included i=
n the next release... But, again, I don't think this is the cause of what y=
ou are seeing. I think it is a PMIx issue in that the PMI support is lackin=
g inside the container. I am CC'ing Ralph with the hope that he can chime i=
n.</div></div></div></blockquote><div><br class=3D""></div>There is nothing=
 =E2=80=9Crequired=E2=80=9D in those changes - as I said above, they only m=
ake things more convenient. For example, we automatically detect that an ap=
plication is actually a Singularity container, and invoke =E2=80=9Csingular=
ity=E2=80=9D to execute it (with the appropriate envars set).</div><div><br=
 class=3D""></div><div>So Singularity will work with OMPI as-is - you just =
have to manually do the cmd line.</div><div><br class=3D""><blockquote type=
=3D"cite" class=3D""><div class=3D""><div class=3D"gmail_quote" style=3D"fo=
nt-family: Helvetica; font-size: 12px; font-style: normal; font-variant-cap=
s: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text=
-align: start; text-indent: 0px; text-transform: none; white-space: normal;=
 widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div cla=
ss=3D""><br class=3D""></div><div class=3D"">Greg</div><div class=3D""><br =
class=3D""></div><div class=3D""><br class=3D""></div><div class=3D"">&nbsp=
;</div><blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex=
; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-lef=
t-style: solid; padding-left: 1ex;"><div dir=3D"ltr" class=3D""><br class=
=3D"">-Steve<span class=3D""><br class=3D""><br class=3D"">On Wednesday, Oc=
tober 12, 2016 at 8:46:29 PM UTC-6, Gregory M. Kurtzer wrote:</span><blockq=
uote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-=
width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid=
; padding-left: 1ex;"><div dir=3D"ltr" class=3D"">Hi Steve,<div class=3D"">=
<br class=3D""></div><span class=3D""><div class=3D"">Did you mention that =
it works if you call it via mpirun? If so, why don't you just launch with m=
pirun/mpiexec? I'm not sure the startup invocation is the same for srun eve=
n via pmi.</div><div class=3D""><br class=3D""></div><div class=3D"">Additi=
onally, you may need to use OMPI from the master branch from GitHub. I just=
 heard from Ralph that proper Singularity support has not been part of an O=
MPI release yet.</div><div class=3D""><br class=3D""></div><div class=3D"">=
Thanks and hope that helps!</div></span></div><div class=3D""><br class=3D"=
"><div class=3D"gmail_quote"><span class=3D"">On Wed, Oct 12, 2016 at 2:37 =
PM, Gregory M. Kurtzer<span class=3D"Apple-converted-space">&nbsp;</span><s=
pan dir=3D"ltr" class=3D"">&lt;<a rel=3D"nofollow" class=3D"">gmku...@</a><=
a href=3D"http://lbl.gov/" class=3D"">lbl.gov</a>&gt;</span><span class=3D"=
Apple-converted-space">&nbsp;</span>wrote:<br class=3D""></span><blockquote=
 class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-widt=
h: 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; pa=
dding-left: 1ex;"><div dir=3D"ltr" class=3D""><span class=3D"">Weird how op=
enmpi is actually throwing the session directory in /dev/shm. I thought it =
usually uses /tmp.&nbsp;<div class=3D""><br class=3D""></div>Did you set th=
at somewhere or am I confused?</span><div class=3D""><div class=3D"h5"><div=
 class=3D""><div class=3D""><br class=3D""><div class=3D""><br class=3D""><=
/div><div class=3D""><br class=3D""><br class=3D"">On Wednesday, October 12=
, 2016, Steve Mehlberg &lt;<a rel=3D"nofollow" class=3D"">sgmeh...@</a><a h=
ref=3D"http://gmail.com/" class=3D"">gmail.com</a>&gt; wrote:<br class=3D""=
><blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; bord=
er-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-styl=
e: solid; padding-left: 1ex;"><div dir=3D"ltr" class=3D"">Gregory,<br class=
=3D""><br class=3D"">Yes, I was able to create a file on the host (non-root=
 uid) in /dev/shm/<a href=3D"http://test.it/" rel=3D"nofollow" target=3D"_b=
lank" class=3D"">test.it</a><span class=3D"Apple-converted-space">&nbsp;</s=
pan>and then view it in the singularity shell.<br class=3D""><br class=3D""=
>And, there is some stuff there too, is that normal?<br class=3D""><br clas=
s=3D""><span style=3D"font-family: 'courier new', monospace;" class=3D"">ba=
sh-4.2$ ls /dev/shm -la<br class=3D"">total 4<br class=3D"">drwxrwxrwt&nbsp=
;&nbsp; 4 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; 100 Oct 12 17=
:34 .<br class=3D"">drwxr-xr-x&nbsp; 20 root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
root&nbsp; 3580 Oct&nbsp; 7 22:04 ..<br class=3D"">-rwxr-xr-x&nbsp;&nbsp; 1=
 mehlberg&nbsp; user &nbsp; 880 Oct 12 17:34<span class=3D"Apple-converted-=
space">&nbsp;</span><a href=3D"http://test.it/" rel=3D"nofollow" target=3D"=
_blank" class=3D"">test.it</a><br class=3D"">drwx------&nbsp; 47 root&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp; 940 Sep 30 17:19 openmpi-sessions=
-0@node9_0<br class=3D"">drwx------ 561 mehlberg&nbsp; user 11220 Oct 12 15=
:39 openmpi-sessions-50342@node9_0</span><br class=3D""><br class=3D""><br =
class=3D"">Steve<br class=3D""><br class=3D"">On Wednesday, October 12, 201=
6 at 11:18:20 AM UTC-6, Gregory M. Kurtzer wrote:<blockquote class=3D"gmail=
_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-width: 1px; border-=
left-color: rgb(204, 204, 204); border-left-style: solid; padding-left: 1ex=
;"><div dir=3D"ltr" class=3D"">Can you create a file in /dev/shm/... on the=
 host, and then start a Singularity container and confirm that you can see =
that file from within the container please?<div class=3D""><br class=3D""><=
/div><div class=3D"">Thanks!</div></div><div class=3D""><br class=3D""><div=
 class=3D"gmail_quote">On Wed, Oct 12, 2016 at 9:45 AM, Steve Mehlberg<span=
 class=3D"Apple-converted-space">&nbsp;</span><span dir=3D"ltr" class=3D"">=
&lt;<a rel=3D"nofollow" class=3D"">sg...@gmail.com</a>&gt;</span><span clas=
s=3D"Apple-converted-space">&nbsp;</span>wrote:<br class=3D""><blockquote c=
lass=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left-width:=
 1px; border-left-color: rgb(204, 204, 204); border-left-style: solid; padd=
ing-left: 1ex;"><div dir=3D"ltr" class=3D"">Wow, that was very interesting.=
&nbsp; I indeed get the same problem with the singularity -n1 (srun - one t=
ask).&nbsp; I created the strace, then wanted to compare the output to a no=
n-singularity run.&nbsp; But when I change the non-singularity run to use a=
nything other than the required number of tasks I get the same error!&nbsp;=
 That seems to indicate that in the singularity run (srun with the correct =
number of tasks) for some reason the MPI processes can't communicate with o=
ne another.<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D"=
"><br class=3D"">The strace doesn't show much - or at least not much that m=
eans something to me.&nbsp; The program seems to be going along outputting =
data then aborts with exit 6:<br class=3D""><br class=3D""><span style=3D"f=
ont-family: 'courier new', monospace;" class=3D"">[pid 13573] write(27, "&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; suppress iso"..., 56) =3D 56<br class=
=3D"">[pid 13573] write(27, "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ------=
------"..., 56) =3D 56<br class=3D"">[pid 13573] write(27, "&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; no isolated ocean grid poi"..., 36) =3D 36<br class=3D"">[p=
id 13573] open("/opt/mpi/openmpi-icc/2.0<wbr class=3D"">.0/share/openmpi/he=
lp-mpi-erro<wbr class=3D"">rs.txt", O_RDONLY) =3D 28<br class=3D"">[pid 135=
73] ioctl(28, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVICE or TCGET=
S, 0x7ffec31d4d80) =3D -1 ENOTTY (Inappropriate ioctl for device)<br class=
=3D"">[pid 13573] fstat(28, {st_mode=3DS_IFREG|0644, st_size=3D1506, ...}) =
=3D 0<br class=3D"">[pid 13573] mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_=
PRIVATE|MAP_ANONYMOUS, -1, 0) =3D 0x7f4b65f45000<br class=3D"">[pid 13573] =
read(28, "# -*- text -*-\n#\n# Copyright (c)"..., 8192) =3D 1506<br class=
=3D"">[pid 13573] read(28, "", 4096)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] close(28)&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] munmap(0x7f4b65f45000, 4096=
) =3D 0<br class=3D"">[pid 13573] write(1, "[node9:13573] *** An error occ"=
..., 361) =3D 361<br class=3D"">[pid 13573] stat("/dev/shm/openmpi-session<=
wbr class=3D"">s-50342@node9_0/37255/1/0", {st_mode=3DS_IFDIR|0700, st_size=
=3D40, ...}) =3D 0<br class=3D"">[pid 13573] openat(AT_FDCWD, "/dev/shm/ope=
nmpi-sessions-503<wbr class=3D"">42@node9_0/37255/1/0", O_RDONLY|O_NONBLOCK=
|O_DIRECTOR<wbr class=3D"">Y|O_CLOEXEC) =3D 28<br class=3D"">[pid 13573] ge=
tdents(28, /* 2 entries */, 32768) =3D 48<br class=3D"">[pid 13573] getdent=
s(28, /* 0 entries */, 32768) =3D 0<br class=3D"">[pid 13573] close(28)&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] openat(AT_FDC=
WD, "/dev/shm/openmpi-sessions-503<wbr class=3D"">42@node9_0/37255/1/0", O_=
RDONLY|O_NONBLOCK|O_DIRECTOR<wbr class=3D"">Y|O_CLOEXEC) =3D 28<br class=3D=
"">[pid 13573] getdents(28, /* 2 entries */, 32768) =3D 48<br class=3D"">[p=
id 13573] getdents(28, /* 0 entries */, 32768) =3D 0<br class=3D"">[pid 135=
73] close(28)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 135=
73] rmdir("/dev/shm/openmpi-sessio<wbr class=3D"">ns-50342@node9_0/37255/1/=
0") =3D 0<br class=3D"">[pid 13573] stat("/dev/shm/openmpi-session<wbr clas=
s=3D"">s-50342@node9_0/37255/1", {st_mode=3DS_IFDIR|0700, st_size=3D40, ...=
}) =3D 0<br class=3D"">[pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessi=
ons-503<wbr class=3D"">42@node9_0/37255/1", O_RDONLY|O_NONBLOCK|O_DIRECTOR<=
wbr class=3D"">Y|O_CLOEXEC) =3D 28<br class=3D"">[pid 13573] getdents(28, /=
* 2 entries */, 32768) =3D 48<br class=3D"">[pid 13573] getdents(28, /* 0 e=
ntries */, 32768) =3D 0<br class=3D"">[pid 13573] close(28)&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] openat(AT_FDCWD, "/dev/sh=
m/openmpi-sessions-503<wbr class=3D"">42@node9_0/37255/1", O_RDONLY|O_NONBL=
OCK|O_DIRECTOR<wbr class=3D"">Y|O_CLOEXEC) =3D 28<br class=3D"">[pid 13573]=
 getdents(28, /* 2 entries */, 32768) =3D 48<br class=3D"">[pid 13573] getd=
ents(28, /* 0 entries */, 32768) =3D 0<br class=3D"">[pid 13573] close(28)&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] rmdir("/de=
v/shm/openmpi-sessio<wbr class=3D"">ns-50342@node9_0/37255/1") =3D 0<br cla=
ss=3D"">[pid 13573] stat("/dev/shm/openmpi-session<wbr class=3D"">s-50342@n=
ode9_0", {st_mode=3DS_IFDIR|0700, st_size=3D11080, ...}) =3D 0<br class=3D"=
">[pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-503<wbr class=3D"=
">42@node9_0", O_RDONLY|O_NONBLOCK|O_DIRECTOR<wbr class=3D"">Y|O_CLOEXEC) =
=3D 28<br class=3D"">[pid 13573] getdents(28, /* 554 entries */, 32768) =3D=
 17424<br class=3D"">[pid 13573] getdents(28, /* 0 entries */, 32768) =3D 0=
<br class=3D"">[pid 13573] close(28)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =3D 0=
<br class=3D"">[pid 13573] openat(AT_FDCWD, "/dev/shm/openmpi-sessions-503<=
wbr class=3D"">42@node9_0", O_RDONLY|O_NONBLOCK|O_DIRECTOR<wbr class=3D"">Y=
|O_CLOEXEC) =3D 28<br class=3D"">[pid 13573] getdents(28, /* 554 entries */=
, 32768) =3D 17424<br class=3D"">[pid 13573] close(28)&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp; =3D 0<br class=3D"">[pid 13573] openat(AT_FDCWD, "/dev/shm/ope=
nmpi-sessions-503<wbr class=3D"">42@node9_0/37255/1/0", O_RDONLY|O_NONBLOCK=
|O_DIRECTOR<wbr class=3D"">Y|O_CLOEXEC) =3D -1 ENOENT (No such file or dire=
ctory)<br class=3D"">[pid 13573] exit_group(6)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =3D ?<br class=3D""=
>[pid 13574] +++ exited with 6 +++<br class=3D"">+++ exited with 6 +++<br c=
lass=3D"">srun: error: node9: task 0: Exited with exit code 6</span><span c=
lass=3D""><br class=3D""><br class=3D""><br class=3D""><br class=3D"">On We=
dnesday, October 12, 2016 at 8:53:12 AM UTC-6, Gregory M. Kurtzer wrote:</s=
pan><blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; b=
order-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left-s=
tyle: solid; padding-left: 1ex;"><span class=3D"">Can you replicate the pro=
blem with a -np 1? If so can you strace it from within the container:<div c=
lass=3D""><br class=3D""></div><div class=3D"">mpirun -np 1 singularity exe=
c container.img strace -ff /path/to/mpi.exe (opts)<span class=3D""></span><=
/div><div class=3D""><br class=3D""></div><div class=3D"">Yes you can try S=
ingularity 2.2. Please install it to a different path so we can test side b=
y side if you don't mind (if really like to debug this).&nbsp;</div><div cl=
ass=3D""><br class=3D""></div><div class=3D"">Thanks!</div><div class=3D"">=
<br class=3D""></div></span><div class=3D""><div class=3D""><div class=3D""=
><br class=3D""><br class=3D"">On Wednesday, October 12, 2016, Steve Mehlbe=
rg &lt;<a rel=3D"nofollow" class=3D"">sg...@gmail.com</a>&gt; wrote:<br cla=
ss=3D""><blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8e=
x; border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-le=
ft-style: solid; padding-left: 1ex;"><div dir=3D"ltr" class=3D"">Greg,<br c=
lass=3D""><br class=3D"">I put a bind to /opt in the singularity.conf file =
so that /opt/intel is available in the container.<br class=3D""><br class=
=3D"">All the tasks (16) immediately exit code 6.&nbsp; The job exits after=
 about 4 seconds.&nbsp; It normally takes about 16 minutes to run with the =
configuration I'm using and I do see the start of some output.<br class=3D"=
"><br class=3D"">I am using openmpi 2.0.0.<br class=3D""><br class=3D"">I t=
ried an "export<span class=3D"Apple-converted-space">&nbsp;</span><span cla=
ss=3D"">SINGULARITY_NO_NAMESPACE_</span><span class=3D"">PID=3D1<wbr class=
=3D"">" in the bash script that runs all of this for each process and I sti=
ll get the problem.</span><br class=3D""><br class=3D"">[node12:9779] *** A=
n error occurred in MPI_Isend<br class=3D"">[node12:9779] *** reported by p=
rocess<span class=3D"Apple-converted-space">&nbsp;</span><a value=3D"+13025=
076225" class=3D"">[3025076225</a>,0]<br class=3D"">[node12:9779] *** on co=
mmunicator MPI COMMUNICATOR 3 DUP FROM 0<br class=3D"">[node12:9779] *** MP=
I_ERR_RANK: invalid rank<br class=3D"">[node12:9779] *** MPI_ERRORS_ARE_FAT=
AL (processes in this communicator will now abort,<br class=3D"">[node12:97=
79] ***&nbsp;&nbsp;&nbsp; and potentially your MPI job)<br class=3D""><br c=
lass=3D"">I can try 2.2 - do you think it might behave differently?<br clas=
s=3D""><br class=3D"">Thanks for the ideas and help.<br class=3D""><br clas=
s=3D"">Regards,<br class=3D""><br class=3D"">Steve<br class=3D""><br class=
=3D"">On Tuesday, October 11, 2016 at 8:19:47 PM UTC-6, Gregory M. Kurtzer =
wrote:<blockquote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex;=
 border-left-width: 1px; border-left-color: rgb(204, 204, 204); border-left=
-style: solid; padding-left: 1ex;"><div dir=3D"ltr" class=3D"">Hi Steve,<di=
v class=3D""><br class=3D""></div><div class=3D"">I'm not sure at first gla=
nce, but just to touch on the basics... Is /opt/intel available from within=
 the container? Do all tasks exit code 6, or just some of them?</div><div c=
lass=3D""><br class=3D""></div><div class=3D"">What version of OMPI are you=
 using?</div><div class=3D""><br class=3D""></div><div class=3D"">I wonder =
if the PID namespace is causing a problem here... I'm not sure it gets effe=
ctively disabled when running via srun and pmi. Can you export the environm=
ent variable "<span class=3D"">SINGULARITY_NO_NAMESPACE_</span><span class=
=3D"">PID=3D<wbr class=3D"">1" in a place where Singularity will pick it up=
 definitively by all ranks? That will ensure that the PID namespace is not =
being exported.</span></div><div class=3D""><span class=3D""><br class=3D""=
></span></div><div class=3D""><span class=3D"">Additionally, you could try =
version 2.2. I just released it, and by default it does not unshare() out t=
he PID namespace. But... It is the first release in the 2.2 series so it ma=
y bring with it other issues that still need resolving.... But we should de=
bug those too! :)</span></div><div class=3D""><span class=3D""><br class=3D=
""></span></div><div class=3D"">Greg</div><div class=3D""><br class=3D""></=
div><div class=3D""><br class=3D""></div></div><div class=3D""><br class=3D=
""><div class=3D"gmail_quote">On Tue, Oct 11, 2016 at 2:40 PM, Steve Mehlbe=
rg<span class=3D"Apple-converted-space">&nbsp;</span><span dir=3D"ltr" clas=
s=3D"">&lt;<a rel=3D"nofollow" class=3D"">sg...@gmail.com</a>&gt;</span><sp=
an class=3D"Apple-converted-space">&nbsp;</span>wrote:<br class=3D""><block=
quote class=3D"gmail_quote" style=3D"margin: 0px 0px 0px 0.8ex; border-left=
-width: 1px; border-left-color: rgb(204, 204, 204); border-left-style: soli=
d; padding-left: 1ex;"><div dir=3D"ltr" class=3D"">Does singularity support=
 MPI PMI-2 jobs?&nbsp; I've had mixed success testing benchmark application=
s using a singularity container.&nbsp;<span class=3D"Apple-converted-space"=
>&nbsp;</span><br class=3D""><br class=3D"">Currently I'm struggling to get=
 the NEMO benchmark to run using slurm 16.05 and pmi2.&nbsp; I can run the =
exact same executable on bare metal with the same slurm, but I get Rank err=
ors when I run using "srun --mpi=3Dpmi2 singularity...".&nbsp; The applicat=
ion aborts with an exit code 6.<br class=3D""><br class=3D"">I tried pmix t=
oo, but that gets mpi aborts for both bare metal and singularity.<br class=
=3D""><br class=3D"">The only way I could get the NEMO application to compi=
le was to use the intel compilers and mpi:<br class=3D""><br class=3D""><sp=
an style=3D"font-size: 12pt; font-family: 'Times New Roman', serif;" class=
=3D"">source /opt/intel/compilers_and_libra<wbr class=3D"">ries_2016.3.210/=
linux/bin/<wbr class=3D"">compilervars.sh intel64<br class=3D"">source /opt=
/intel/compilers_and_libra<wbr class=3D"">ries_2016.3.210/linux/bin/<wbr cl=
ass=3D"">ifortvars.sh intel64<br class=3D"">source /opt/intel/compilers_and=
_libra<wbr class=3D"">ries_2016.3.210/linux/bin/<wbr class=3D"">iccvars.sh =
intel64<br class=3D"">source /opt/mpi/openmpi-icc/2.0.0/bin<wbr class=3D"">=
/mpivars.sh<br class=3D""><br class=3D""></span>It runs fine when I use mpi=
run with or without singularity.<br class=3D""><br class=3D"">Example run/e=
rror:<br class=3D""><br class=3D"">sbatch ...<br class=3D"">srun --mpi=3Dpm=
i2 -n16 singularity exec c7.img<span class=3D"Apple-converted-space">&nbsp;=
</span><a href=3D"http://run.it/" rel=3D"nofollow" target=3D"_blank" class=
=3D"">run.it</a><span class=3D"Apple-converted-space">&nbsp;</span>&gt; out=
_now<br class=3D""><br class=3D"">.......<br class=3D"">srun: error: node11=
: tasks 0-7: Exited with exit code 6<br class=3D"">srun: error: node12: tas=
ks 8-15: Exited with exit code 6<br class=3D""><br class=3D"">$ cat<span cl=
ass=3D"Apple-converted-space">&nbsp;</span><a href=3D"http://run.it/" rel=
=3D"nofollow" target=3D"_blank" class=3D"">run.it</a><br class=3D"">#!/bin/=
sh<br class=3D"">source /opt/intel/compilers_and_libra<wbr class=3D"">ries_=
2016.3.210/linux/bin/<wbr class=3D"">compilervars.sh intel64<br class=3D"">=
source /opt/intel/compilers_and_libra<wbr class=3D"">ries_2016.3.210/linux/=
bin/<wbr class=3D"">ifortvars.sh intel64<br class=3D"">source /opt/intel/co=
mpilers_and_libra<wbr class=3D"">ries_2016.3.210/linux/bin/<wbr class=3D"">=
iccvars.sh intel64<br class=3D"">source /opt/mpi/openmpi-icc/2.0.0/bin<wbr =
class=3D"">/mpivars.sh<br class=3D"">source env_bench<br class=3D"">export =
PATH=3D/opt/mpi/openmpi-icc/2.0.<wbr class=3D"">0/bin:/opt/pmix/1.1.5/bin:$=
PAT<wbr class=3D"">H<br class=3D"">export LD_LIBRARY_PATH=3D/opt/openmpi-i<=
wbr class=3D"">cc/2.0.0/lib:/opt/pmix/1.1.5/l<wbr class=3D"">ib:$LD_LIBRARY=
_PATH<br class=3D"">export OMPI_MCA_btl=3Dself,sm,openib<br class=3D""><br =
class=3D"">./opa_8_2 namelist &gt;out_now<br class=3D""><br class=3D"">$ ca=
t out_now<br class=3D"">[node12:29725] *** An error occurred in MPI_Isend<b=
r class=3D"">[node12:29725] *** reported by process<span class=3D"Apple-con=
verted-space">&nbsp;</span><a value=3D"+13865116673" class=3D"">[3865116673=
</a>,0]<br class=3D"">[node12:29725] *** on communicator MPI COMMUNICATOR 3=
 DUP FROM 0<br class=3D"">[node12:29725] *** MPI_ERR_RANK: invalid rank<br =
class=3D"">[node12:29725] *** MPI_ERRORS_ARE_FATAL (processes in this commu=
nicator will now abort,<br class=3D"">[node12:29725] ***&nbsp;&nbsp;&nbsp; =
and potentially your MPI job)<br class=3D""><br class=3D"">I am running sin=
gularity 2.1 - any ideas?<span class=3D""><font color=3D"#888888" class=3D"=
"><br class=3D""><br class=3D"">-Steve<br class=3D""><br class=3D""></font>=
</span></div><span class=3D""><font color=3D"#888888" class=3D""><div class=
=3D""><br class=3D"webkit-block-placeholder"></div>--<span class=3D"Apple-c=
onverted-space">&nbsp;</span><br class=3D"">You received this message becau=
se you are subscribed to the Google Groups "singularity" group.<br class=3D=
"">To unsubscribe from this group and stop receiving emails from it, send a=
n email to<span class=3D"Apple-converted-space">&nbsp;</span><a rel=3D"nofo=
llow" class=3D"">singu...@lbl.gov</a>.<br class=3D""></font></span></blockq=
uote></div><br class=3D""><br clear=3D"all" class=3D""><div class=3D""><br =
class=3D""></div>--<span class=3D"Apple-converted-space">&nbsp;</span><br c=
lass=3D""><div class=3D""><div dir=3D"ltr" class=3D""><div class=3D""><div =
dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr" class=3D""><div cla=
ss=3D""><div dir=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""><div dir=3D=
"ltr" class=3D""><div class=3D"">Gregory M. Kurtzer</div><div class=3D"">HP=
C Systems Architect and Technology Developer</div><div class=3D"">Lawrence =
Berkeley National Laboratory HPCS<br class=3D"">University of California Be=
rkeley Research IT<br class=3D"">Singularity Linux Containers&nbsp;(<a href=
=3D"http://singularity.lbl.gov/" rel=3D"nofollow" target=3D"_blank" class=
=3D"">http://singularity<wbr class=3D"">.lbl.gov/</a>)</div><div class=3D""=
>Warewulf Cluster Management&nbsp;(<a href=3D"http://warewulf.lbl.gov/" rel=
=3D"nofollow" target=3D"_blank" class=3D"">http://warewulf.lb<wbr class=3D"=
">l.gov/</a>)</div><div class=3D"">GitHub:&nbsp;<a href=3D"https://github.c=
om/gmkurtzer" rel=3D"nofollow" target=3D"_blank" class=3D"">https://github.=
com/gmk<wbr class=3D"">urtzer</a>,&nbsp;<span style=3D"font-size: 12.8px;" =
class=3D"">Twitter:&nbsp;</span><a href=3D"https://twitter.com/gmkurtzer" r=
el=3D"nofollow" target=3D"_blank" style=3D"font-size: 12.8px;" class=3D"">h=
ttps://twitt<wbr class=3D"">er.com/gmkurtzer</a></div></div></div></div></d=
iv></div></div></div></div></div></div></div></blockquote></div><div class=
=3D""><br class=3D"webkit-block-placeholder"></div>--<span class=3D"Apple-c=
onverted-space">&nbsp;</span><br class=3D"">You received this message becau=
se you are subscribed to the Google Groups "singularity" group.<br class=3D=
"">To unsubscribe from this group and stop receiving emails from it, send a=
n email to<span class=3D"Apple-converted-space">&nbsp;</span><a class=3D"">=
singularity+unsubscribe@lbl.go<wbr class=3D"">v</a>.<br class=3D""></blockq=
uote></div><br class=3D""><br class=3D"">--<span class=3D"Apple-converted-s=
pace">&nbsp;</span><br class=3D""><div dir=3D"ltr" class=3D""><div class=3D=
""><div dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr" class=3D"">=
<div class=3D""><div dir=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""><di=
v dir=3D"ltr" class=3D""><div class=3D"">Gregory M. Kurtzer</div><div class=
=3D"">HPC Systems Architect and Technology Developer</div><div class=3D"">L=
awrence Berkeley National Laboratory HPCS<br class=3D"">University of Calif=
ornia Berkeley Research IT<br class=3D"">Singularity Linux Containers&nbsp;=
(<a href=3D"http://singularity.lbl.gov/" rel=3D"nofollow" target=3D"_blank"=
 class=3D"">http://singularity<wbr class=3D"">.lbl.gov/</a>)</div><div clas=
s=3D"">Warewulf Cluster Management&nbsp;(<a href=3D"http://warewulf.lbl.gov=
/" rel=3D"nofollow" target=3D"_blank" class=3D"">http://warewulf.lb<wbr cla=
ss=3D"">l.gov/</a>)</div><div class=3D"">GitHub:&nbsp;<a href=3D"https://gi=
thub.com/gmkurtzer" rel=3D"nofollow" target=3D"_blank" class=3D"">https://g=
ithub.com/gmk<wbr class=3D"">urtzer</a>,&nbsp;<span style=3D"font-size: 12.=
8px;" class=3D"">Twitter:&nbsp;</span><a href=3D"https://twitter.com/gmkurt=
zer" rel=3D"nofollow" target=3D"_blank" style=3D"font-size: 12.8px;" class=
=3D"">https://twitt<wbr class=3D"">er.com/gmkurtzer</a></div></div></div></=
div></div></div></div></div></div></div><br class=3D""></div></div></blockq=
uote></div><div class=3D""><div class=3D""><div class=3D""><br class=3D"web=
kit-block-placeholder"></div>--<span class=3D"Apple-converted-space">&nbsp;=
</span><br class=3D"">You received this message because you are subscribed =
to the Google Groups "singularity" group.<br class=3D"">To unsubscribe from=
 this group and stop receiving emails from it, send an email to<span class=
=3D"Apple-converted-space">&nbsp;</span><a rel=3D"nofollow" class=3D"">sing=
u...@lbl.gov</a>.<br class=3D""></div></div></blockquote></div><br class=3D=
""><br clear=3D"all" class=3D""><div class=3D""><br class=3D""></div>--<spa=
n class=3D"Apple-converted-space">&nbsp;</span><br class=3D""><div class=3D=
""><div dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr" class=3D"">=
<div class=3D""><div dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr=
" class=3D""><div dir=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""><div c=
lass=3D"">Gregory M. Kurtzer</div><div class=3D"">HPC Systems Architect and=
 Technology Developer</div><div class=3D"">Lawrence Berkeley National Labor=
atory HPCS<br class=3D"">University of California Berkeley Research IT<br c=
lass=3D"">Singularity Linux Containers&nbsp;(<a href=3D"http://singularity.=
lbl.gov/" rel=3D"nofollow" target=3D"_blank" class=3D"">http://singularity<=
wbr class=3D"">.lbl.gov/</a>)</div><div class=3D"">Warewulf Cluster Managem=
ent&nbsp;(<a href=3D"http://warewulf.lbl.gov/" rel=3D"nofollow" target=3D"_=
blank" class=3D"">http://warewulf.lb<wbr class=3D"">l.gov/</a>)</div><div c=
lass=3D"">GitHub:&nbsp;<a href=3D"https://github.com/gmkurtzer" rel=3D"nofo=
llow" target=3D"_blank" class=3D"">https://github.com/gmk<wbr class=3D"">ur=
tzer</a>,&nbsp;<span style=3D"font-size: 12.8px;" class=3D"">Twitter:&nbsp;=
</span><a href=3D"https://twitter.com/gmkurtzer" rel=3D"nofollow" target=3D=
"_blank" style=3D"font-size: 12.8px;" class=3D"">https://twitt<wbr class=3D=
"">er.com/gmkurtzer</a></div></div></div></div></div></div></div></div></di=
v></div></div></div></blockquote></div><div class=3D""><br class=3D"webkit-=
block-placeholder"></div>--<span class=3D"Apple-converted-space">&nbsp;</sp=
an><br class=3D"">You received this message because you are subscribed to t=
he Google Groups "singularity" group.<br class=3D"">To unsubscribe from thi=
s group and stop receiving emails from it, send an email to<span class=3D"A=
pple-converted-space">&nbsp;</span><a class=3D"">singularity+unsubscribe@lb=
l.go<wbr class=3D"">v</a>.<br class=3D""></blockquote></div></div></div></d=
iv></div></div></blockquote></div><div class=3D""><div class=3D"h5"><br cla=
ss=3D""><br clear=3D"all" class=3D""><div class=3D""><br class=3D""></div>-=
-<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D""><div cla=
ss=3D""><div dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr" class=
=3D""><div class=3D""><div dir=3D"ltr" class=3D""><div class=3D""><div dir=
=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""=
><div class=3D"">Gregory M. Kurtzer</div><div class=3D"">HPC Systems Archit=
ect and Technology Developer</div><div class=3D"">Lawrence Berkeley Nationa=
l Laboratory HPCS<br class=3D"">University of California Berkeley Research =
IT<br class=3D"">Singularity Linux Containers&nbsp;(<a href=3D"http://singu=
larity.lbl.gov/" rel=3D"nofollow" target=3D"_blank" class=3D"">http://singu=
larity<wbr class=3D"">.lbl.gov/</a>)</div><div class=3D"">Warewulf Cluster =
Management&nbsp;(<a href=3D"http://warewulf.lbl.gov/" rel=3D"nofollow" targ=
et=3D"_blank" class=3D"">http://warewulf.lb<wbr class=3D"">l.gov/</a>)</div=
><div class=3D"">GitHub:&nbsp;<a href=3D"https://github.com/gmkurtzer" rel=
=3D"nofollow" target=3D"_blank" class=3D"">https://github.com/gmk<wbr class=
=3D"">urtzer</a>,&nbsp;<span style=3D"font-size: 12.8px;" class=3D"">Twitte=
r:&nbsp;</span><a href=3D"https://twitter.com/gmkurtzer" rel=3D"nofollow" t=
arget=3D"_blank" style=3D"font-size: 12.8px;" class=3D"">https://twitt<wbr =
class=3D"">er.com/gmkurtzer</a></div></div></div></div></div></div></div></=
div></div></div></div></div></div></div></blockquote></div><div class=3D"HO=
EnZb"><div class=3D"h5"><div class=3D""><br class=3D"webkit-block-placehold=
er"></div>--<span class=3D"Apple-converted-space">&nbsp;</span><br class=3D=
"">You received this message because you are subscribed to the Google Group=
s "singularity" group.<br class=3D"">To unsubscribe from this group and sto=
p receiving emails from it, send an email to<span class=3D"Apple-converted-=
space">&nbsp;</span><a href=3D"mailto:singu...@lbl.gov" target=3D"_blank" c=
lass=3D"">singularity+unsubscribe@lbl.<wbr class=3D"">gov</a>.<br class=3D"=
"></div></div></blockquote></div><br style=3D"font-family: Helvetica; font-=
size: 12px; font-style: normal; font-variant-caps: normal; font-weight: nor=
mal; letter-spacing: normal; orphans: auto; text-align: start; text-indent:=
 0px; text-transform: none; white-space: normal; widows: auto; word-spacing=
: 0px; -webkit-text-stroke-width: 0px;" class=3D""><br clear=3D"all" style=
=3D"font-family: Helvetica; font-size: 12px; font-style: normal; font-varia=
nt-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto=
; text-align: start; text-indent: 0px; text-transform: none; white-space: n=
ormal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;" cl=
ass=3D""><div style=3D"font-family: Helvetica; font-size: 12px; font-style:=
 normal; font-variant-caps: normal; font-weight: normal; letter-spacing: no=
rmal; orphans: auto; text-align: start; text-indent: 0px; text-transform: n=
one; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-str=
oke-width: 0px;" class=3D""><br class=3D""></div><span style=3D"font-family=
: Helvetica; font-size: 12px; font-style: normal; font-variant-caps: normal=
; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: s=
tart; text-indent: 0px; text-transform: none; white-space: normal; widows: =
auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; float: none; displ=
ay: inline !important;" class=3D"">--<span class=3D"Apple-converted-space">=
&nbsp;</span></span><br style=3D"font-family: Helvetica; font-size: 12px; f=
ont-style: normal; font-variant-caps: normal; font-weight: normal; letter-s=
pacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-tr=
ansform: none; white-space: normal; widows: auto; word-spacing: 0px; -webki=
t-text-stroke-width: 0px;" class=3D""><div class=3D"gmail_signature" data-s=
martmail=3D"gmail_signature" style=3D"font-family: Helvetica; font-size: 12=
px; font-style: normal; font-variant-caps: normal; font-weight: normal; let=
ter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; te=
xt-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -=
webkit-text-stroke-width: 0px;"><div dir=3D"ltr" class=3D""><div class=3D""=
><div dir=3D"ltr" class=3D""><div class=3D""><div dir=3D"ltr" class=3D""><d=
iv class=3D""><div dir=3D"ltr" class=3D""><div dir=3D"ltr" class=3D""><div =
dir=3D"ltr" class=3D""><div class=3D"">Gregory M. Kurtzer</div><div class=
=3D"">HPC Systems Architect and Technology Developer</div><div class=3D"">L=
awrence Berkeley National Laboratory HPCS<br class=3D"">University of Calif=
ornia Berkeley Research IT<br class=3D"">Singularity Linux Containers&nbsp;=
(<a href=3D"http://singularity.lbl.gov/" target=3D"_blank" class=3D"">http:=
//singularity.lbl.gov/</a>)</div><div class=3D"">Warewulf Cluster Managemen=
t&nbsp;(<a href=3D"http://warewulf.lbl.gov/" target=3D"_blank" class=3D"">h=
ttp://warewulf.lbl.gov/</a>)</div><div class=3D"">GitHub:&nbsp;<a href=3D"h=
ttps://github.com/gmkurtzer" target=3D"_blank" class=3D"">https://github.co=
m/gmkurtzer</a>,&nbsp;<span style=3D"font-size: 12.8px;" class=3D"">Twitter=
:&nbsp;</span><a href=3D"https://twitter.com/gmkurtzer" target=3D"_blank" s=
tyle=3D"font-size: 12.8px;" class=3D"">https://twitter.com/gmkurtzer</a></d=
iv></div></div></div></div></div></div></div></div></div></div></div></bloc=
kquote></div><br class=3D""></body></html>
--Apple-Mail=_9C936175-F375-4C85-941B-4FA724684128--
